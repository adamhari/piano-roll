{"version":3,"sources":["js/statics.ts","js/utils.js","components/PianoKeys.tsx","components/controls/button/ButtonLight.tsx","components/controls/button/ButtonControl.tsx","components/controls/DigitalControl.tsx","components/controls/KnobControl.tsx","components/controls/button/FileInputButtonControl.tsx","components/controls/button/InputRecorderButtonControl.tsx","components/Waveform.tsx","components/MidiInputDropdown.tsx","components/Instrument.tsx","js/classes/Output.js","App.jsx","serviceWorker.js","index.js"],"names":["LAYOUTS","z","x","c","v","b","n","m","a","s","d","f","g","h","j","k","l","q","w","e","r","t","y","u","i","o","p","delete","backspace","insert","MODIFIER_KEYS","NOTES","name","freq","Math","pow","KEYS","KEYS_MAP","forEach","note","key","octave","push","MODES","SAMPLER","SYNTH","SAMPLES","SUPPORTED_SAMPLE_FORMATS","OSC_SHAPES","FILTER_TYPES","FILTER_ROLLOFFS","OVERSAMPLE_TYPES","CONTROL_TYPES","digital","pixelStep","knob","CONTROLS","layout","defaultValue","range","min","max","length","volume","polyphony","portamento","attack","decay","sustain","release","mode","Object","keys","sample","samplePitch","osc1Shape","osc1Octave","osc1Transpose","osc1Detune","osc1Gain","osc2Shape","osc2Octave","osc2Transpose","osc2Detune","osc2Gain","modOscShape","modOscFreq","modOscGain","filter1Type","filter1Rolloff","filter1Freq","filter1Q","filter2Type","filter2Rolloff","filter2Freq","filter2Q","vibratoDepth","vibratoFreq","vibratoWet","chorusSpread","chorusDepth","chorusDelay","chorusFreq","chorusType","chorusWet","crusherBits","crusherWet","distOver","distAmount","distWet","pitcherPitch","pitcherWindow","pitcherWet","reverbSize","reverbDampening","reverbWet","CONTROLS_NAMES","CONTROLS_DEFAULT_VALUES","getNoteFromValues","transpose","getDecibelsFromValue","value","log10","getFrequencyFromValue","BASE_FREQ","getSecondsFromValue","PianoKeys","activeKeys","octaves","handleMouseDownPianoKey","handleMouseUpPianoKey","handleMouseOverPianoKey","handleMouseLeavePianoKey","blackKeys","whiteKeys","slice","index","active","includes","substring","endsWith","title","className","join","id","onMouseDown","onMouseUp","onMouseOver","onMouseLeave","ButtonLight","size","classes","getClasses","ButtonControl","children","handleClickControl","label","light","onClick","DigitalControl","handleMouseDownControl","handleMouseUpControl","handleMouseWheelControl","outline","digits","useMemo","getDigits","digitTypes","backgroundValue","style","val","styles","left","letterSpacing","htmlFor","Number","isInteger","onWheel","KnobControl","activeControl","valueForRotate","transform","getKnobStyle","opacity","FileInputControl","inputRef","useRef","current","click","ref","onChange","file","files","fileUrl","URL","createObjectURL","type","accept","display","InputRecorderControl","useState","recording","setRecording","mediaRecorder","useEffect","navigator","mediaDevices","getUserMedia","audio","then","stream","MediaRecorder","start","stop","addEventListener","data","Waveform","wavesurfer","WaveSurfer","create","autoCenter","container","cursorWidth","hideScrollbar","normalize","interact","waveColor","destroy","load","empty","MidiInputDropdown","handleMidiKeyDown","handleMidiKeyUp","inputs","setInputs","activeInputName","setActiveInputName","activeInput","WebMidi","enable","err","addListener","getNoteFromEvent","replace","removeListener","selectedInput","find","target","map","Instrument","sampleLoading","sampleLoaded","sharedControlProps","renderLogo","viewBox","fill","fillRule","marginLeft","renderInputDropdown","renderGlobalControls","renderVolumeControl","renderEnvelopeControls","renderSampler","FileInputButtonControl","InputRecorderButtonControl","renderSynth","renderOscillators","renderModOscillator","Output","app","audioContext","initializeMaster","master","Master","initializeReverb","reverb","Freeverb","connect","initializePitcher","pitcher","PitchShift","initializeDistortion","distortion","Distortion","initializeBitcrusher","bitcrusher","BitCrusher","initializeChorus","chorus","Chorus","initializeVibrato","vibrato","Vibrato","initializeFilters","filter1","Filter","filter2","initializeSampler","sampler","Sampler","C5","console","log","initializeOscillators","osc1","PolySynth","FMSynth","osc2","oscillators","initializeValues","envelope","freqs","playKey","playKeys","activeOsc1Freq","_osc1Octave","_osc1Transpose","activeOsc2Freq","_osc2Octave","_osc2Transpose","triggerAttack","_audioContext","now","loaded","stopKey","splice","indexOf","triggerRelease","stopKeys","releaseAll","retriggerKeys","stoppedFreqs","hasPortamento","set","control","this","_active","_app","arguments","_volume","_polyphony","_portamento","attackCurve","decayCurve","releaseCurve","modulationEnvelope","_attack","_decay","_sustain","_release","_mode","_sample","setState","sampleBuffer","Buffer","add","_samplePitch","_osc1Shape","oscillator","_osc2Shape","_osc1Detune","_osc2Detune","_osc1Gain","_osc2Gain","_modOscShape","modulation","_modOscFreq","harmonicity","_modOscGain","modulationIndex","_filter1Type","_filter2Type","_filter1Rolloff","rolloff","_filter2Rolloff","_filter1Freq","frequency","_filter2Freq","_filter1Q","Q","_filter2Q","_vibratoDepth","depth","_vibratoFreq","_vibratoWet","wet","_chorusSpread","spread","_chorusDepth","_chorusDelay","delay","_chorusFreq","_chorusType","_chorusWet","_distOver","oversample","_distAmount","_distWet","_pitcherPitch","pitch","_pitcherWindow","windowSize","_pitcherWet","_reverbSize","roomSize","_reverbDampening","dampening","_reverbWet","App","props","componentDidMount","initializeSoundEngine","registerEventListeners","componentWillUnmount","window","terminateSoundEngine","document","handleKeyDown","handleKeyUp","handleMouseDown","handleMouseUp","handleMouseLeave","handleMouseOut","preventDefault","Context","setOutputFromState","dispose","controlsState","state","output","resumeAudioContext","audioContextStarted","resume","keyPressed","toLowerCase","pianoKey","activatePianoKey","activeModifierKey","keyReleased","deactivatePianoKey","mouseDownOnKeys","button","prevState","filter","setControlValue","activeControlType","resetControlValue","activateControl","screenY","deactivateControl","handleMouseMoveControl","event","activeScreenY","movement","abs","change","round","newState","changeControlValue","removeEventListener","getValueFromRange","Component","Boolean","location","hostname","match","ReactDOM","render","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.0e22c078.chunk.js","sourcesContent":["export const LAYOUTS = [\r\n\t{\r\n\t\t// MAJOR\r\n\t\tz: 'C0',\r\n\t\tx: 'D0',\r\n\t\tc: 'E0',\r\n\t\tv: 'F0',\r\n\t\tb: 'G0',\r\n\t\tn: 'A0',\r\n\t\tm: 'B0',\r\n\t\ta: 'C1',\r\n\t\ts: 'D1',\r\n\t\td: 'E1',\r\n\t\tf: 'F1',\r\n\t\tg: 'G1',\r\n\t\th: 'A1',\r\n\t\tj: 'B1',\r\n\t\tk: 'C2',\r\n\t\tl: 'D2',\r\n\t\t';': 'E2',\r\n\t\t\"'\": 'F2',\r\n\t\t',': 'C1',\r\n\t\t'.': 'D1',\r\n\t\t'/': 'E1',\r\n\t\tq: 'C2',\r\n\t\tw: 'D2',\r\n\t\te: 'E2',\r\n\t\tr: 'F2',\r\n\t\tt: 'G2',\r\n\t\ty: 'A2',\r\n\t\tu: 'B2',\r\n\t\ti: 'C3',\r\n\t\to: 'D3',\r\n\t\tp: 'E3',\r\n\t\t'[': 'F3',\r\n\t\t']': 'G3',\r\n\t\t'\\\\': 'A3',\r\n\t\tdelete: 'B3',\r\n\t},\r\n\t{\r\n\t\t// MINOR\r\n\t\tz: 'C0',\r\n\t\ts: 'C♯0',\r\n\t\tx: 'D0',\r\n\t\td: 'D♯0',\r\n\t\tc: 'E0',\r\n\t\tv: 'F0',\r\n\t\tg: 'F♯0',\r\n\t\tb: 'G0',\r\n\t\th: 'G♯0',\r\n\t\tn: 'A0',\r\n\t\tj: 'A♯0',\r\n\t\tm: 'B0',\r\n\t\t',': 'C1',\r\n\t\tl: 'C♯1',\r\n\t\t'.': 'D1',\r\n\t\t';': 'D♯1',\r\n\t\t'/': 'E1',\r\n\t\tq: 'C1',\r\n\t\t'2': 'C♯1',\r\n\t\tw: 'D1',\r\n\t\t'3': 'D♯1',\r\n\t\te: 'E1',\r\n\t\tr: 'F1',\r\n\t\t'5': 'F♯1',\r\n\t\tt: 'G1',\r\n\t\t'6': 'G♯1',\r\n\t\ty: 'A1',\r\n\t\t'7': 'A♯1',\r\n\t\tu: 'B1',\r\n\t\ti: 'C2',\r\n\t\t'9': 'C♯2',\r\n\t\to: 'D2',\r\n\t\t'0': 'D♯2',\r\n\t\tp: 'E2',\r\n\t\t'[': 'F2',\r\n\t\t'=': 'F♯2',\r\n\t\t']': 'G2',\r\n\t\tbackspace: 'G♯2',\r\n\t\t'\\\\': 'A2',\r\n\t\tinsert: 'A♯2',\r\n\t\tdelete: 'B2',\r\n\t},\r\n];\r\n\r\nexport const MODIFIER_KEYS = ['control', 'command', 'meta'];\r\nexport const BASE_FREQ = 16.3516;\r\nexport const FREQ_MULTIPLIER = 1.0594630943593;\r\nexport const NOTES = [\r\n\t{\r\n\t\tname: 'C',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 0),\r\n\t},\r\n\t{\r\n\t\tname: 'C♯',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 1),\r\n\t},\r\n\t{\r\n\t\tname: 'D',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 2),\r\n\t},\r\n\t{\r\n\t\tname: 'D♯',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 3),\r\n\t},\r\n\t{\r\n\t\tname: 'E',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 4),\r\n\t},\r\n\t{\r\n\t\tname: 'F',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 5),\r\n\t},\r\n\t{\r\n\t\tname: 'F♯',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 6),\r\n\t},\r\n\t{\r\n\t\tname: 'G',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 7),\r\n\t},\r\n\t{\r\n\t\tname: 'G♯',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 8),\r\n\t},\r\n\t{\r\n\t\tname: 'A',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 9),\r\n\t},\r\n\t{\r\n\t\tname: 'A♯',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 10),\r\n\t},\r\n\t{\r\n\t\tname: 'B',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 11),\r\n\t},\r\n];\r\n\r\ntype Key = {\r\n\tname: string;\r\n\tfreq: number;\r\n\toctave: number;\r\n};\r\nexport const KEYS: Key[] = [];\r\n\r\ntype KeysMap = {\r\n\t[key: string]: Key;\r\n};\r\nexport const KEYS_MAP: KeysMap = {};\r\nfor (let i = 0; i < 10; i++) {\r\n\tNOTES.forEach((note) => {\r\n\t\tconst key = {\r\n\t\t\tname: note.name + i,\r\n\t\t\tfreq: note.freq * Math.pow(2, i),\r\n\t\t\toctave: i,\r\n\t\t};\r\n\t\tKEYS.push(key);\r\n\t\tKEYS_MAP[key.name] = key;\r\n\t});\r\n}\r\n\r\nexport const MODES = {\r\n\tSAMPLER: 0,\r\n\tSYNTH: 1,\r\n};\r\n\r\nexport const SAMPLES = ['/assets/audio/samples/CS_Synth_Hit_9_G.mp3'];\r\n\r\nexport const SUPPORTED_SAMPLE_FORMATS = ['audio/wav', 'audio/mp3', 'audio/ogg'];\r\n\r\nexport const OSC_SHAPES = ['sawtooth', 'square', 'triangle', 'sine'];\r\n\r\nexport const FILTER_TYPES = [\r\n\t'lowpass',\r\n\t'highpass',\r\n\t'bandpass',\r\n\t'lowshelf',\r\n\t'highshelf',\r\n\t'peaking',\r\n\t'notch',\r\n];\r\n\r\nexport const FILTER_ROLLOFFS = [-12, -24, -48, -96];\r\n\r\nexport const OVERSAMPLE_TYPES = ['none', '2x', '4x'];\r\n\r\nexport const CONTROL_TYPES = {\r\n\tdigital: {\r\n\t\tname: 'digital',\r\n\t\tpixelStep: 10,\r\n\t},\r\n\tknob: {\r\n\t\tname: 'knob',\r\n\t\tpixelStep: 3,\r\n\t},\r\n};\r\n\r\ntype Controls = {\r\n\t[key: string]: {\r\n\t\tdefaultValue: number;\r\n\t\trange: {\r\n\t\t\tmin: number;\r\n\t\t\tmax: number;\r\n\t\t};\r\n\t};\r\n};\r\n\r\nexport const CONTROLS: Controls = {\r\n\t/* GLOBAL */\r\n\tlayout: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: LAYOUTS.length - 1,\r\n\t\t},\r\n\t},\r\n\tvolume: {\r\n\t\tdefaultValue: 50,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tpolyphony: {\r\n\t\tdefaultValue: 9,\r\n\t\trange: {\r\n\t\t\tmin: 1,\r\n\t\t\tmax: 9,\r\n\t\t},\r\n\t},\r\n\tportamento: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\t/* ENVELOPE */\r\n\tattack: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tdecay: {\r\n\t\tdefaultValue: 50,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tsustain: {\r\n\t\tdefaultValue: 75,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\trelease: {\r\n\t\tdefaultValue: 25,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tmode: {\r\n\t\tdefaultValue: MODES.SAMPLER,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: Object.keys(MODES).length - 1,\r\n\t\t},\r\n\t},\r\n\t/* SAMPLER */\r\n\tsample: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: SAMPLES.length - 1,\r\n\t\t},\r\n\t},\r\n\tsamplePitch: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: -50,\r\n\t\t\tmax: 50,\r\n\t\t},\r\n\t},\r\n\t/* SYNTH */\r\n\tosc1Shape: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: OSC_SHAPES.length - 1,\r\n\t\t},\r\n\t},\r\n\tosc1Octave: {\r\n\t\tdefaultValue: 5,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 9,\r\n\t\t},\r\n\t},\r\n\tosc1Transpose: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: -9,\r\n\t\t\tmax: 9,\r\n\t\t},\r\n\t},\r\n\tosc1Detune: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: -100,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tosc1Gain: {\r\n\t\tdefaultValue: 100,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tosc2Shape: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: OSC_SHAPES.length - 1,\r\n\t\t},\r\n\t},\r\n\tosc2Octave: {\r\n\t\tdefaultValue: 5,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 9,\r\n\t\t},\r\n\t},\r\n\tosc2Transpose: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: -9,\r\n\t\t\tmax: 9,\r\n\t\t},\r\n\t},\r\n\tosc2Detune: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: -100,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tosc2Gain: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tmodOscShape: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: OSC_SHAPES.length - 1,\r\n\t\t},\r\n\t},\r\n\tmodOscFreq: {\r\n\t\tdefaultValue: 50,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tmodOscGain: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\t/* FILTERS */\r\n\tfilter1Type: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: FILTER_TYPES.length - 1,\r\n\t\t},\r\n\t},\r\n\tfilter1Rolloff: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: FILTER_ROLLOFFS.length - 1,\r\n\t\t},\r\n\t},\r\n\tfilter1Freq: {\r\n\t\tdefaultValue: 100,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tfilter1Q: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tfilter2Type: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: FILTER_TYPES.length - 1,\r\n\t\t},\r\n\t},\r\n\tfilter2Rolloff: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: FILTER_ROLLOFFS.length - 1,\r\n\t\t},\r\n\t},\r\n\tfilter2Freq: {\r\n\t\tdefaultValue: 100,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tfilter2Q: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\t/* VIBRATO */\r\n\tvibratoDepth: {\r\n\t\tdefaultValue: 100,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tvibratoFreq: {\r\n\t\tdefaultValue: 50,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tvibratoWet: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\t/* CHORUS */\r\n\tchorusSpread: {\r\n\t\tdefaultValue: 180,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 359,\r\n\t\t},\r\n\t},\r\n\tchorusDepth: {\r\n\t\tdefaultValue: 50,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tchorusDelay: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tchorusFreq: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tchorusType: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: OSC_SHAPES.length - 1,\r\n\t\t},\r\n\t},\r\n\tchorusWet: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\t/* BIT CRUSHER */\r\n\tcrusherBits: {\r\n\t\tdefaultValue: 4,\r\n\t\trange: {\r\n\t\t\tmin: 1,\r\n\t\t\tmax: 8,\r\n\t\t},\r\n\t},\r\n\tcrusherWet: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\t/* DISTORTION */\r\n\tdistOver: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: OVERSAMPLE_TYPES.length - 1,\r\n\t\t},\r\n\t},\r\n\tdistAmount: {\r\n\t\tdefaultValue: 50,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tdistWet: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\t/* PITCHER */\r\n\tpitcherPitch: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: -60,\r\n\t\t\tmax: 60,\r\n\t\t},\r\n\t},\r\n\tpitcherWindow: {\r\n\t\tdefaultValue: 100,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tpitcherWet: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\t/* REVERB */\r\n\treverbSize: {\r\n\t\tdefaultValue: 50,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\treverbDampening: {\r\n\t\tdefaultValue: 50,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\treverbWet: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n};\r\n\r\nexport const CONTROLS_NAMES: string[] = [];\r\nexport const CONTROLS_DEFAULT_VALUES: {[key: string]: number} = {};\r\nObject.keys(CONTROLS).forEach((k) => {\r\n\tCONTROLS_NAMES.push(k);\r\n\tCONTROLS_DEFAULT_VALUES[k] = CONTROLS[k].defaultValue;\r\n});\r\n","import {BASE_FREQ, FREQ_MULTIPLIER} from './statics';\r\n\r\nexport const getValueFromRange = (value, range) => {\r\n  const { min, max } = range;\r\n  if (value > max) return max;\r\n  else if (value < min) return min;\r\n  return value;\r\n};\r\n\r\n// (base Hz, octave, transpose) --> (pitched Hz)\r\nexport const getNoteFromValues = (freq, octave, transpose) => {\r\n\tconst octavedFrequency = (freq * Math.pow(2, octave)) / 8;\r\n\treturn octavedFrequency * Math.pow(FREQ_MULTIPLIER, transpose);\r\n};\r\n\r\n// (0 - 100) --> (-Infinity - 0)\r\nexport const getDecibelsFromValue = value => 20 * Math.log10(value / 100);\r\n\r\n// (0 - 100) --> (0 - 21031)\r\nexport const getFrequencyFromValue = value => BASE_FREQ * 4 * Math.pow(FREQ_MULTIPLIER, value) - BASE_FREQ * 4;\r\n\r\n// (0 - 100) --> (0.0001 - 4)\r\nexport const getSecondsFromValue = value => Math.pow(value, 2) / 2500 || 0.0001;\r\n\r\n// (0 - 100) --> (0.03125 - 32)\r\nexport const getHarmonicityFromValue = value => Math.pow(2, (value - 50) / 10);\r\n","import React, {ReactNode} from 'react';\r\nimport {KEYS} from '../js/statics';\r\nimport {PianoKeyMouseEvents} from '../types';\r\n\r\ntype Props = PianoKeyMouseEvents & {\r\n\tactiveKeys: string[];\r\n\toctaves: number;\r\n};\r\n\r\nconst PianoKeys = ({\r\n\tactiveKeys,\r\n\toctaves,\r\n\thandleMouseDownPianoKey,\r\n\thandleMouseUpPianoKey,\r\n\thandleMouseOverPianoKey,\r\n\thandleMouseLeavePianoKey,\r\n}: Props) => {\r\n\tconst blackKeys: ReactNode[] = [];\r\n\tconst whiteKeys: ReactNode[] = [];\r\n\r\n\tKEYS.slice(0, 12 * octaves).forEach((key, index) => {\r\n\t\tconst {name} = key;\r\n\t\tconst active = activeKeys.includes(name);\r\n\t\tconst note = name.substring(0, name.length - 1);\r\n\t\tconst keySet = note.endsWith('♯') ? blackKeys : whiteKeys;\r\n\r\n\t\tkeySet.push(\r\n\t\t\t<div\r\n\t\t\t\tkey={index}\r\n\t\t\t\ttitle={name}\r\n\t\t\t\tclassName={[\r\n\t\t\t\t\t'piano-key',\r\n\t\t\t\t\t`piano-key-${note}`,\r\n\t\t\t\t\tnote.endsWith('♯') ? 'piano-key-black' : 'piano-key-white',\r\n\t\t\t\t\tactive ? 'piano-key-active' : 'piano-key-inactive',\r\n\t\t\t\t].join(' ')}\r\n\t\t\t\tid={`piano-key-${name}`}\r\n\t\t\t\tonMouseDown={handleMouseDownPianoKey}\r\n\t\t\t\tonMouseUp={handleMouseUpPianoKey}\r\n\t\t\t\tonMouseOver={handleMouseOverPianoKey}\r\n\t\t\t\tonMouseLeave={handleMouseLeavePianoKey}\r\n\t\t\t/>\r\n\t\t);\r\n\t});\r\n\r\n\treturn (\r\n\t\t<div id='piano-keys'>\r\n\t\t\t<div id='piano-black-keys'>{blackKeys}</div>\r\n\t\t\t<div id='piano-white-keys'>{whiteKeys}</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default PianoKeys;\r\n","import React from 'react';\r\nimport {Size} from '../../../types';\r\n\r\ntype Props = {\r\n\tactive: boolean;\r\n\tsize: Size;\r\n};\r\n\r\nconst ButtonLight = ({active, size}: Props) => {\r\n\tconst getClasses = () => {\r\n\t\tlet classes = ['light'];\r\n\t\tactive && classes.push('active');\r\n\t\tsize && classes.push(size);\r\n\t\treturn classes.join(' ');\r\n\t};\r\n\r\n\treturn <div className={getClasses()} />;\r\n};\r\n\r\nexport default ButtonLight;\r\n","import React, {MouseEvent} from 'react';\r\nimport ButtonLight from './ButtonLight';\r\nimport {ButtonMouseEvents, Size} from '../../../types';\r\n\r\ntype Props = ButtonMouseEvents & {\r\n\tactive?: boolean;\r\n\tchildren?: React.ReactNode;\r\n\tlabel?: string;\r\n\tlight?: boolean;\r\n\tname: string;\r\n\tonClick?: (e: any) => void;\r\n\tsize: Size;\r\n\tvalue: number | string;\r\n};\r\n\r\nconst ButtonControl = ({\r\n\tactive,\r\n\tchildren,\r\n\thandleClickControl,\r\n\tlabel,\r\n\tlight,\r\n\tname,\r\n\tonClick,\r\n\tsize,\r\n\tvalue,\r\n}: Props) => {\r\n\tconst handleClick = (e: MouseEvent) => handleClickControl(name, value);\r\n\r\n\tconst getClasses = () => {\r\n\t\tlet classes = ['button'];\r\n\t\tactive && classes.push('active');\r\n\t\tsize && classes.push(size);\r\n\t\treturn classes.join(' ');\r\n\t};\r\n\r\n\tconst renderButtonLight = () => light && <ButtonLight active={active || false} size={size} />;\r\n\r\n\treturn (\r\n\t\t<div className={'button-control-container control-container'}>\r\n\t\t\t<div className='control-label'>{label || value}</div>\r\n\t\t\t<div className={'button-container'}>\r\n\t\t\t\t<div onClick={onClick || handleClick} className={getClasses()}>\r\n\t\t\t\t\t{renderButtonLight()}\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ButtonControl;\r\n","import React, {CSSProperties, MouseEvent, useMemo} from 'react';\r\nimport {CONTROL_TYPES, CONTROLS} from '../../js/statics';\r\nimport {ControlMouseEvents, DigitType} from '../../types';\r\n\r\ntype Props = ControlMouseEvents & {\r\n\tname: string;\r\n\tlabel?: string;\r\n\toutline?: boolean;\r\n\tvalue: number;\r\n};\r\n\r\nconst DigitalControl = ({\r\n\thandleMouseDownControl,\r\n\thandleMouseUpControl,\r\n\thandleMouseWheelControl,\r\n\tname,\r\n\tlabel,\r\n\toutline,\r\n\tvalue,\r\n}: Props) => {\r\n\tconst {\r\n\t\trange: {min, max},\r\n\t} = CONTROLS[name];\r\n\r\n\tconst getDigits = (min: number, max: number): DigitType => {\r\n\t\tif (min > -1 && max < 10) return 'single-digit';\r\n\t\tif (min <= -1 && max < 10) return 'single-digit-negative';\r\n\t\tif (min > -1 && max >= 10) return 'double-digit';\r\n\t\treturn 'double-digit-negative';\r\n\t};\r\n\r\n\tconst digits = useMemo(() => getDigits(min, max), [min, max]);\r\n\r\n\tconst handleMouseDown = (e: MouseEvent<HTMLDivElement>) =>\r\n\t\thandleMouseDownControl(name, CONTROL_TYPES.digital.name, e);\r\n\r\n\tconst handleMouseUp = (e: MouseEvent<HTMLDivElement>) =>\r\n\t\thandleMouseUpControl(name, CONTROL_TYPES.digital.name, e);\r\n\r\n\tconst handleMouseWheel = (e: MouseEvent<HTMLDivElement>) =>\r\n\t\thandleMouseWheelControl(name, CONTROL_TYPES.digital.name, e);\r\n\r\n\tconst digitTypes = {\r\n\t\t'single-digit': {\r\n\t\t\tbackgroundValue: 8,\r\n\t\t\tstyle: (val: number) => {\r\n\t\t\t\tconst styles: CSSProperties = {};\r\n\t\t\t\tif (val === 1) styles.left = '-0.25rem';\r\n\t\t\t\treturn styles;\r\n\t\t\t},\r\n\t\t},\r\n\t\t'single-digit-negative': {\r\n\t\t\tbackgroundValue: -8,\r\n\t\t\tstyle: (val: number) => {\r\n\t\t\t\tconst styles: CSSProperties = {};\r\n\t\t\t\tif (val > 1 || val === 0) styles.left = '-0.0625rem';\r\n\t\t\t\tif (val === 1) styles.left = '0.245rem';\r\n\t\t\t\tif (val === -1) {\r\n\t\t\t\t\tstyles.left = '-0.225rem';\r\n\t\t\t\t\tstyles.letterSpacing = '0.5375rem';\r\n\t\t\t\t}\r\n\t\t\t\treturn styles;\r\n\t\t\t},\r\n\t\t},\r\n\t\t'double-digit': {\r\n\t\t\tbackgroundValue: 88,\r\n\t\t\tstyle: (val: number) => {\r\n\t\t\t\tconst styles: CSSProperties = {};\r\n\t\t\t\treturn styles;\r\n\t\t\t},\r\n\t\t},\r\n\t\t'double-digit-negative': {\r\n\t\t\tbackgroundValue: -88,\r\n\t\t\tstyle: (val: number) => {\r\n\t\t\t\tconst styles: CSSProperties = {};\r\n\t\t\t\treturn styles;\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={'digital-control ' + (outline ? 'digital-control-outlined' : '')}>\r\n\t\t\t<label id={'' + name + '-label'} className='control-label' htmlFor={'' + name}>\r\n\t\t\t\t{label || name}\r\n\t\t\t</label>\r\n\t\t\t<div className='digital-control-input-container control-container'>\r\n\t\t\t\t<div id={'' + name} className={'digital-control-input ' + digits}>\r\n\t\t\t\t\t{8}\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tid={'' + name + '-background'}\r\n\t\t\t\t\t\tclassName={'digital-control-input digital-control-input-background ' + digits}\r\n\t\t\t\t\t\tchildren={digitTypes[digits].backgroundValue}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tid={'' + name + '-foreground'}\r\n\t\t\t\t\t\tclassName={'digital-control-input digital-control-input-foreground ' + digits}\r\n\t\t\t\t\t\tchildren={Number.isInteger(value) ? value : '-'}\r\n\t\t\t\t\t\tstyle={digitTypes[digits].style(value)}\r\n\t\t\t\t\t\tonMouseDown={handleMouseDown}\r\n\t\t\t\t\t\tonMouseUp={handleMouseUp}\r\n\t\t\t\t\t\tonWheel={handleMouseWheel}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default DigitalControl;\r\n","import React, {CSSProperties, MouseEvent} from 'react';\r\nimport {CONTROL_TYPES, CONTROLS} from '../../js/statics';\r\nimport {Size, ControlMouseEvents} from '../../types';\r\n\r\ntype Props = ControlMouseEvents & {\r\n\tactiveControl: string;\r\n\tname: string;\r\n\tlabel?: string;\r\n\tsize: Size;\r\n\tvalue: number;\r\n};\r\n\r\nconst KnobControl = ({\r\n\tactiveControl,\r\n\thandleMouseDownControl,\r\n\thandleMouseUpControl,\r\n\thandleMouseWheelControl,\r\n\tname,\r\n\tlabel,\r\n\tsize,\r\n\tvalue,\r\n}: Props) => {\r\n\tconst {\r\n\t\trange: {min, max},\r\n\t} = CONTROLS[name];\r\n\r\n\tconst handleMouseDown = (e: MouseEvent<HTMLDivElement>) =>\r\n\t\thandleMouseDownControl(name, CONTROL_TYPES.knob.name, e);\r\n\r\n\tconst handleMouseUp = (e: MouseEvent<HTMLDivElement>) =>\r\n\t\thandleMouseUpControl(name, CONTROL_TYPES.knob.name, e);\r\n\r\n\tconst handleMouseWheel = (e: MouseEvent<HTMLDivElement>) =>\r\n\t\thandleMouseWheelControl(name, CONTROL_TYPES.knob.name, e);\r\n\r\n\tconst getKnobStyle = () => {\r\n\t\tconst style: CSSProperties = {};\r\n\r\n\t\tconst valueAsPercent = ((value - min) * 100) / (max - min);\r\n\t\tconst valueAsDeg = valueAsPercent * 3.6;\r\n\t\tconst valueForRotate = (valueAsDeg + 180) * 0.875 + 45;\r\n\r\n\t\tstyle.transform = `rotate(${valueForRotate}deg)`;\r\n\r\n\t\treturn style;\r\n\r\n\t\t//min: 0, 0\r\n\t\t//max: 30, 50\r\n\t\t//input: 5, 15\r\n\r\n\t\t// (5 - 0) * 100 / (30 - 0) = 16.667\r\n\t\t// (15 - 0) * 100 / (50 - 0) = 30\r\n\t};\r\n\r\n\tconst getValueStyles = () => {\r\n\t\tconst styles: CSSProperties = {\r\n\t\t\topacity: activeControl === name ? 1 : 0,\r\n\t\t};\r\n\r\n\t\treturn styles;\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={'knob-control-container control-container ' + (size || '')}>\r\n\t\t\t<div className='control-label'>{label || name}</div>\r\n\t\t\t<div className='knob-container'>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='knob'\r\n\t\t\t\t\tstyle={getKnobStyle()}\r\n\t\t\t\t\tonMouseDown={handleMouseDown}\r\n\t\t\t\t\tonMouseUp={handleMouseUp}\r\n\t\t\t\t\tonWheel={handleMouseWheel}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className='knob-control-value' style={getValueStyles()}>\r\n\t\t\t\t\t{value}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default KnobControl;\r\n","import React, {FormEvent, useRef} from 'react';\r\nimport ButtonControl from './ButtonControl';\r\nimport {ButtonMouseEvents, Size} from '../../../types';\r\nimport {SUPPORTED_SAMPLE_FORMATS} from '../../../js/statics';\r\n\r\ntype Props = ButtonMouseEvents & {\r\n\tname: string;\r\n\tlabel?: string;\r\n\tsize: Size;\r\n\tvalue: number | string;\r\n};\r\n\r\nconst FileInputControl = ({handleClickControl, name, label, size, value}: Props) => {\r\n\tconst inputRef = useRef<HTMLInputElement>(null);\r\n\r\n\tconst handleClick = (e: FormEvent<HTMLInputElement>) => inputRef.current?.click();\r\n\r\n\tconst handleChange = (e: FormEvent<HTMLInputElement>) => {\r\n\t\tif (inputRef?.current) {\r\n\t\t\t// const file = inputRef && inputRef.current && inputRef.current.files && inputRef.current.files[0];\r\n\t\t\tconst file = inputRef?.current?.files?.[0];\r\n\r\n\t\t\tif (file) {\r\n\t\t\t\tconst fileUrl = URL.createObjectURL(file);\r\n\t\t\t\thandleClickControl(name, fileUrl);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<ButtonControl\r\n\t\t\tlabel={label}\r\n\t\t\tname={name}\r\n\t\t\thandleClickControl={handleClickControl}\r\n\t\t\tonClick={handleClick}\r\n\t\t\tsize={size}\r\n\t\t\tvalue={value}\r\n\t\t>\r\n\t\t\t<input\r\n\t\t\t\tref={inputRef}\r\n\t\t\t\tonChange={handleChange}\r\n\t\t\t\ttype={'file'}\r\n\t\t\t\taccept={SUPPORTED_SAMPLE_FORMATS.join(', ')}\r\n\t\t\t\tstyle={{display: 'none'}}\r\n\t\t\t/>\r\n\t\t</ButtonControl>\r\n\t);\r\n};\r\n\r\nexport default FileInputControl;\r\n","import React, {useEffect, useRef, useState} from 'react';\r\nimport ButtonControl from './ButtonControl';\r\nimport {ButtonMouseEvents, Size} from '../../../types';\r\n\r\ntype Props = ButtonMouseEvents & {\r\n\tlabel?: string;\r\n\tlight?: boolean;\r\n\tsize: Size;\r\n};\r\n\r\nconst InputRecorderControl = ({handleClickControl, label, light, size}: Props) => {\r\n\tconst [recording, setRecording] = useState(false);\r\n\tconst mediaRecorder = useRef<MediaRecorder | null>(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tnavigator.mediaDevices.getUserMedia({audio: true}).then((stream) => {\r\n\t\t\tmediaRecorder.current = new MediaRecorder(stream);\r\n\t\t});\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (recording) {\r\n\t\t\tmediaRecorder.current?.start();\r\n\t\t} else if (!recording) {\r\n\t\t\tmediaRecorder.current?.stop();\r\n\t\t\tmediaRecorder.current?.addEventListener('dataavailable', (e: BlobEvent) => {\r\n\t\t\t\thandleClickControl('sample', URL.createObjectURL(e.data));\r\n\t\t\t});\r\n\t\t}\r\n\t}, [handleClickControl, recording]);\r\n\r\n\tconst toggleRecording = () => setRecording(!recording);\r\n\r\n\treturn (\r\n\t\t<ButtonControl\r\n\t\t\tname={'inputRecorder'}\r\n\t\t\tactive={recording}\r\n\t\t\tlabel={label}\r\n\t\t\tlight={light}\r\n\t\t\thandleClickControl={handleClickControl}\r\n\t\t\tonClick={toggleRecording}\r\n\t\t\tsize={size}\r\n\t\t\tvalue={Number(recording)}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default InputRecorderControl;\r\n","import React, {useEffect, useRef} from 'react';\r\nimport WaveSurfer from 'wavesurfer.js';\r\n\r\ntype Props = {\r\n\taudio: string;\r\n};\r\n\r\nconst Waveform = ({audio}: Props) => {\r\n\tconst wavesurfer = useRef<WaveSurfer | null>();\r\n\r\n\tuseEffect(() => {\r\n\t\twavesurfer.current = WaveSurfer.create({\r\n\t\t\tautoCenter: false,\r\n\t\t\tcontainer: '#waveform',\r\n\t\t\tcursorWidth: 0,\r\n\t\t\thideScrollbar: true,\r\n\t\t\tnormalize: true,\r\n\t\t\tinteract: false,\r\n\t\t\twaveColor: '#ff2601',\r\n\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\twavesurfer.current?.destroy();\r\n\t\t};\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (audio) wavesurfer.current?.load(audio);\r\n\t\telse wavesurfer.current?.empty();\r\n\t}, [audio]);\r\n\r\n\treturn (\r\n\t\t<div className='waveform-container'>\r\n\t\t\t<div id='waveform' className='waveform' />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Waveform;\r\n","import React, {ChangeEvent, useEffect, useRef, useState} from 'react';\r\nimport WebMidi, {Input, InputEventNoteon, InputEventNoteoff} from 'webmidi';\r\nimport {MidiKeyEvents} from '../types';\r\n\r\ntype Props = MidiKeyEvents & {};\r\n\r\nconst MidiInputDropdown = ({handleMidiKeyDown, handleMidiKeyUp}: Props) => {\r\n\tconst [inputs, setInputs] = useState<Input[]>([]);\r\n\tconst [activeInputName, setActiveInputName] = useState<string>();\r\n\tconst activeInput = useRef<Input>();\r\n\r\n\tuseEffect(() => {\r\n\t\tWebMidi.enable((err) => {\r\n\t\t\tif (!err) {\r\n\t\t\t\tWebMidi.addListener('connected', (e) => setInputs(WebMidi.inputs));\r\n\t\t\t\tWebMidi.addListener('disconnected', (e) => setInputs(WebMidi.inputs));\r\n\r\n\t\t\t\tsetInputs(WebMidi.inputs);\r\n\t\t\t\tif (WebMidi.inputs.length > 0) activeInput.current = WebMidi.inputs[0];\r\n\t\t\t}\r\n\t\t});\r\n\t}, []);\r\n\r\n\tconst getNoteFromEvent = (e: InputEventNoteon | InputEventNoteoff) =>\r\n\t\t`${e.note.name}${e.note.octave}`.replace('#', '♯');\r\n\r\n\tconst handleChange = (e: ChangeEvent<HTMLSelectElement>) => {\r\n\t\tactiveInput?.current?.removeListener();\r\n\t\tconst selectedInput = inputs.find((x) => x.name === e.target.value);\r\n\t\tselectedInput?.addListener('noteon', 1, (e) => handleMidiKeyDown(getNoteFromEvent(e)));\r\n\t\tselectedInput?.addListener('noteoff', 1, (e) => handleMidiKeyUp(getNoteFromEvent(e)));\r\n\t\tactiveInput.current = selectedInput;\r\n\t\tsetActiveInputName(selectedInput?.name);\r\n\t};\r\n\r\n\tif (inputs.length > 0) {\r\n\t\treturn (\r\n\t\t\t<div id='midi-input-container'>\r\n\t\t\t\t<select value={activeInputName} onChange={handleChange} className={'midi-input-dropdown'}>\r\n\t\t\t\t\t{inputs.map((x, i) => (\r\n\t\t\t\t\t\t<option key={i}>{x.name}</option>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</select>\r\n\t\t\t</div>\r\n\t\t);\r\n\t} else return null;\r\n};\r\n\r\nexport default MidiInputDropdown;\r\n","import React from 'react';\r\nimport PianoKeys from './PianoKeys';\r\nimport ButtonControl from './controls/button/ButtonControl';\r\nimport DigitalControl from './controls/DigitalControl';\r\nimport KnobControl from './controls/KnobControl';\r\nimport FileInputButtonControl from './controls/button/FileInputButtonControl';\r\nimport InputRecorderButtonControl from './controls/button/InputRecorderButtonControl';\r\nimport Waveform from './Waveform';\r\nimport {MODES} from '../js/statics';\r\nimport {ControlMouseEvents, ButtonMouseEvents, PianoKeyMouseEvents, MidiKeyEvents} from '../types';\r\nimport MidiInputDropdown from './MidiInputDropdown';\r\n\r\ntype Props = ControlMouseEvents &\r\n\tButtonMouseEvents &\r\n\tPianoKeyMouseEvents &\r\n\tMidiKeyEvents & {\r\n\t\tactiveKeys: string[];\r\n\t\tactiveControl: string;\r\n\t\toctaves: number;\r\n\t\tlayout: number;\r\n\t\tvolume: number;\r\n\t\tpolyphony: number;\r\n\t\tportamento: number;\r\n\t\tattack: number;\r\n\t\tdecay: number;\r\n\t\tsustain: number;\r\n\t\trelease: number;\r\n\t\tmode: number;\r\n\t\tsample: string;\r\n\t\tsamplePitch: number;\r\n\t\tsampleLoading: boolean;\r\n\t\tsampleLoaded: boolean;\r\n\t\tosc1Shape: number;\r\n\t\tosc1Octave: number;\r\n\t\tosc1Transpose: number;\r\n\t\tosc1Detune: number;\r\n\t\tosc1Gain: number;\r\n\t\tosc2Shape: number;\r\n\t\tosc2Octave: number;\r\n\t\tosc2Transpose: number;\r\n\t\tosc2Detune: number;\r\n\t\tosc2Gain: number;\r\n\t\tmodOscShape: number;\r\n\t\tmodOscFreq: number;\r\n\t\tmodOscGain: number;\r\n\t\tfilter1Type: number;\r\n\t\tfilter1Rolloff: number;\r\n\t\tfilter1Freq: number;\r\n\t\tfilter1Q: number;\r\n\t\tfilter2Type: number;\r\n\t\tfilter2Rolloff: number;\r\n\t\tfilter2Freq: number;\r\n\t\tfilter2Q: number;\r\n\t\tvibratoDepth: number;\r\n\t\tvibratoFreq: number;\r\n\t\tvibratoWet: number;\r\n\t\tchorusSpread: number;\r\n\t\tchorusDepth: number;\r\n\t\tchorusDelay: number;\r\n\t\tchorusFreq: number;\r\n\t\tchorusType: number;\r\n\t\tchorusWet: number;\r\n\t\tcrusherBits: number;\r\n\t\tcrusherWet: number;\r\n\t\tdistOver: number;\r\n\t\tdistAmount: number;\r\n\t\tdistWet: number;\r\n\t\tpitcherPitch: number;\r\n\t\tpitcherWindow: number;\r\n\t\tpitcherWet: number;\r\n\t\treverbSize: number;\r\n\t\treverbDampening: number;\r\n\t\treverbWet: number;\r\n\t};\r\n\r\nconst Instrument = ({\r\n\toctaves,\r\n\tactiveKeys,\r\n\tactiveControl,\r\n\r\n\tlayout,\r\n\tvolume,\r\n\tpolyphony,\r\n\tportamento,\r\n\tattack,\r\n\tdecay,\r\n\tsustain,\r\n\trelease,\r\n\tmode,\r\n\tsample,\r\n\tsamplePitch,\r\n\tsampleLoading,\r\n\tsampleLoaded,\r\n\tosc1Shape,\r\n\tosc1Octave,\r\n\tosc1Transpose,\r\n\tosc1Detune,\r\n\tosc1Gain,\r\n\tosc2Shape,\r\n\tosc2Octave,\r\n\tosc2Transpose,\r\n\tosc2Detune,\r\n\tosc2Gain,\r\n\tmodOscShape,\r\n\tmodOscFreq,\r\n\tmodOscGain,\r\n\tfilter1Type,\r\n\tfilter1Rolloff,\r\n\tfilter1Freq,\r\n\tfilter1Q,\r\n\tfilter2Type,\r\n\tfilter2Rolloff,\r\n\tfilter2Freq,\r\n\tfilter2Q,\r\n\tvibratoDepth,\r\n\tvibratoFreq,\r\n\tvibratoWet,\r\n\tchorusSpread,\r\n\tchorusDepth,\r\n\tchorusDelay,\r\n\tchorusFreq,\r\n\tchorusType,\r\n\tchorusWet,\r\n\tcrusherBits,\r\n\tcrusherWet,\r\n\tdistOver,\r\n\tdistAmount,\r\n\tdistWet,\r\n\tpitcherPitch,\r\n\tpitcherWindow,\r\n\tpitcherWet,\r\n\treverbSize,\r\n\treverbDampening,\r\n\treverbWet,\r\n\r\n\thandleClickControl,\r\n\thandleMouseDownControl,\r\n\thandleMouseUpControl,\r\n\thandleMouseWheelControl,\r\n\r\n\thandleMouseDownPianoKey,\r\n\thandleMouseUpPianoKey,\r\n\thandleMouseOverPianoKey,\r\n\thandleMouseLeavePianoKey,\r\n\r\n\thandleMidiKeyDown,\r\n\thandleMidiKeyUp,\r\n}: Props) => {\r\n\tconst sharedControlProps = {\r\n\t\tactiveControl,\r\n\t\thandleClickControl,\r\n\t\thandleMouseDownControl,\r\n\t\thandleMouseUpControl,\r\n\t\thandleMouseWheelControl,\r\n\t};\r\n\r\n\tconst renderLeftControls = () => (\r\n\t\t<div id='instr-top-left'>\r\n\t\t\t<DigitalControl {...sharedControlProps} name='polyphony' label='poly' value={polyphony} />\r\n\t\t\t<br />\r\n\t\t\t{/* <KnobControl\r\n        {...sharedControlProps}\r\n        name=\"portamento\"\r\n        label=\"porta\"\r\n        value={portamento}\r\n        size=\"medium\"\r\n      />\r\n      <br /> */}\r\n\t\t\t<DigitalControl {...sharedControlProps} name='layout' value={layout} outline={true} />\r\n\t\t</div>\r\n\t);\r\n\r\n\tconst renderGlobalSection = () => (\r\n\t\t<div id='global-section'>\r\n\t\t\t{renderLogo()}\r\n\t\t\t{renderInputDropdown()}\r\n\t\t\t{renderGlobalControls()}\r\n\t\t</div>\r\n\t);\r\n\r\n\tconst renderLogo = () => (\r\n\t\t<div id='logo-section'>\r\n\t\t\t<svg id='logo' viewBox='304.103 332.216 470.661 104.256'>\r\n\t\t\t\t<g>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td='M 654.248 361.208 L 652.04 368.792 L 623.528 431 L 608.264 431 L 635.24 373.784 L 617.768 373.784 L 621.512 361.208 L 654.248 361.208 Z '\r\n\t\t\t\t\t\tfill='rgb(171,171,171)'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=' M 688.821 378.476 L 677.685 416.396 L 677.685 416.396 Q 676.725 419.564 675.093 422.54 L 675.093 422.54 L 675.093 422.54 Q 673.461 425.516 670.869 427.724 L 670.869 427.724 L 670.869 427.724 Q 668.277 429.932 664.533 431.228 L 664.533 431.228 L 664.533 431.228 Q 660.789 432.524 655.797 432.332 L 655.797 432.332 L 655.797 432.332 Q 652.917 432.236 649.845 431.324 L 649.845 431.324 L 649.845 431.324 Q 646.773 430.412 644.613 428.3 L 644.613 428.3 L 644.613 428.3 Q 642.453 426.188 641.685 422.732 L 641.685 422.732 L 641.685 422.732 Q 640.917 419.276 642.453 414.092 L 642.453 414.092 L 654.261 373.868 L 654.261 373.868 Q 656.565 366.188 661.845 363.02 L 661.845 363.02 L 661.845 363.02 Q 667.125 359.852 674.709 359.852 L 674.709 359.852 L 674.709 359.852 Q 684.021 359.852 687.813 364.364 L 687.813 364.364 L 687.813 364.364 Q 691.605 368.876 688.821 378.476 L 688.821 378.476 Z  M 662.901 417.548 L 675.189 375.596 L 675.189 375.596 Q 675.765 373.58 675.333 372.428 L 675.333 372.428 L 675.333 372.428 Q 674.901 371.276 672.693 371.276 L 672.693 371.276 L 672.693 371.276 Q 670.677 371.276 669.717 372.38 L 669.717 372.38 L 669.717 372.38 Q 668.757 373.484 668.277 375.308 L 668.277 375.308 L 655.893 417.164 L 655.893 417.164 Q 654.741 421.1 658.293 421.196 L 658.293 421.196 L 658.293 421.196 Q 660.213 421.292 661.269 420.428 L 661.269 420.428 L 661.269 420.428 Q 662.325 419.564 662.901 417.548 L 662.901 417.548 Z '\r\n\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\tfill='rgb(171,171,171)'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=' M 735.656 361.208 L 726.92 390.872 L 726.92 390.872 Q 725.288 396.248 717.992 396.152 L 717.992 396.152 L 717.992 396.152 Q 721.448 396.344 722.696 398.792 L 722.696 398.792 L 722.696 398.792 Q 723.944 401.24 722.984 404.312 L 722.984 404.312 L 715.112 431 L 700.52 431 L 708.584 403.736 L 708.584 403.736 Q 708.872 402.68 708.632 401.96 L 708.632 401.96 L 708.632 401.96 Q 708.392 401.24 706.76 401.24 L 706.76 401.24 L 704.552 401.24 L 704.552 401.24 Q 702.92 401.24 702.344 401.624 L 702.344 401.624 L 702.344 401.624 Q 701.768 402.008 701.384 403.256 L 701.384 403.256 L 693.128 431 L 678.536 431 L 686.6 403.64 L 686.6 403.64 Q 686.984 402.296 687.608 401 L 687.608 401 L 687.608 401 Q 688.232 399.704 689.192 398.648 L 689.192 398.648 L 689.192 398.648 Q 690.152 397.592 691.688 396.872 L 691.688 396.872 L 691.688 396.872 Q 693.224 396.152 695.528 396.056 L 695.528 396.056 L 695.528 396.056 Q 692.168 396.056 691.112 393.944 L 691.112 393.944 L 691.112 393.944 Q 690.056 391.832 690.92 388.952 L 690.92 388.952 L 699.08 361.208 L 713.672 361.208 L 705.608 388.76 L 705.608 388.76 Q 705.224 390.104 705.8 390.536 L 705.8 390.536 L 705.8 390.536 Q 706.376 390.968 707.528 390.968 L 707.528 390.968 L 710.12 390.968 L 710.12 390.968 Q 711.176 390.968 711.848 390.536 L 711.848 390.536 L 711.848 390.536 Q 712.52 390.104 713 388.472 L 713 388.472 L 721.064 361.208 L 735.656 361.208 Z '\r\n\t\t\t\t\t\tfill='rgb(171,171,171)'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=' M 720.296 431 L 740.84 361.208 L 768.488 361.208 L 768.488 361.208 Q 772.424 361.208 773.864 363.656 L 773.864 363.656 L 773.864 363.656 Q 775.304 366.104 774.44 369.08 L 774.44 369.08 L 758.984 421.592 L 758.984 421.592 Q 758.12 424.664 756.824 426.536 L 756.824 426.536 L 756.824 426.536 Q 755.528 428.408 753.56 429.416 L 753.56 429.416 L 753.56 429.416 Q 751.592 430.424 748.904 430.712 L 748.904 430.712 L 748.904 430.712 Q 746.216 431 742.472 431 L 742.472 431 L 720.296 431 Z  M 756.584 372.44 L 751.976 372.44 L 738.152 419.384 L 742.76 419.384 L 742.76 419.384 Q 744.488 419.384 745.16 418.808 L 745.16 418.808 L 745.16 418.808 Q 745.832 418.232 746.216 416.984 L 746.216 416.984 L 758.408 375.512 L 758.408 375.512 Q 758.888 373.976 758.552 373.208 L 758.552 373.208 L 758.552 373.208 Q 758.216 372.44 756.584 372.44 L 756.584 372.44 Z '\r\n\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\tfill='rgb(171,171,171)'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=' M 608.48 405.752 L 605.408 416.216 L 599.456 416.216 L 595.04 431 L 580.64 431 L 585.056 416.216 L 564.224 416.216 L 568.448 401.528 L 595.52 361.208 L 615.68 361.208 L 602.528 405.752 L 608.48 405.752 Z  M 580.544 405.752 L 588.032 405.752 L 595.424 380.408 L 580.928 404.504 L 580.544 405.752 Z '\r\n\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\tfill='rgb(171,171,171)'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=' M 403.136 361.208 L 382.592 431 L 368.192 431 L 376.832 401.528 L 369.536 401.528 L 360.8 431 L 346.4 431 L 366.944 361.208 L 381.344 361.208 L 373.184 389.144 L 380.48 389.144 L 388.736 361.208 L 403.136 361.208 Z '\r\n\t\t\t\t\t\tfill='rgb(171,171,171)'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=' M 414.944 362.208 L 435.872 362.208 L 435.872 362.208 Q 439.232 362.208 440.816 364.656 L 440.816 364.656 L 440.816 364.656 Q 442.4 367.104 441.536 370.176 L 441.536 370.176 L 425.504 424.608 L 425.504 424.608 Q 424.16 428.928 421.04 430.464 L 421.04 430.464 L 421.04 430.464 Q 417.92 432 414.272 432 L 414.272 432 L 397.088 432 L 397.088 432 Q 395.264 432 393.728 431.376 L 393.728 431.376 L 393.728 431.376 Q 392.192 430.752 391.184 429.504 L 391.184 429.504 L 391.184 429.504 Q 390.176 428.256 389.84 426.48 L 389.84 426.48 L 389.84 426.48 Q 389.504 424.704 390.176 422.496 L 390.176 422.496 L 405.92 369.024 L 405.92 369.024 Q 406.688 365.952 409.04 364.08 L 409.04 364.08 L 409.04 364.08 Q 411.392 362.208 414.944 362.208 L 414.944 362.208 Z  M 424.448 372.44 L 420.8 372.44 L 420.8 372.44 Q 419.744 372.44 419.264 372.92 L 419.264 372.92 L 419.264 372.92 Q 418.784 373.4 418.592 374.168 L 418.592 374.168 L 405.728 417.656 L 405.728 417.656 Q 405.248 419.384 407.072 419.384 L 407.072 419.384 L 410.816 419.384 L 410.816 419.384 Q 412.64 419.384 413.12 417.656 L 413.12 417.656 L 425.888 374.264 L 425.888 374.264 Q 426.368 372.44 424.448 372.44 L 424.448 372.44 Z '\r\n\t\t\t\t\t\tfillRule='evenodd'\r\n\t\t\t\t\t\tfill='rgb(171,171,171)'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=' M 456.032 361.208 L 480.032 361.208 L 476.288 373.784 L 461.312 373.784 L 461.312 373.784 Q 460.16 373.784 459.536 374.168 L 459.536 374.168 L 459.536 374.168 Q 458.912 374.552 458.528 375.896 L 458.528 375.896 L 446.528 416.6 L 446.528 416.6 Q 445.76 419.384 448.736 419.384 L 448.736 419.384 L 453.632 419.384 L 458.912 401.528 L 455.936 401.528 L 459.584 389.144 L 476.288 389.144 L 464.768 428.312 L 448.64 436.472 L 450.176 431 L 441.248 431 L 441.248 431 Q 438.752 431 436.64 430.28 L 436.64 430.28 L 436.64 430.28 Q 434.528 429.56 433.136 427.976 L 433.136 427.976 L 433.136 427.976 Q 431.744 426.392 431.312 423.944 L 431.312 423.944 L 431.312 423.944 Q 430.88 421.496 431.936 418.04 L 431.936 418.04 L 446.72 367.736 L 446.72 367.736 Q 447.872 363.8 450.224 362.504 L 450.224 362.504 L 450.224 362.504 Q 452.576 361.208 456.032 361.208 L 456.032 361.208 Z '\r\n\t\t\t\t\t\tfill='rgb(171,171,171)'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=' M 503.648 361.208 L 503.552 361.208 L 487.328 416.408 L 487.328 416.408 Q 486.848 418.04 487.472 418.664 L 487.472 418.664 L 487.472 418.664 Q 488.096 419.288 489.728 419.288 L 489.728 419.288 L 493.472 419.288 L 510.56 361.208 L 524.96 361.208 L 505.184 428.312 Q 505.17 428.341 504.62 428.413 Q 498.832 431.016 490.112 431 L 481.76 431 L 481.76 431 Q 479.072 431 476.912 430.28 L 476.912 430.28 L 476.912 430.28 Q 474.752 429.56 473.408 427.976 L 473.408 427.976 L 473.408 427.976 Q 472.064 426.392 471.728 423.944 L 471.728 423.944 L 471.728 423.944 Q 471.392 421.496 472.448 418.04 L 472.448 418.04 L 489.152 361.208 L 503.648 361.208 Z '\r\n\t\t\t\t\t\tfill='rgb(171,171,171)'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=' M 509.216 431 L 529.76 361.208 L 542.144 361.208 L 542.624 388.184 L 550.592 361.208 L 564.608 361.208 L 544.064 431 L 532.448 431 L 531.2 403.16 L 522.848 431 L 509.216 431 Z '\r\n\t\t\t\t\t\tfill='rgb(171,171,171)'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=' M 317.72 375.896 L 343.928 375.896 L 343.928 375.896 Q 346.712 375.896 348.872 376.664 L 348.872 376.664 L 348.872 376.664 Q 351.032 377.432 352.328 379.112 L 352.328 379.112 L 352.328 379.112 Q 353.624 380.792 353.864 383.384 L 353.864 383.384 L 353.864 383.384 Q 354.104 385.976 353.048 389.624 L 353.048 389.624 L 343.256 422.936 L 343.256 422.936 Q 342.488 425.528 341.096 427.112 L 341.096 427.112 L 341.096 427.112 Q 339.704 428.696 338.024 429.56 L 338.024 429.56 L 338.024 429.56 Q 336.344 430.424 334.472 430.712 L 334.472 430.712 L 334.472 430.712 Q 332.6 431 330.776 431 L 330.776 431 L 311.864 431 L 311.864 431 Q 307.736 431 305.48 428.024 L 305.48 428.024 L 305.48 428.024 Q 303.224 425.048 304.664 420.248 L 304.664 420.248 L 309.464 403.736 L 324.728 403.736 L 321.08 415.832 L 321.08 415.832 Q 320.696 417.08 321.272 417.416 L 321.272 417.416 L 321.272 417.416 Q 321.848 417.752 322.712 417.752 L 322.712 417.752 L 326.36 417.752 L 326.36 417.752 Q 327.704 417.752 328.376 417.32 L 328.376 417.32 L 328.376 417.32 Q 329.048 416.888 329.432 415.544 L 329.432 415.544 L 337.208 389.24 L 337.208 389.24 Q 337.4 388.664 337.256 388.28 L 337.256 388.28 L 337.256 388.28 Q 337.112 387.896 336.152 387.896 L 336.152 387.896 L 314.168 387.896 L 317.72 375.896 Z '\r\n\t\t\t\t\t\tfill='rgb(171,171,171)'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=' M 333.729 375.977 L 317.697 375.977 L 327.489 341.029 L 327.489 341.029 Q 328.257 338.294 329.505 336.572 L 329.505 336.572 L 329.505 336.572 Q 330.753 334.85 332.337 333.888 L 332.337 333.888 L 332.337 333.888 Q 333.921 332.925 335.745 332.621 L 335.745 332.621 L 335.745 332.621 Q 337.569 332.318 339.393 332.318 L 339.393 332.318 L 369.249 332.318 L 361.281 361.086 L 345.057 364.935 L 350.433 345.79 L 344.385 345.79 L 344.385 345.79 Q 343.041 345.79 342.417 346.246 L 342.417 346.246 L 342.417 346.246 Q 341.793 346.702 341.409 348.12 L 341.409 348.12 L 333.729 375.977 Z '\r\n\t\t\t\t\t\tfill='rgb(171,171,171)'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</g>\r\n\t\t\t</svg>\r\n\t\t\t<div id='logo-subtext'>\r\n\t\t\t\t<span id='logo-subtext-bold'>\r\n\t\t\t\t\t<span>Re</span>\r\n\t\t\t\t\t<span style={{letterSpacing: '-0.15625rem'}}>a</span>\r\n\t\t\t\t\t<span>ct</span>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span style={{marginLeft: '0.5rem'}}>Instrument</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n\tconst renderInputDropdown = () => (\r\n\t\t<MidiInputDropdown handleMidiKeyDown={handleMidiKeyDown} handleMidiKeyUp={handleMidiKeyUp} />\r\n\t);\r\n\r\n\tconst renderGlobalControls = () => (\r\n\t\t<div id='global-controls'>\r\n\t\t\t{renderVolumeControl()}\r\n\t\t\t{renderEnvelopeControls()}\r\n\t\t</div>\r\n\t);\r\n\r\n\tconst renderVolumeControl = () => (\r\n\t\t<div>\r\n\t\t\t<KnobControl {...sharedControlProps} name='volume' value={volume} size='large' />\r\n\t\t</div>\r\n\t);\r\n\r\n\tconst renderEnvelopeControls = () => (\r\n\t\t<div id='envelope-controls'>\r\n\t\t\t<div>\r\n\t\t\t\t<KnobControl {...sharedControlProps} name='attack' value={attack} size='small' />\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<KnobControl {...sharedControlProps} name='decay' value={decay} size='small' />\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<KnobControl {...sharedControlProps} name='sustain' value={sustain} size='small' />\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<KnobControl {...sharedControlProps} name='release' value={release} size='small' />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n\tconst renderModeSelector = () => (\r\n\t\t<div id='mode-selector' className='control-section'>\r\n\t\t\t<div className='control-wrapper vertical'>\r\n\t\t\t\t<div className='controls-container-label'>MODE</div>\r\n\t\t\t\t<div className='controls-container'>\r\n\t\t\t\t\t<ButtonControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='mode'\r\n\t\t\t\t\t\tlabel={'SAMPLER'}\r\n\t\t\t\t\t\tvalue={MODES.SAMPLER}\r\n\t\t\t\t\t\tactive={mode === MODES.SAMPLER}\r\n\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\tlight={true}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ButtonControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='mode'\r\n\t\t\t\t\t\tlabel={'SYNTH'}\r\n\t\t\t\t\t\tvalue={MODES.SYNTH}\r\n\t\t\t\t\t\tactive={mode === MODES.SYNTH}\r\n\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\tlight={true}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n\tconst renderAudioSource = () => (mode === MODES.SAMPLER ? renderSampler() : renderSynth());\r\n\r\n\tconst renderSampler = () => (\r\n\t\t<div id='sampler' className='control-section'>\r\n\t\t\t<div className='control-wrapper vertical'>\r\n\t\t\t\t<div className='controls-container-label'>SAMPLER</div>\r\n\t\t\t\t<div className='controls-container'>\r\n\t\t\t\t\t<div style={{display: 'flex'}}>\r\n\t\t\t\t\t\t{/* <DigitalControl {...props} name='sample' label='select' value={sample} /> */}\r\n\t\t\t\t\t\t<FileInputButtonControl\r\n\t\t\t\t\t\t\thandleClickControl={handleClickControl}\r\n\t\t\t\t\t\t\tname='sample'\r\n\t\t\t\t\t\t\tlabel='load'\r\n\t\t\t\t\t\t\tvalue={'load'}\r\n\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<InputRecorderButtonControl\r\n\t\t\t\t\t\t\thandleClickControl={handleClickControl}\r\n\t\t\t\t\t\t\tlabel='record'\r\n\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t\tlight={true}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Waveform audio={sample} />\r\n\t\t\t\t\t<div className='controls-sub-container'>\r\n\t\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\t\tname='samplePitch'\r\n\t\t\t\t\t\t\tlabel='pitch'\r\n\t\t\t\t\t\t\tvalue={samplePitch}\r\n\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n\tconst renderSynth = () => (\r\n\t\t<>\r\n\t\t\t{renderOscillators()}\r\n\t\t\t{renderModOscillator()}\r\n\t\t</>\r\n\t);\r\n\r\n\tconst renderOscillators = () => (\r\n\t\t<div id='oscillators' className='control-section'>\r\n\t\t\t<div className='control-wrapper horizontal'>\r\n\t\t\t\t<div className='controls-container-label'>OSC 1</div>\r\n\t\t\t\t<div className='controls-container'>\r\n\t\t\t\t\t<DigitalControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='osc1Shape'\r\n\t\t\t\t\t\tlabel='shape'\r\n\t\t\t\t\t\tvalue={osc1Shape}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<DigitalControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='osc1Octave'\r\n\t\t\t\t\t\tlabel='octave'\r\n\t\t\t\t\t\tvalue={osc1Octave}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<DigitalControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='osc1Transpose'\r\n\t\t\t\t\t\tlabel='trans'\r\n\t\t\t\t\t\tvalue={osc1Transpose}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='osc1Detune'\r\n\t\t\t\t\t\tlabel='tune'\r\n\t\t\t\t\t\tvalue={osc1Detune}\r\n\t\t\t\t\t\tsize='medium'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='osc1Gain'\r\n\t\t\t\t\t\tlabel='vol'\r\n\t\t\t\t\t\tvalue={osc1Gain}\r\n\t\t\t\t\t\tsize='medium'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className='control-wrapper horizontal'>\r\n\t\t\t\t<div className='controls-container-label'>OSC 2</div>\r\n\t\t\t\t<div className='controls-container'>\r\n\t\t\t\t\t<DigitalControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='osc2Shape'\r\n\t\t\t\t\t\tlabel='shape'\r\n\t\t\t\t\t\tvalue={osc2Shape}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<DigitalControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='osc2Octave'\r\n\t\t\t\t\t\tlabel='octave'\r\n\t\t\t\t\t\tvalue={osc2Octave}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<DigitalControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='osc2Transpose'\r\n\t\t\t\t\t\tlabel='trans'\r\n\t\t\t\t\t\tvalue={osc2Transpose}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='osc2Detune'\r\n\t\t\t\t\t\tlabel='tune'\r\n\t\t\t\t\t\tvalue={osc2Detune}\r\n\t\t\t\t\t\tsize='medium'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='osc2Gain'\r\n\t\t\t\t\t\tlabel='vol'\r\n\t\t\t\t\t\tvalue={osc2Gain}\r\n\t\t\t\t\t\tsize='medium'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n\tconst renderModOscillator = () => (\r\n\t\t<div id='mod-oscillator' className='control-section'>\r\n\t\t\t<div className='control-wrapper vertical'>\r\n\t\t\t\t<div className='controls-container-label'>MOD OSC</div>\r\n\t\t\t\t<div className='controls-container'>\r\n\t\t\t\t\t<DigitalControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='modOscShape'\r\n\t\t\t\t\t\tlabel='shape'\r\n\t\t\t\t\t\tvalue={modOscShape}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='modOscFreq'\r\n\t\t\t\t\t\tlabel='freq'\r\n\t\t\t\t\t\tvalue={modOscFreq}\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='modOscGain'\r\n\t\t\t\t\t\tlabel='vol'\r\n\t\t\t\t\t\tvalue={modOscGain}\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n\tconst renderFilters = () => (\r\n\t\t<div id='filters' className='control-section'>\r\n\t\t\t<div className='control-wrapper horizontal'>\r\n\t\t\t\t<div className='controls-container-label'>FILTER 1</div>\r\n\t\t\t\t<div className='controls-container'>\r\n\t\t\t\t\t<DigitalControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='filter1Type'\r\n\t\t\t\t\t\tlabel='type'\r\n\t\t\t\t\t\tvalue={filter1Type}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<DigitalControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='filter1Rolloff'\r\n\t\t\t\t\t\tlabel='steep'\r\n\t\t\t\t\t\tvalue={filter1Rolloff}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='filter1Freq'\r\n\t\t\t\t\t\tlabel='cutoff'\r\n\t\t\t\t\t\tvalue={filter1Freq}\r\n\t\t\t\t\t\tsize='medium'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='filter1Q'\r\n\t\t\t\t\t\tlabel='res'\r\n\t\t\t\t\t\tvalue={filter1Q}\r\n\t\t\t\t\t\tsize='medium'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className='control-wrapper horizontal'>\r\n\t\t\t\t<div className='controls-container-label'>FILTER 2</div>\r\n\t\t\t\t<div className='controls-container'>\r\n\t\t\t\t\t<DigitalControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='filter2Type'\r\n\t\t\t\t\t\tlabel='type'\r\n\t\t\t\t\t\tvalue={filter2Type}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<DigitalControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='filter2Rolloff'\r\n\t\t\t\t\t\tlabel='steep'\r\n\t\t\t\t\t\tvalue={filter2Rolloff}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='filter2Freq'\r\n\t\t\t\t\t\tlabel='cutoff'\r\n\t\t\t\t\t\tvalue={filter2Freq}\r\n\t\t\t\t\t\tsize='medium'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='filter2Q'\r\n\t\t\t\t\t\tlabel='res'\r\n\t\t\t\t\t\tvalue={filter2Q}\r\n\t\t\t\t\t\tsize='medium'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n\tconst renderVibrato = () => (\r\n\t\t<div id='vibrato' className='control-section'>\r\n\t\t\t<div className='control-wrapper vertical'>\r\n\t\t\t\t<div className='controls-container-label'>VIBRATO</div>\r\n\t\t\t\t<div className='controls-container'>\r\n\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='vibratoDepth'\r\n\t\t\t\t\t\tlabel='depth'\r\n\t\t\t\t\t\tvalue={vibratoDepth}\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='vibratoFreq'\r\n\t\t\t\t\t\tlabel='freq'\r\n\t\t\t\t\t\tvalue={vibratoFreq}\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='vibratoWet'\r\n\t\t\t\t\t\tlabel='wet'\r\n\t\t\t\t\t\tvalue={vibratoWet}\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n\tconst renderChorus = () => (\r\n\t\t<div id='chorus' className='control-section'>\r\n\t\t\t<div className='control-wrapper vertical'>\r\n\t\t\t\t<div className='controls-container-label'>CHORUS</div>\r\n\t\t\t\t<div className='controls-container'>\r\n\t\t\t\t\t<div className='controls-sub-container'>\r\n\t\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\t\tname='chorusSpread'\r\n\t\t\t\t\t\t\tlabel='spread'\r\n\t\t\t\t\t\t\tvalue={chorusSpread}\r\n\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\t\tname='chorusDepth'\r\n\t\t\t\t\t\t\tlabel='depth'\r\n\t\t\t\t\t\t\tvalue={chorusDepth}\r\n\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='controls-sub-container'>\r\n\t\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\t\tname='chorusDelay'\r\n\t\t\t\t\t\t\tlabel='delay'\r\n\t\t\t\t\t\t\tvalue={chorusDelay}\r\n\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\t\tname='chorusFreq'\r\n\t\t\t\t\t\t\tlabel='freq'\r\n\t\t\t\t\t\t\tvalue={chorusFreq}\r\n\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='controls-sub-container'>\r\n\t\t\t\t\t\t{/* <KnobControl\r\n\t\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\t\tname='chorusType'\r\n\t\t\t\t\t\t\tlabel='type'\r\n\t\t\t\t\t\t\tvalue={chorusType}\r\n\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t/> */}\r\n\t\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\t\tname='chorusWet'\r\n\t\t\t\t\t\t\tlabel='wet'\r\n\t\t\t\t\t\t\tvalue={chorusWet}\r\n\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n\tconst renderBitcrusher = () => (\r\n\t\t<div id='distortion' className='control-section'>\r\n\t\t\t<div className='control-wrapper vertical'>\r\n\t\t\t\t<div className='controls-container-label'>BITCRUSHER</div>\r\n\t\t\t\t<div className='controls-container'>\r\n\t\t\t\t\t<DigitalControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='crusherBits'\r\n\t\t\t\t\t\tlabel='bits'\r\n\t\t\t\t\t\tvalue={crusherBits}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='crusherWet'\r\n\t\t\t\t\t\tlabel='wet'\r\n\t\t\t\t\t\tvalue={crusherWet}\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n\tconst renderDistortion = () => (\r\n\t\t<div id='distortion' className='control-section'>\r\n\t\t\t<div className='control-wrapper vertical'>\r\n\t\t\t\t<div className='controls-container-label'>DISTORTION</div>\r\n\t\t\t\t<div className='controls-container'>\r\n\t\t\t\t\t{/* <DigitalControl {...sharedControlProps} name='distOver' label='over' value={distOver} /> */}\r\n\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='distAmount'\r\n\t\t\t\t\t\tlabel='amount'\r\n\t\t\t\t\t\tvalue={distAmount}\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='distWet'\r\n\t\t\t\t\t\tlabel='wet'\r\n\t\t\t\t\t\tvalue={distWet}\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n\tconst renderPitcher = () => (\r\n\t\t<div id='pitcher' className='control-section'>\r\n\t\t\t<div className='control-wrapper vertical'>\r\n\t\t\t\t<div className='controls-container-label'>PITCHER</div>\r\n\t\t\t\t<div className='controls-container'>\r\n\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='pitcherPitch'\r\n\t\t\t\t\t\tlabel='pitch'\r\n\t\t\t\t\t\tvalue={pitcherPitch}\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='pitcherWindow'\r\n\t\t\t\t\t\tlabel='slice'\r\n\t\t\t\t\t\tvalue={pitcherWindow}\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='pitcherWet'\r\n\t\t\t\t\t\tlabel='wet'\r\n\t\t\t\t\t\tvalue={pitcherWet}\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n\tconst renderReverb = () => (\r\n\t\t<div id='reverb' className='control-section'>\r\n\t\t\t<div className='control-wrapper vertical'>\r\n\t\t\t\t<div className='controls-container-label'>REVERB</div>\r\n\t\t\t\t<div className='controls-container'>\r\n\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='reverbSize'\r\n\t\t\t\t\t\tlabel='size'\r\n\t\t\t\t\t\tvalue={reverbSize}\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='reverbDampening'\r\n\t\t\t\t\t\tlabel='damp'\r\n\t\t\t\t\t\tvalue={reverbDampening}\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<KnobControl\r\n\t\t\t\t\t\t{...sharedControlProps}\r\n\t\t\t\t\t\tname='reverbWet'\r\n\t\t\t\t\t\tlabel='wet'\r\n\t\t\t\t\t\tvalue={reverbWet}\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n\tconst renderPianoKeys = () => (\r\n\t\t<PianoKeys\r\n\t\t\tactiveKeys={activeKeys}\r\n\t\t\toctaves={octaves}\r\n\t\t\thandleMouseDownPianoKey={handleMouseDownPianoKey}\r\n\t\t\thandleMouseUpPianoKey={handleMouseUpPianoKey}\r\n\t\t\thandleMouseOverPianoKey={handleMouseOverPianoKey}\r\n\t\t\thandleMouseLeavePianoKey={handleMouseLeavePianoKey}\r\n\t\t/>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div id='instr'>\r\n\t\t\t<div id='instr-left'>{renderLeftControls()}</div>\r\n\t\t\t<div id='instr-right'>\r\n\t\t\t\t<div id='instr-right-top'>\r\n\t\t\t\t\t<div id='instr-right-top-left'>{renderGlobalSection()}</div>\r\n\t\t\t\t\t<div id='instr-right-top-right'>\r\n\t\t\t\t\t\t{renderModeSelector()}\r\n\t\t\t\t\t\t{renderAudioSource()}\r\n\t\t\t\t\t\t{renderFilters()}\r\n\t\t\t\t\t\t{renderVibrato()}\r\n\t\t\t\t\t\t{renderChorus()}\r\n\t\t\t\t\t\t{/* {renderBitcrusher()} */}\r\n\t\t\t\t\t\t{renderDistortion()}\r\n\t\t\t\t\t\t{renderPitcher()}\r\n\t\t\t\t\t\t{renderReverb()}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id='instr-right-bottom'>{renderPianoKeys()}</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Instrument;\r\n","import {\r\n\tBitCrusher,\r\n\tBuffer,\r\n\tChorus,\r\n\tDistortion,\r\n\tFilter,\r\n\tFreeverb,\r\n\tFMSynth,\r\n\tMaster,\r\n\tPitchShift,\r\n\tPolySynth,\r\n\tSampler,\r\n\tVibrato,\r\n} from 'tone';\r\nimport {\r\n\tCONTROLS_NAMES,\r\n\tFILTER_ROLLOFFS,\r\n\tFILTER_TYPES,\r\n\tMODES,\r\n\tOSC_SHAPES,\r\n\tOVERSAMPLE_TYPES,\r\n\tSAMPLES,\r\n} from '../statics';\r\nimport {\r\n\tgetDecibelsFromValue,\r\n\tgetFrequencyFromValue,\r\n\tgetHarmonicityFromValue,\r\n\tgetNoteFromValues,\r\n\tgetSecondsFromValue,\r\n} from '../utils';\r\n\r\nexport default class Output {\r\n\tconstructor(\r\n\t\tapp,\r\n\t\taudioContext,\r\n\t\tlayout,\r\n\t\tvolume,\r\n\t\tpolyphony,\r\n\t\tportamento,\r\n\t\tattack,\r\n\t\tdecay,\r\n\t\tsustain,\r\n\t\trelease,\r\n\t\tmode,\r\n\t\tsample,\r\n\t\tsamplePitch,\r\n\t\tosc1Shape,\r\n\t\tosc1Octave,\r\n\t\tosc1Transpose,\r\n\t\tosc1Detune,\r\n\t\tosc1Gain,\r\n\t\tosc2Shape,\r\n\t\tosc2Octave,\r\n\t\tosc2Transpose,\r\n\t\tosc2Detune,\r\n\t\tosc2Gain,\r\n\t\tmodOscShape,\r\n\t\tmodOscGain,\r\n\t\tmodOscFreq,\r\n\t\tfilter1Type,\r\n\t\tfilter1Rolloff,\r\n\t\tfilter1Freq,\r\n\t\tfilter1Q,\r\n\t\tfilter2Type,\r\n\t\tfilter2Rolloff,\r\n\t\tfilter2Freq,\r\n\t\tfilter2Q,\r\n\t\tvibratoDepth,\r\n\t\tvibratoFreq,\r\n\t\tvibratoWet,\r\n\t\tchorusSpread,\r\n\t\tchorusDepth,\r\n\t\tchorusDelay,\r\n\t\tchorusFreq,\r\n\t\tchorusType,\r\n\t\tchorusWet,\r\n\t\tcrusherBits,\r\n\t\tcrusherWet,\r\n\t\tdistOver,\r\n\t\tdistAmount,\r\n\t\tdistWet,\r\n\t\tpitcherPitch,\r\n\t\tpitcherWindow,\r\n\t\tpitcherWet,\r\n\t\treverbSize,\r\n\t\treverbDampening,\r\n\t\treverbWet\r\n\t) {\r\n\t\tthis._active = false;\r\n\t\tthis._app = app;\r\n\t\tthis._audioContext = audioContext;\r\n\r\n\t\tCONTROLS_NAMES.forEach((n, i) => (this[`_${n}`] = arguments[i + 2]));\r\n\r\n\t\tthis.initializeMaster();\r\n\t\tthis.initializeReverb();\r\n\t\tthis.initializePitcher();\r\n\t\tthis.initializeDistortion();\r\n\t\t// this.initializeBitcrusher();\r\n\t\tthis.initializeChorus();\r\n\t\tthis.initializeVibrato();\r\n\t\tthis.initializeFilters();\r\n\t\tthis.initializeSampler();\r\n\t\tthis.initializeOscillators();\r\n\t\tthis.initializeValues();\r\n\t}\r\n\r\n\tinitializeMaster = () => {\r\n\t\tthis.master = Master;\r\n\t};\r\n\r\n\tinitializeReverb = () => {\r\n\t\tthis.reverb = new Freeverb();\r\n\t\tthis.reverb.connect(this.master);\r\n\t};\r\n\r\n\tinitializePitcher = () => {\r\n\t\tthis.pitcher = new PitchShift();\r\n\t\tthis.pitcher.connect(this.reverb);\r\n\t};\r\n\r\n\tinitializeDistortion = () => {\r\n\t\tthis.distortion = new Distortion();\r\n\t\tthis.distortion.connect(this.pitcher);\r\n\t};\r\n\r\n\tinitializeBitcrusher = () => {\r\n\t\tthis.bitcrusher = new BitCrusher();\r\n\t\tthis.bitcrusher.connect(this.distortion);\r\n\t};\r\n\r\n\tinitializeChorus = () => {\r\n\t\tthis.chorus = new Chorus();\r\n\t\tthis.chorus.connect(this.distortion);\r\n\t};\r\n\r\n\tinitializeVibrato = () => {\r\n\t\tthis.vibrato = new Vibrato();\r\n\t\tthis.vibrato.connect(this.chorus);\r\n\t};\r\n\r\n\tinitializeFilters = () => {\r\n\t\tthis.filter1 = new Filter(0, 'lowpass', -12);\r\n\t\tthis.filter2 = new Filter(0, 'lowpass', -12);\r\n\t\tthis.filter1.connect(this.filter2);\r\n\t\tthis.filter2.connect(this.vibrato);\r\n\t};\r\n\r\n\tinitializeSampler = () => {\r\n\t\tthis.sampler = new Sampler(\r\n\t\t\t{\r\n\t\t\t\tC5: SAMPLES[0],\r\n\t\t\t},\r\n\t\t\t(e) => console.log('sampler buffers loaded: ', e)\r\n\t\t\t// './src/assets/audio/samples/'\r\n\t\t);\r\n\t\tthis.sampler.connect(this.filter1);\r\n\t};\r\n\r\n\tinitializeOscillators = () => {\r\n\t\tthis.osc1 = new PolySynth(this.polyphony, FMSynth);\r\n\t\tthis.osc2 = new PolySynth(this.polyphony, FMSynth);\r\n\t\tthis.oscillators = [this.osc1, this.osc2];\r\n\t\tthis.oscillators.forEach((o) => {\r\n\t\t\to.connect(this.filter1);\r\n\t\t});\r\n\t};\r\n\r\n\tinitializeValues = () => {\r\n\t\tCONTROLS_NAMES.forEach((n) => {\r\n\t\t\tif (n !== 'polyphony') {\r\n\t\t\t\tthis[n] = this[`_${n}`];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.envelope = 'set';\r\n\t\tthis.freqs = [];\r\n\t};\r\n\r\n\tplayKey = (freq) => {\r\n\t\t// console.log('playKey', freq);\r\n\r\n\t\tthis.playKeys([freq]);\r\n\t};\r\n\r\n\tplayKeys = (freqs = []) => {\r\n\t\t// console.log('playKey', freqs);\r\n\r\n\t\tfreqs.forEach((freq) => {\r\n\t\t\tthis.freqs.push(freq);\r\n\r\n\t\t\tif (this.mode === MODES.SYNTH) {\r\n\t\t\t\tconst activeOsc1Freq = getNoteFromValues(freq, this._osc1Octave, this._osc1Transpose);\r\n\t\t\t\tconst activeOsc2Freq = getNoteFromValues(freq, this._osc2Octave, this._osc2Transpose);\r\n\t\t\t\tthis.osc1.triggerAttack(activeOsc1Freq, this._audioContext.now(), 1);\r\n\t\t\t\tthis.osc2.triggerAttack(activeOsc2Freq, this._audioContext.now(), 1);\r\n\t\t\t} else if (this.mode === MODES.SAMPLER && this.sampler.loaded) {\r\n\t\t\t\tthis.sampler.triggerAttack(\r\n\t\t\t\t\tgetNoteFromValues(freq, 6, this.samplePitch),\r\n\t\t\t\t\tthis._audioContext.now(),\r\n\t\t\t\t\t1\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tstopKey = (freq) => {\r\n\t\t// console.log('stopKey', freq);\r\n\r\n\t\tthis.freqs.splice(this.freqs.indexOf(freq), 1);\r\n\r\n\t\tif (this.mode === MODES.SYNTH) {\r\n\t\t\tconst activeOsc1Freq = getNoteFromValues(freq, this._osc1Octave, this._osc1Transpose);\r\n\t\t\tconst activeOsc2Freq = getNoteFromValues(freq, this._osc2Octave, this._osc2Transpose);\r\n\t\t\tthis.osc1.triggerRelease(activeOsc1Freq, this._audioContext.now());\r\n\t\t\tthis.osc2.triggerRelease(activeOsc2Freq, this._audioContext.now());\r\n\t\t} else if (this.mode === MODES.SAMPLER) {\r\n\t\t\tthis.sampler.triggerRelease(\r\n\t\t\t\tgetNoteFromValues(freq, 6, this.samplePitch),\r\n\t\t\t\tthis._audioContext.now()\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\tstopKeys = () => {\r\n\t\t// console.log('stopKeys');\r\n\r\n\t\tthis.osc1.releaseAll();\r\n\t\tthis.osc2.releaseAll();\r\n\t\tthis.sampler.releaseAll();\r\n\t\tthis.freqs = [];\r\n\t};\r\n\r\n\tretriggerKeys = () => {\r\n\t\t// console.log('retriggerKeys');\r\n\r\n\t\tthis.stoppedFreqs = this.freqs;\r\n\t\tthis.stopKeys();\r\n\t\tthis.playKeys(this.stoppedFreqs);\r\n\t};\r\n\r\n\thasPortamento = () => this.portamento !== 0;\r\n\r\n\t// GLOBAL\r\n\r\n\tget volume() {\r\n\t\treturn getDecibelsFromValue(this._volume);\r\n\t}\r\n\tset volume(x) {\r\n\t\tthis._volume = x;\r\n\t\tthis.master.volume.value = this.volume;\r\n\t}\r\n\r\n\tget polyphony() {\r\n\t\treturn this._polyphony;\r\n\t}\r\n\tset polyphony(x) {\r\n\t\tthis._polyphony = x;\r\n\t\tthis.initializeOscillators();\r\n\t\tthis.initializeValues();\r\n\t}\r\n\r\n\tget portamento() {\r\n\t\treturn this._portamento / 500;\r\n\t}\r\n\tset portamento(x) {\r\n\t\tthis._portamento = x;\r\n\t\tthis.oscillators.forEach((o) => o.set('portamento', this.portamento));\r\n\t}\r\n\r\n\tget envelope() {\r\n\t\treturn {\r\n\t\t\tattackCurve: 'exponential',\r\n\t\t\tdecayCurve: 'exponential',\r\n\t\t\treleaseCurve: 'exponential',\r\n\t\t\tattack: this.attack,\r\n\t\t\tdecay: this.decay,\r\n\t\t\tsustain: this.sustain,\r\n\t\t\trelease: this.release,\r\n\t\t};\r\n\t}\r\n\tset envelope(x = null) {\r\n\t\tthis.oscillators.forEach((o) =>\r\n\t\t\to.set({\r\n\t\t\t\tenvelope: this.envelope,\r\n\t\t\t\tmodulationEnvelope: this.envelope,\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tget attack() {\r\n\t\treturn getSecondsFromValue(this._attack);\r\n\t}\r\n\tset attack(x) {\r\n\t\tthis._attack = x;\r\n\r\n\t\tthis.oscillators.forEach((o) => o.set({envelope: {attack: this.attack}}));\r\n\t\tthis.sampler.attack = this.attack;\r\n\t}\r\n\r\n\tget decay() {\r\n\t\treturn getSecondsFromValue(this._decay);\r\n\t}\r\n\tset decay(x) {\r\n\t\tthis._decay = x;\r\n\r\n\t\tthis.oscillators.forEach((o) => o.set({envelope: {decay: this.decay}}));\r\n\t\tthis.sampler.decay = this.decay;\r\n\t}\r\n\r\n\tget sustain() {\r\n\t\treturn this._sustain / 100;\r\n\t}\r\n\tset sustain(x) {\r\n\t\tthis._sustain = x;\r\n\r\n\t\tthis.oscillators.forEach((o) => o.set({envelope: {sustain: this.sustain}}));\r\n\t\tthis.sampler.sustain = this.sustain;\r\n\t}\r\n\r\n\tget release() {\r\n\t\treturn getSecondsFromValue(this._release);\r\n\t}\r\n\tset release(x) {\r\n\t\tthis._release = x;\r\n\t\tthis.oscillators.forEach((o) => o.set({envelope: {release: this.release}}));\r\n\t\tthis.sampler.release = this.release;\r\n\t}\r\n\r\n\tget mode() {\r\n\t\treturn this._mode;\r\n\t}\r\n\tset mode(x) {\r\n\t\tthis._mode = x;\r\n\t\tthis.stopKeys();\r\n\t}\r\n\r\n\t// SAMPLER\r\n\r\n\tget sample() {\r\n\t\treturn SAMPLES[this._sample] || this._sample;\r\n\t}\r\n\tset sample(x) {\r\n\t\tthis._sample = x;\r\n\r\n\t\tthis._app.setState({\r\n\t\t\tsampleLoaded: false,\r\n\t\t\tsampleLoading: true,\r\n\t\t});\r\n\r\n\t\tconst sampleBuffer = new Buffer(\r\n\t\t\tthis.sample,\r\n\t\t\t() => {\r\n\t\t\t\tconsole.log('buffer loaded');\r\n\t\t\t\tthis.sampler.add('C5', sampleBuffer, () => {\r\n\t\t\t\t\tconsole.log('sample loaded');\r\n\t\t\t\t\tthis._app.setState({\r\n\t\t\t\t\t\tsampleLoaded: true,\r\n\t\t\t\t\t\tsampleLoading: false,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t(e) => {\r\n\t\t\t\tconsole.log('error loading sample: ', e);\r\n\t\t\t\tthis._app.setState({\r\n\t\t\t\t\tsampleLoaded: false,\r\n\t\t\t\t\tsampleLoading: false,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tget samplePitch() {\r\n\t\treturn this._samplePitch;\r\n\t}\r\n\tset samplePitch(x) {\r\n\t\tthis._samplePitch = x;\r\n\t\tthis.retriggerKeys();\r\n\t}\r\n\r\n\t// OSC\r\n\r\n\tget osc1Shape() {\r\n\t\treturn OSC_SHAPES[this._osc1Shape];\r\n\t}\r\n\tset osc1Shape(x) {\r\n\t\tthis._osc1Shape = x;\r\n\t\tthis.osc1.set({oscillator: {type: this.osc1Shape}});\r\n\t}\r\n\r\n\tget osc2Shape() {\r\n\t\treturn OSC_SHAPES[this._osc2Shape];\r\n\t}\r\n\tset osc2Shape(x) {\r\n\t\tthis._osc2Shape = x;\r\n\t\tthis.osc2.set({oscillator: {type: this.osc2Shape}});\r\n\t}\r\n\r\n\tget osc1Octave() {\r\n\t\treturn this._osc1Octave;\r\n\t}\r\n\tset osc1Octave(x) {\r\n\t\tthis._osc1Octave = x;\r\n\t\tthis.retriggerKeys();\r\n\t}\r\n\r\n\tget osc2Octave() {\r\n\t\treturn this._osc2Octave;\r\n\t}\r\n\tset osc2Octave(x) {\r\n\t\tthis._osc2Octave = x;\r\n\t\tthis.retriggerKeys();\r\n\t}\r\n\r\n\tget osc1Transpose() {\r\n\t\treturn this._osc1Transpose;\r\n\t}\r\n\tset osc1Transpose(x) {\r\n\t\tthis._osc1Transpose = x;\r\n\t\tthis.retriggerKeys();\r\n\t}\r\n\r\n\tget osc2Transpose() {\r\n\t\treturn this._osc2Transpose;\r\n\t}\r\n\tset osc2Transpose(x) {\r\n\t\tthis._osc2Transpose = x;\r\n\t\tthis.retriggerKeys();\r\n\t}\r\n\r\n\tget osc1Detune() {\r\n\t\treturn this._osc1Detune;\r\n\t}\r\n\tset osc1Detune(x) {\r\n\t\tthis._osc1Detune = x;\r\n\t\tthis.osc1.set('detune', this.osc1Detune);\r\n\t}\r\n\r\n\tget osc2Detune() {\r\n\t\treturn this._osc2Detune;\r\n\t}\r\n\tset osc2Detune(x) {\r\n\t\tthis._osc2Detune = x;\r\n\t\tthis.osc2.set('detune', this.osc2Detune);\r\n\t}\r\n\r\n\tget osc1Gain() {\r\n\t\treturn getDecibelsFromValue(this._osc1Gain);\r\n\t}\r\n\tset osc1Gain(x) {\r\n\t\tthis._osc1Gain = x;\r\n\t\tthis.osc1.set('volume', this.osc1Gain);\r\n\t}\r\n\tget osc2Gain() {\r\n\t\treturn getDecibelsFromValue(this._osc2Gain);\r\n\t}\r\n\tset osc2Gain(x) {\r\n\t\tthis._osc2Gain = x;\r\n\t\tthis.osc2.set('volume', this.osc2Gain);\r\n\t}\r\n\r\n\t// MOD OSC\r\n\r\n\tget modOscShape() {\r\n\t\treturn OSC_SHAPES[this._modOscShape];\r\n\t}\r\n\tset modOscShape(x) {\r\n\t\tthis._modOscShape = x;\r\n\t\tthis.oscillators.forEach((o) => o.set({modulation: {type: this.modOscShape}}));\r\n\t}\r\n\r\n\tget modOscFreq() {\r\n\t\treturn getHarmonicityFromValue(this._modOscFreq);\r\n\t}\r\n\tset modOscFreq(x) {\r\n\t\tthis._modOscFreq = x;\r\n\t\tthis.oscillators.forEach((o) => o.set({harmonicity: this.modOscFreq}));\r\n\t}\r\n\r\n\tget modOscGain() {\r\n\t\treturn this._modOscGain;\r\n\t}\r\n\tset modOscGain(x) {\r\n\t\tthis._modOscGain = x;\r\n\t\tthis.oscillators.forEach((o) => o.set({modulationIndex: this.modOscGain}));\r\n\t}\r\n\r\n\t// FILTER\r\n\r\n\tget filter1Type() {\r\n\t\treturn FILTER_TYPES[this._filter1Type];\r\n\t}\r\n\tset filter1Type(x) {\r\n\t\tthis._filter1Type = x;\r\n\t\tthis.filter1.type = this.filter1Type;\r\n\t}\r\n\r\n\tget filter2Type() {\r\n\t\treturn FILTER_TYPES[this._filter2Type];\r\n\t}\r\n\tset filter2Type(x) {\r\n\t\tthis._filter2Type = x;\r\n\t\tthis.filter2.type = this.filter2Type;\r\n\t}\r\n\r\n\tget filter1Rolloff() {\r\n\t\treturn FILTER_ROLLOFFS[this._filter1Rolloff];\r\n\t}\r\n\tset filter1Rolloff(x) {\r\n\t\tthis._filter1Rolloff = x;\r\n\t\tthis.filter1.rolloff = this.filter1Rolloff;\r\n\t}\r\n\r\n\tget filter2Rolloff() {\r\n\t\treturn FILTER_ROLLOFFS[this._filter2Rolloff];\r\n\t}\r\n\tset filter2Rolloff(x) {\r\n\t\tthis._filter2Rolloff = x;\r\n\t\tthis.filter2.rolloff = this.filter2Rolloff;\r\n\t}\r\n\r\n\tget filter1Freq() {\r\n\t\treturn getFrequencyFromValue(this._filter1Freq);\r\n\t}\r\n\tset filter1Freq(x) {\r\n\t\tthis._filter1Freq = x;\r\n\t\tthis.filter1.frequency.value = this.filter1Freq;\r\n\t}\r\n\r\n\tget filter2Freq() {\r\n\t\treturn getFrequencyFromValue(this._filter2Freq);\r\n\t}\r\n\tset filter2Freq(x) {\r\n\t\tthis._filter2Freq = x;\r\n\t\tthis.filter2.frequency.value = this.filter2Freq;\r\n\t}\r\n\r\n\tget filter1Q() {\r\n\t\treturn Math.pow(this._filter1Q, 2) / 250;\r\n\t}\r\n\tset filter1Q(x) {\r\n\t\tthis._filter1Q = x;\r\n\t\tthis.filter1.Q.value = this.filter1Q;\r\n\t}\r\n\r\n\tget filter2Q() {\r\n\t\treturn Math.pow(this._filter2Q, 2) / 250;\r\n\t}\r\n\tset filter2Q(x) {\r\n\t\tthis._filter2Q = x;\r\n\t\tthis.filter2.Q.value = this.filter2Q;\r\n\t}\r\n\r\n\t// VIBRATO\r\n\r\n\tget vibratoDepth() {\r\n\t\treturn this._vibratoDepth / 100;\r\n\t}\r\n\tset vibratoDepth(x) {\r\n\t\tthis._vibratoDepth = x;\r\n\t\tthis.vibrato.depth.value = this.vibratoDepth;\r\n\t}\r\n\r\n\tget vibratoFreq() {\r\n\t\treturn this._vibratoFreq / 10;\r\n\t}\r\n\tset vibratoFreq(x) {\r\n\t\tthis._vibratoFreq = x;\r\n\t\tthis.vibrato.frequency.value = this.vibratoFreq;\r\n\t}\r\n\r\n\tget vibratoWet() {\r\n\t\treturn this._vibratoWet / 100;\r\n\t}\r\n\tset vibratoWet(x) {\r\n\t\tthis._vibratoWet = x;\r\n\t\tthis.vibrato.wet.value = this.vibratoWet;\r\n\t}\r\n\r\n\t// CHORUS\r\n\r\n\tget chorusSpread() {\r\n\t\treturn this._chorusSpread;\r\n\t}\r\n\tset chorusSpread(x) {\r\n\t\tthis._chorusSpread = x;\r\n\t\tthis.chorus.spread = this.chorusSpread;\r\n\t}\r\n\r\n\tget chorusDepth() {\r\n\t\treturn this._chorusDepth / 100;\r\n\t}\r\n\tset chorusDepth(x) {\r\n\t\tthis._chorusDepth = x;\r\n\t\tthis.chorus.depth = this.chorusDepth;\r\n\t}\r\n\r\n\tget chorusDelay() {\r\n\t\treturn this._chorusDelay;\r\n\t}\r\n\tset chorusDelay(x) {\r\n\t\tthis._chorusDelay = x;\r\n\t\tthis.chorus.delay = this.chorusDelay;\r\n\t}\r\n\r\n\tget chorusFreq() {\r\n\t\treturn getSecondsFromValue(this._chorusFreq);\r\n\t}\r\n\tset chorusFreq(x) {\r\n\t\tthis._chorusFreq = x;\r\n\t\tthis.chorus.frequency.value = this.chorusFreq;\r\n\t}\r\n\r\n\tget chorusType() {\r\n\t\treturn OSC_SHAPES[this._chorusType];\r\n\t}\r\n\tset chorusType(x) {\r\n\t\tthis._chorusType = x;\r\n\t\tthis.chorus.type = this.chorusType;\r\n\t}\r\n\r\n\tget chorusWet() {\r\n\t\treturn this._chorusWet / 100;\r\n\t}\r\n\tset chorusWet(x) {\r\n\t\tthis._chorusWet = x;\r\n\t\tthis.chorus.wet.value = this.chorusWet;\r\n\t}\r\n\r\n\t// BITCRUSHER\r\n\r\n\t// get crusherBits() {\r\n\t// \treturn this._crusherBits;\r\n\t// }\r\n\t// set crusherBits(x) {\r\n\t// \tthis._crusherBits = x;\r\n\t// \tthis.bitcrusher.bits = this.crusherBits;\r\n\t// }\r\n\r\n\t// get crusherWet() {\r\n\t// \treturn this._crusherWet / 100;\r\n\t// }\r\n\t// set crusherWet(x) {\r\n\t// \tthis._crusherWet = x;\r\n\t// \tthis.bitcrusher.wet.value = this.crusherWet;\r\n\t// }\r\n\r\n\t// DISTORTION\r\n\r\n\tget distOver() {\r\n\t\treturn OVERSAMPLE_TYPES[this._distOver];\r\n\t}\r\n\tset distOver(x) {\r\n\t\tthis._distOver = x;\r\n\t\tthis.distortion.oversample = this.distOver;\r\n\t}\r\n\r\n\tget distAmount() {\r\n\t\treturn this._distAmount / 100;\r\n\t}\r\n\tset distAmount(x) {\r\n\t\tthis._distAmount = x;\r\n\t\tthis.distortion.distortion = this.distAmount;\r\n\t}\r\n\r\n\tget distWet() {\r\n\t\treturn this._distWet / 100;\r\n\t}\r\n\tset distWet(x) {\r\n\t\tthis._distWet = x;\r\n\t\tthis.distortion.wet.value = this.distWet;\r\n\t}\r\n\r\n\t// PITCHER\r\n\r\n\tget pitcherPitch() {\r\n\t\treturn this._pitcherPitch;\r\n\t}\r\n\tset pitcherPitch(x) {\r\n\t\tthis._pitcherPitch = x;\r\n\t\tthis.pitcher.pitch = this.pitcherPitch;\r\n\t}\r\n\r\n\tget pitcherWindow() {\r\n\t\treturn this._pitcherWindow / 1000;\r\n\t}\r\n\tset pitcherWindow(x) {\r\n\t\tthis._pitcherWindow = x;\r\n\t\tthis.pitcher.windowSize = this.pitcherWindow;\r\n\t}\r\n\r\n\tget pitcherWet() {\r\n\t\treturn this._pitcherWet / 100;\r\n\t}\r\n\tset pitcherWet(x) {\r\n\t\tthis._pitcherWet = x;\r\n\t\tthis.pitcher.wet.value = this.pitcherWet;\r\n\t}\r\n\r\n\t// REVERB\r\n\r\n\tget reverbSize() {\r\n\t\treturn this._reverbSize / 100;\r\n\t}\r\n\tset reverbSize(x) {\r\n\t\tthis._reverbSize = x;\r\n\t\tthis.reverb.roomSize.value = this.reverbSize;\r\n\t}\r\n\r\n\tget reverbDampening() {\r\n\t\treturn getFrequencyFromValue(this._reverbDampening);\r\n\t}\r\n\tset reverbDampening(x) {\r\n\t\tthis._reverbDampening = x;\r\n\t\tthis.reverb.dampening.value = this.reverbDampening;\r\n\t}\r\n\r\n\tget reverbWet() {\r\n\t\treturn this._reverbWet / 100;\r\n\t}\r\n\tset reverbWet(x) {\r\n\t\tthis._reverbWet = x;\r\n\t\tthis.reverb.wet.value = this.reverbWet;\r\n\t}\r\n\r\n\tset = (control, value) => {\r\n\t\tconsole.log(`setting ${control} to ${value}`);\r\n\r\n\t\tthis[control] = value;\r\n\t};\r\n}\r\n","import React, {Component} from 'react';\r\nimport {Context} from 'tone';\r\nimport {\r\n\tCONTROL_TYPES,\r\n\tCONTROLS,\r\n\tCONTROLS_NAMES,\r\n\tCONTROLS_DEFAULT_VALUES,\r\n\tKEYS_MAP,\r\n\tLAYOUTS,\r\n\tMODIFIER_KEYS,\r\n} from './js/statics';\r\nimport {getValueFromRange} from './js/utils';\r\nimport Instrument from './components/Instrument';\r\nimport Output from './js/classes/Output';\r\n\r\nclass App extends Component {\r\n\t/** LIFECYCLE */\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\toctaves: 6,\r\n\t\t\tactiveKeys: [],\r\n\t\t\tactiveControl: null,\r\n\t\t\tactiveControlType: null,\r\n\t\t\tactiveScreenY: null,\r\n\t\t\tactiveModifierKey: false,\r\n\t\t\taudioContextStarted: false,\r\n\t\t\t...CONTROLS_DEFAULT_VALUES,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount = () => {\r\n\t\tthis.initializeSoundEngine();\r\n\t\tthis.registerEventListeners();\r\n\t};\r\n\r\n\tcomponentWillUnmount = () => {};\r\n\r\n\t/** INIT */\r\n\r\n\tregisterEventListeners = () => {\r\n\t\t// console.log(\"registerEvents\");\r\n\r\n\t\twindow.addEventListener('beforeunload', (e) => this.terminateSoundEngine);\r\n\r\n\t\tdocument.addEventListener('keydown', this.handleKeyDown);\r\n\t\tdocument.addEventListener('keyup', this.handleKeyUp);\r\n\r\n\t\tdocument.addEventListener('mousedown', this.handleMouseDown);\r\n\t\tdocument.addEventListener('mouseup', this.handleMouseUp);\r\n\t\tdocument.addEventListener('mouseleave', this.handleMouseLeave);\r\n\t\tdocument.addEventListener('mouseout', this.handleMouseOut);\r\n\r\n\t\tdocument.addEventListener('drag', (e) => e.preventDefault());\r\n\t\tdocument.addEventListener('dragend', (e) => e.preventDefault());\r\n\t\tdocument.addEventListener('dragenter', (e) => e.preventDefault());\r\n\t\tdocument.addEventListener('dragexit', (e) => e.preventDefault());\r\n\t\tdocument.addEventListener('dragleave', (e) => e.preventDefault());\r\n\t\tdocument.addEventListener('dragover', (e) => e.preventDefault());\r\n\t\tdocument.addEventListener('dragstart', (e) => e.preventDefault());\r\n\t\tdocument.addEventListener('drop', (e) => e.preventDefault());\r\n\t};\r\n\r\n\tinitializeSoundEngine = () => {\r\n\t\t// console.log('initializeSoundEngine');\r\n\r\n\t\tthis.audioContext = new Context();\r\n\t\t// this.audioContext.latencyHint = 'fastest';\r\n\t\tthis.setOutputFromState();\r\n\t};\r\n\r\n\tterminateSoundEngine = () => {\r\n\t\tthis.audioContext && this.audioContext.dispose();\r\n\t};\r\n\r\n\tsetOutputFromState = () => {\r\n\t\t// console.log(\"setOutputFromState\");\r\n\r\n\t\tconst controlsState = CONTROLS_NAMES.map((n) => this.state[n]);\r\n\t\tthis.output = new Output(this, this.audioContext, ...controlsState);\r\n\t};\r\n\r\n\tresumeAudioContext = () => {\r\n\t\t// console.log('resumeAudioContext');\r\n\r\n\t\tif (!this.state.audioContextStarted) {\r\n\t\t\tthis.audioContext.resume();\r\n\t\t\tthis.setState({audioContextStarted: true});\r\n\t\t}\r\n\t};\r\n\r\n\t/** GLOBAL EVENT HANDLERS */\r\n\r\n\thandleKeyDown = (e) => {\r\n\t\t// console.log('handleKeyDown', e);\r\n\r\n\t\te.preventDefault();\r\n\t\tconst keyPressed = e.key.toLowerCase();\r\n\t\tconst pianoKey = LAYOUTS[this.state.layout][keyPressed];\r\n\r\n\t\tif (pianoKey) {\r\n\t\t\tthis.activatePianoKey(pianoKey);\r\n\t\t} else if (MODIFIER_KEYS.includes(keyPressed)) {\r\n\t\t\tthis.setState({activeModifierKey: true});\r\n\t\t}\r\n\r\n\t\tthis.resumeAudioContext();\r\n\t};\r\n\r\n\thandleKeyUp = (e) => {\r\n\t\t// console.log(\"handleKeyUp\", e);\r\n\r\n\t\tconst keyReleased = e.key.toLowerCase();\r\n\r\n\t\tif (MODIFIER_KEYS.includes(keyReleased)) {\r\n\t\t\tthis.setState({activeModifierKey: false});\r\n\t\t}\r\n\r\n\t\tconst pianoKey = LAYOUTS[this.state.layout][keyReleased];\r\n\t\tif (pianoKey) {\r\n\t\t\tthis.deactivatePianoKey(pianoKey);\r\n\t\t}\r\n\t};\r\n\r\n\thandleMouseDown = (e) => {\r\n\t\t// console.log('handleMouseDown', e);\r\n\r\n\t\tthis.resumeAudioContext();\r\n\t};\r\n\r\n\thandleMouseUp = (e) => {\r\n\t\t// console.log('handleMouseUp', e);\r\n\r\n\t\tthis.mouseDownOnKeys = false;\r\n\t\tthis.state.activeControl &&\r\n\t\t\tthis.setState({\r\n\t\t\t\tactiveControl: null,\r\n\t\t\t\tactiveModifierKey: false,\r\n\t\t\t});\r\n\t};\r\n\r\n\thandleMouseLeave = (e) => {\r\n\t\t// console.log(\"handleMouseLeave\", e);\r\n\t};\r\n\r\n\thandleMouseOut = (e) => {\r\n\t\t// console.log(\"handleMouseOut\", e);\r\n\t};\r\n\r\n\t/** PIANO KEYS */\r\n\r\n\thandleMouseDownPianoKey = (e) => {\r\n\t\t// console.log('handleMouseDownPianoKey', e);\r\n\r\n\t\tif (e.button === 0) {\r\n\t\t\tthis.activatePianoKey(e.target.title);\r\n\t\t\tthis.mouseDownOnKeys = true;\r\n\t\t}\r\n\t};\r\n\r\n\thandleMouseUpPianoKey = (e) => {\r\n\t\t// console.log('handleMouseUpPianoKey', e);\r\n\r\n\t\tif (e.button === 0) {\r\n\t\t\tthis.mouseDownOnKeys = false;\r\n\t\t\tthis.deactivatePianoKey(e.target.title);\r\n\t\t}\r\n\t};\r\n\r\n\thandleMouseOverPianoKey = (e) => {\r\n\t\t// console.log(\"handleMouseOverPianoKey\", e);\r\n\t\t// this.mouseDownOnKeys && this.activatePianoKey(e.target.title);\r\n\t};\r\n\r\n\thandleMouseLeavePianoKey = (e) => {\r\n\t\t// console.log(\"handleMouseLeavePianoKey\", e);\r\n\r\n\t\tthis.mouseDownOnKeys && this.deactivatePianoKey(e.target.title);\r\n\t};\r\n\r\n\tactivatePianoKey = (key) => {\r\n\t\t// console.log('activatePianoKey', key);\r\n\r\n\t\tif (!this.state.activeKeys.includes(key)) {\r\n\t\t\tthis.output.playKey(KEYS_MAP[key].freq);\r\n\t\t\tthis.setState((prevState) => ({\r\n\t\t\t\tactiveKeys: [...prevState.activeKeys, key],\r\n\t\t\t}));\r\n\t\t}\r\n\t};\r\n\r\n\tdeactivatePianoKey = (key) => {\r\n\t\t// console.log('deactivatePianoKey', key);\r\n\r\n\t\tif (this.state.activeKeys.includes(key)) {\r\n\t\t\tthis.output.stopKey(KEYS_MAP[key].freq);\r\n\t\t\tthis.setState((prevState) => ({\r\n\t\t\t\tactiveKeys: prevState.activeKeys.filter((k) => k !== key),\r\n\t\t\t}));\r\n\t\t}\r\n\t};\r\n\r\n\t/** SYNTH CONTROLS */\r\n\r\n\thandleClickControl = (control, value) => {\r\n\t\t// console.log(`handleClickControl(${control}, ${value})`);\r\n\r\n\t\tthis.setControlValue(control, value);\r\n\t};\r\n\r\n\thandleMouseDownControl = (activeControl, activeControlType, e) => {\r\n\t\t// console.log('handleMouseDownControl', activeControl, activeControlType, e);\r\n\r\n\t\tif (e.button === 0) {\r\n\t\t\t// left click\r\n\t\t\tif (this.state.activeModifierKey) {\r\n\t\t\t\t// holding ctrl\r\n\t\t\t\tthis.resetControlValue(activeControl);\r\n\t\t\t} else {\r\n\t\t\t\tthis.activateControl(activeControl, activeControlType, e.screenY);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\thandleMouseUpControl = (activeControl, e) => {\r\n\t\t// console.log('handleMouseUpControl', activeControl, e);\r\n\r\n\t\tif (e.button === 0) {\r\n\t\t\tthis.deactivateControl(activeControl);\r\n\t\t}\r\n\t};\r\n\r\n\thandleMouseMoveControl = (event) => {\r\n\t\t// console.log(\"handleMouseMoveControl\", event, this.state);\r\n\r\n\t\tconst {activeModifierKey, activeControl, activeControlType, activeScreenY} = this.state;\r\n\r\n\t\tif (activeControl) {\r\n\t\t\tlet pixelStep = CONTROL_TYPES[activeControlType].pixelStep || 5;\r\n\r\n\t\t\tif (activeModifierKey) {\r\n\t\t\t\tpixelStep *= 10;\r\n\t\t\t}\r\n\r\n\t\t\tconst movement = Math.abs(event.screenY - activeScreenY);\r\n\r\n\t\t\tlet change = 0;\r\n\t\t\tif (event.screenY - pixelStep > activeScreenY) {\r\n\t\t\t\tchange = Math.round(-movement / pixelStep);\r\n\t\t\t} else if (event.screenY + pixelStep < activeScreenY) {\r\n\t\t\t\tchange = Math.round(movement / pixelStep);\r\n\t\t\t}\r\n\r\n\t\t\tif (change) {\r\n\t\t\t\tconst newState = {...this.state};\r\n\t\t\t\tnewState['activeScreenY'] = event.screenY;\r\n\t\t\t\tthis.setState(newState);\r\n\t\t\t\tthis.changeControlValue(activeControl, change);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\thandleMouseWheelControl = (activeControl, activeControlType, e) => {\r\n\t\t// console.log('handleMouseWheelControl', activeControl, activeControlType, e.deltaY);\r\n\r\n\t\t// const {pixelStep} = CONTROL_TYPES[activeControlType];\r\n\r\n\t\t// const change = e.deltaY > 0 ? -1 : 1;\r\n\t\t// const value = change * Math.round(5 / pixelStep);\r\n\t\t// this.changeControlValue(activeControl, value);\r\n\t\treturn false;\r\n\t};\r\n\r\n\tactivateControl = (activeControl, activeControlType, screenY) => {\r\n\t\t// console.log('activateControl', activeControl, activeControlType, screenY);\r\n\r\n\t\tdocument.addEventListener('mousemove', this.handleMouseMoveControl);\r\n\r\n\t\tthis.setState({\r\n\t\t\tactiveControl,\r\n\t\t\tactiveControlType,\r\n\t\t\tactiveScreenY: screenY,\r\n\t\t});\r\n\t};\r\n\r\n\tdeactivateControl = (activeControl) => {\r\n\t\t// console.log('deactiveControl', activeControl);\r\n\r\n\t\tdocument.removeEventListener('mousemove', this.handleMouseMoveControl);\r\n\r\n\t\tthis.setState({activeControl: null});\r\n\t};\r\n\r\n\tchangeControlValue = (control, change) => {\r\n\t\t// console.log('changeControlValue', control, change);\r\n\r\n\t\tconst {range} = CONTROLS[control];\r\n\r\n\t\tlet value = Number.isInteger(this.state[control]) ? this.state[control] + change : 0;\r\n\r\n\t\tif (range) {\r\n\t\t\tvalue = getValueFromRange(value, range);\r\n\t\t}\r\n\r\n\t\tthis.setControlValue(control, value);\r\n\t};\r\n\r\n\tsetControlValue = (control, value) => {\r\n\t\tconsole.log('setControlValue', control, value);\r\n\r\n\t\tthis.output.set(control, value);\r\n\t\tthis.setState({[control]: value});\r\n\t};\r\n\r\n\tresetControlValue = (control) => {\r\n\t\tconsole.log('resetControlValue', control);\r\n\t\tthis.setState({[control]: CONTROLS[control].defaultValue});\r\n\t};\r\n\r\n\trender() {\r\n\t\t// console.log(\"State:\", this.state);\r\n\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tid='container'\r\n\t\t\t\t// onContextMenu={(e) => {\r\n\t\t\t\t// \te.preventDefault();\r\n\t\t\t\t// }}\r\n\t\t\t>\r\n\t\t\t\t<Instrument\r\n\t\t\t\t\t{...this.state}\r\n\t\t\t\t\thandleMouseDownPianoKey={this.handleMouseDownPianoKey}\r\n\t\t\t\t\thandleMouseUpPianoKey={this.handleMouseUpPianoKey}\r\n\t\t\t\t\thandleMouseOverPianoKey={this.handleMouseOverPianoKey}\r\n\t\t\t\t\thandleMouseLeavePianoKey={this.handleMouseLeavePianoKey}\r\n\t\t\t\t\thandleClickControl={this.handleClickControl}\r\n\t\t\t\t\thandleMouseDownControl={this.handleMouseDownControl}\r\n\t\t\t\t\thandleMouseUpControl={this.handleMouseUpControl}\r\n\t\t\t\t\thandleMouseWheelControl={this.handleMouseWheelControl}\r\n\t\t\t\t\thandleMidiKeyDown={this.activatePianoKey}\r\n\t\t\t\t\thandleMidiKeyUp={this.deactivatePianoKey}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}