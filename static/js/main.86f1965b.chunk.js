(this["webpackJsonpreact-piano-roll"]=this["webpackJsonpreact-piano-roll"]||[]).push([[0],{10:function(e,a,t){e.exports=t(16)},15:function(e,a,t){},16:function(e,a,t){"use strict";t.r(a);for(var n=t(0),o=t.n(n),l=t(4),i=t.n(l),r=(t(15),t(2)),s=t(7),c=t(1),u=t(5),m=t(8),d=t(6),L=t(9),v=[{name:"C",freq:16.3516*Math.pow(1.0594630943593,0)},{name:"C\u266f",freq:16.3516*Math.pow(1.0594630943593,1)},{name:"D",freq:16.3516*Math.pow(1.0594630943593,2)},{name:"D\u266f",freq:16.3516*Math.pow(1.0594630943593,3)},{name:"E",freq:16.3516*Math.pow(1.0594630943593,4)},{name:"F",freq:16.3516*Math.pow(1.0594630943593,5)},{name:"F\u266f",freq:16.3516*Math.pow(1.0594630943593,6)},{name:"G",freq:16.3516*Math.pow(1.0594630943593,7)},{name:"G\u266f",freq:16.3516*Math.pow(1.0594630943593,8)},{name:"A",freq:16.3516*Math.pow(1.0594630943593,9)},{name:"A\u266f",freq:16.3516*Math.pow(1.0594630943593,10)},{name:"B",freq:16.3516*Math.pow(1.0594630943593,11)}],g=[],p={},f=function(e){v.forEach((function(a){var t={name:a.name+e,freq:a.freq*Math.pow(2,e),octave:e};g.push(t),p[t.name]=t}))},h=0;h<10;h++)f(h);var E=[{z:"C0",x:"D0",c:"E0",v:"F0",b:"G0",n:"A0",m:"B0",a:"C1",s:"D1",d:"E1",f:"F1",g:"G1",h:"A1",j:"B1",k:"C2",l:"D2",";":"E2","'":"F2",",":"C1",".":"D1","/":"E1",q:"C2",w:"D2",e:"E2",r:"F2",t:"G2",y:"A2",u:"B2",i:"C3",o:"D3",p:"E3","[":"F3","]":"G3","\\":"A3",delete:"B3"},{z:"C0",s:"C\u266f0",x:"D0",d:"D\u266f0",c:"E0",v:"F0",g:"F\u266f0",b:"G0",h:"G\u266f0",n:"A0",j:"A\u266f0",m:"B0",",":"C1",l:"C\u266f1",".":"D1",";":"D\u266f1","/":"E1",q:"C1",2:"C\u266f1",w:"D1",3:"D\u266f1",e:"E1",r:"F1",5:"F\u266f1",t:"G1",6:"G\u266f1",y:"A1",7:"A\u266f1",u:"B1",i:"C2",9:"C\u266f2",o:"D2",0:"D\u266f2",p:"E2","[":"F2","=":"F\u266f2","]":"G2",backspace:"G\u266f2","\\":"A2",insert:"A\u266f2",delete:"B2"}],y=["sawtooth","square","triangle","sine"],b={digital:{name:"digital",pixelStep:10},knob:{name:"knob",pixelStep:1}},Q={layout:{defaultValue:0,range:{min:0,max:1}},master:{defaultValue:50,range:{min:0,max:100}},attack:{defaultValue:50,range:{min:0,max:100}},decay:{defaultValue:50,range:{min:0,max:100}},sustain:{defaultValue:50,range:{min:0,max:100}},release:{defaultValue:50,range:{min:0,max:100}},shape:{defaultValue:0,range:{min:0,max:3}},octave:{defaultValue:5,range:{min:0,max:9}},transpose:{defaultValue:0,range:{min:-9,max:9}},detune:{defaultValue:0,range:{min:-100,max:100}},gain:{defaultValue:50,range:{min:0,max:100}}},C=function(e){var a=e.active,t=e.disabled,n=e.handleMouseDownPianoKey,l=e.handleMouseUpPianoKey,i=e.handleMouseOverPianoKey,r=e.handleMouseLeavePianoKey,s=e.name,c=e.note;return o.a.createElement("div",{title:s,className:["pr-piano-key","pr-piano-key-".concat(c),s.includes("\u266f")?"pr-piano-key-black":"pr-piano-key-white",a?"pr-piano-key-active":t?"pr-piano-key-disabled":"pr-piano-key-inactive"].join(" "),id:"pr-piano-key-".concat(s),tabIndex:"0",onMouseDown:n,onMouseUp:l,onMouseOver:i,onMouseLeave:r})},M=function(e){var a=e.activeKeys,t=e.octaves,n=[],l=[];return g.slice(0,12*t).forEach((function(t,i){(t.name.includes("\u266f")?n:l).push(o.a.createElement(C,Object.assign({},e,{key:12*t.octave+i,name:t.name,note:t.name.substring(0,t.name.length-1),freq:t.freq*Math.pow(2,t.octave),active:a.includes(t.name)})))})),o.a.createElement("div",{id:"pr-piano-keys"},o.a.createElement("div",{id:"pr-piano-black-keys"},n),o.a.createElement("div",{id:"pr-piano-white-keys"},l))},x=function(e){var a=e.handleMouseDownControl,t=e.handleMouseUpControl,n=e.handleMouseWheelControl,l=e.label,i=e.name,r=e.outline,s=e.type,c=e.value,u={"single-digit":{backgroundValue:8,style:function(e){var a={};return 1===e&&(a.left="-0.25rem"),a}},"single-digit-negative":{backgroundValue:-8,style:function(e){var a={};return(e>1||0===e)&&(a.left="-0.0625rem"),1===e&&(a.left="0.245rem"),-1===e&&(a.left="-0.225rem",a.letterSpacing="0.5375rem"),a}}};return o.a.createElement("div",{className:"pr-digital-control "+(r?"pr-digital-control-outlined":"")},o.a.createElement("label",{id:"pr-"+i+"-label",className:"pr-control-label",htmlFor:"pr-"+i},l||i),o.a.createElement("div",{className:"pr-digital-control-input-container"},o.a.createElement("div",{id:"pr-"+i,className:"pr-digital-control-input "+s},8,o.a.createElement("div",{id:"pr-"+i+"-background",className:"pr-digital-control-input pr-digital-control-input-background "+s,children:u[s].backgroundValue}),o.a.createElement("div",{id:"pr-"+i+"-foreground",className:"pr-digital-control-input pr-digital-control-input-foreground "+s,children:c,style:u[s].style(c),onMouseDown:function(e){return a(i,b.digital.name,e)},onMouseUp:function(e){return t(i,b.digital.name,e)},onWheel:function(e){return n(i,b.digital.name,e)}}))))},w=function(e){var a=e.activeControl,t=e.handleMouseDownControl,n=e.handleMouseUpControl,l=e.handleMouseWheelControl,i=e.label,r=e.max,s=e.min,c=e.name,u=e.size,m=e.value;return o.a.createElement("div",{className:"pr-knob-control-container "+(u||"")},o.a.createElement("div",{className:"pr-control-label"},i||c),o.a.createElement("div",{className:"pr-knob-control-value",style:function(){var e={};return a===c&&(e.display="block"),e}()},m),o.a.createElement("div",{className:"pr-knob-container"},o.a.createElement("div",{className:"pr-knob",style:function(){var e={},a=.875*(3.6*(100*(m-s)/(r-s))+180)+45;return e.transform="rotate(".concat(a,"deg)"),e}(),onMouseDown:function(e){return t(c,b.knob.name,e)},onMouseUp:function(e){return n(c,b.knob.name,e)},onWheel:function(e){return l(c,b.knob.name,e)}})))},O=function(e){var a=e.attack,t=e.decay,n=e.detune,l=e.gain,i=e.layout,r=e.master,s=e.octave,c=e.release,u=e.shape,m=e.sustain,d=e.transpose,L=function(){return o.a.createElement("div",{id:"pr-logo-section"},o.a.createElement("svg",{id:"pr-logo",viewBox:"304.103 332.216 470.661 104.256"},o.a.createElement("g",null,o.a.createElement("path",{d:"M 654.248 361.208 L 652.04 368.792 L 623.528 431 L 608.264 431 L 635.24 373.784 L 617.768 373.784 L 621.512 361.208 L 654.248 361.208 Z ",fill:"rgb(171,171,171)"}),o.a.createElement("path",{d:" M 688.821 378.476 L 677.685 416.396 L 677.685 416.396 Q 676.725 419.564 675.093 422.54 L 675.093 422.54 L 675.093 422.54 Q 673.461 425.516 670.869 427.724 L 670.869 427.724 L 670.869 427.724 Q 668.277 429.932 664.533 431.228 L 664.533 431.228 L 664.533 431.228 Q 660.789 432.524 655.797 432.332 L 655.797 432.332 L 655.797 432.332 Q 652.917 432.236 649.845 431.324 L 649.845 431.324 L 649.845 431.324 Q 646.773 430.412 644.613 428.3 L 644.613 428.3 L 644.613 428.3 Q 642.453 426.188 641.685 422.732 L 641.685 422.732 L 641.685 422.732 Q 640.917 419.276 642.453 414.092 L 642.453 414.092 L 654.261 373.868 L 654.261 373.868 Q 656.565 366.188 661.845 363.02 L 661.845 363.02 L 661.845 363.02 Q 667.125 359.852 674.709 359.852 L 674.709 359.852 L 674.709 359.852 Q 684.021 359.852 687.813 364.364 L 687.813 364.364 L 687.813 364.364 Q 691.605 368.876 688.821 378.476 L 688.821 378.476 Z  M 662.901 417.548 L 675.189 375.596 L 675.189 375.596 Q 675.765 373.58 675.333 372.428 L 675.333 372.428 L 675.333 372.428 Q 674.901 371.276 672.693 371.276 L 672.693 371.276 L 672.693 371.276 Q 670.677 371.276 669.717 372.38 L 669.717 372.38 L 669.717 372.38 Q 668.757 373.484 668.277 375.308 L 668.277 375.308 L 655.893 417.164 L 655.893 417.164 Q 654.741 421.1 658.293 421.196 L 658.293 421.196 L 658.293 421.196 Q 660.213 421.292 661.269 420.428 L 661.269 420.428 L 661.269 420.428 Q 662.325 419.564 662.901 417.548 L 662.901 417.548 Z ",fillRule:"evenodd",fill:"rgb(171,171,171)"}),o.a.createElement("path",{d:" M 735.656 361.208 L 726.92 390.872 L 726.92 390.872 Q 725.288 396.248 717.992 396.152 L 717.992 396.152 L 717.992 396.152 Q 721.448 396.344 722.696 398.792 L 722.696 398.792 L 722.696 398.792 Q 723.944 401.24 722.984 404.312 L 722.984 404.312 L 715.112 431 L 700.52 431 L 708.584 403.736 L 708.584 403.736 Q 708.872 402.68 708.632 401.96 L 708.632 401.96 L 708.632 401.96 Q 708.392 401.24 706.76 401.24 L 706.76 401.24 L 704.552 401.24 L 704.552 401.24 Q 702.92 401.24 702.344 401.624 L 702.344 401.624 L 702.344 401.624 Q 701.768 402.008 701.384 403.256 L 701.384 403.256 L 693.128 431 L 678.536 431 L 686.6 403.64 L 686.6 403.64 Q 686.984 402.296 687.608 401 L 687.608 401 L 687.608 401 Q 688.232 399.704 689.192 398.648 L 689.192 398.648 L 689.192 398.648 Q 690.152 397.592 691.688 396.872 L 691.688 396.872 L 691.688 396.872 Q 693.224 396.152 695.528 396.056 L 695.528 396.056 L 695.528 396.056 Q 692.168 396.056 691.112 393.944 L 691.112 393.944 L 691.112 393.944 Q 690.056 391.832 690.92 388.952 L 690.92 388.952 L 699.08 361.208 L 713.672 361.208 L 705.608 388.76 L 705.608 388.76 Q 705.224 390.104 705.8 390.536 L 705.8 390.536 L 705.8 390.536 Q 706.376 390.968 707.528 390.968 L 707.528 390.968 L 710.12 390.968 L 710.12 390.968 Q 711.176 390.968 711.848 390.536 L 711.848 390.536 L 711.848 390.536 Q 712.52 390.104 713 388.472 L 713 388.472 L 721.064 361.208 L 735.656 361.208 Z ",fill:"rgb(171,171,171)"}),o.a.createElement("path",{d:" M 720.296 431 L 740.84 361.208 L 768.488 361.208 L 768.488 361.208 Q 772.424 361.208 773.864 363.656 L 773.864 363.656 L 773.864 363.656 Q 775.304 366.104 774.44 369.08 L 774.44 369.08 L 758.984 421.592 L 758.984 421.592 Q 758.12 424.664 756.824 426.536 L 756.824 426.536 L 756.824 426.536 Q 755.528 428.408 753.56 429.416 L 753.56 429.416 L 753.56 429.416 Q 751.592 430.424 748.904 430.712 L 748.904 430.712 L 748.904 430.712 Q 746.216 431 742.472 431 L 742.472 431 L 720.296 431 Z  M 756.584 372.44 L 751.976 372.44 L 738.152 419.384 L 742.76 419.384 L 742.76 419.384 Q 744.488 419.384 745.16 418.808 L 745.16 418.808 L 745.16 418.808 Q 745.832 418.232 746.216 416.984 L 746.216 416.984 L 758.408 375.512 L 758.408 375.512 Q 758.888 373.976 758.552 373.208 L 758.552 373.208 L 758.552 373.208 Q 758.216 372.44 756.584 372.44 L 756.584 372.44 Z ",fillRule:"evenodd",fill:"rgb(171,171,171)"}),o.a.createElement("path",{d:" M 608.48 405.752 L 605.408 416.216 L 599.456 416.216 L 595.04 431 L 580.64 431 L 585.056 416.216 L 564.224 416.216 L 568.448 401.528 L 595.52 361.208 L 615.68 361.208 L 602.528 405.752 L 608.48 405.752 Z  M 580.544 405.752 L 588.032 405.752 L 595.424 380.408 L 580.928 404.504 L 580.544 405.752 Z ",fillRule:"evenodd",fill:"rgb(171,171,171)"}),o.a.createElement("path",{d:" M 403.136 361.208 L 382.592 431 L 368.192 431 L 376.832 401.528 L 369.536 401.528 L 360.8 431 L 346.4 431 L 366.944 361.208 L 381.344 361.208 L 373.184 389.144 L 380.48 389.144 L 388.736 361.208 L 403.136 361.208 Z ",fill:"rgb(171,171,171)"}),o.a.createElement("path",{d:" M 414.944 362.208 L 435.872 362.208 L 435.872 362.208 Q 439.232 362.208 440.816 364.656 L 440.816 364.656 L 440.816 364.656 Q 442.4 367.104 441.536 370.176 L 441.536 370.176 L 425.504 424.608 L 425.504 424.608 Q 424.16 428.928 421.04 430.464 L 421.04 430.464 L 421.04 430.464 Q 417.92 432 414.272 432 L 414.272 432 L 397.088 432 L 397.088 432 Q 395.264 432 393.728 431.376 L 393.728 431.376 L 393.728 431.376 Q 392.192 430.752 391.184 429.504 L 391.184 429.504 L 391.184 429.504 Q 390.176 428.256 389.84 426.48 L 389.84 426.48 L 389.84 426.48 Q 389.504 424.704 390.176 422.496 L 390.176 422.496 L 405.92 369.024 L 405.92 369.024 Q 406.688 365.952 409.04 364.08 L 409.04 364.08 L 409.04 364.08 Q 411.392 362.208 414.944 362.208 L 414.944 362.208 Z  M 424.448 372.44 L 420.8 372.44 L 420.8 372.44 Q 419.744 372.44 419.264 372.92 L 419.264 372.92 L 419.264 372.92 Q 418.784 373.4 418.592 374.168 L 418.592 374.168 L 405.728 417.656 L 405.728 417.656 Q 405.248 419.384 407.072 419.384 L 407.072 419.384 L 410.816 419.384 L 410.816 419.384 Q 412.64 419.384 413.12 417.656 L 413.12 417.656 L 425.888 374.264 L 425.888 374.264 Q 426.368 372.44 424.448 372.44 L 424.448 372.44 Z ",fillRule:"evenodd",fill:"rgb(171,171,171)"}),o.a.createElement("path",{d:" M 456.032 361.208 L 480.032 361.208 L 476.288 373.784 L 461.312 373.784 L 461.312 373.784 Q 460.16 373.784 459.536 374.168 L 459.536 374.168 L 459.536 374.168 Q 458.912 374.552 458.528 375.896 L 458.528 375.896 L 446.528 416.6 L 446.528 416.6 Q 445.76 419.384 448.736 419.384 L 448.736 419.384 L 453.632 419.384 L 458.912 401.528 L 455.936 401.528 L 459.584 389.144 L 476.288 389.144 L 464.768 428.312 L 448.64 436.472 L 450.176 431 L 441.248 431 L 441.248 431 Q 438.752 431 436.64 430.28 L 436.64 430.28 L 436.64 430.28 Q 434.528 429.56 433.136 427.976 L 433.136 427.976 L 433.136 427.976 Q 431.744 426.392 431.312 423.944 L 431.312 423.944 L 431.312 423.944 Q 430.88 421.496 431.936 418.04 L 431.936 418.04 L 446.72 367.736 L 446.72 367.736 Q 447.872 363.8 450.224 362.504 L 450.224 362.504 L 450.224 362.504 Q 452.576 361.208 456.032 361.208 L 456.032 361.208 Z ",fill:"rgb(171,171,171)"}),o.a.createElement("path",{d:" M 503.648 361.208 L 503.552 361.208 L 487.328 416.408 L 487.328 416.408 Q 486.848 418.04 487.472 418.664 L 487.472 418.664 L 487.472 418.664 Q 488.096 419.288 489.728 419.288 L 489.728 419.288 L 493.472 419.288 L 510.56 361.208 L 524.96 361.208 L 505.184 428.312 Q 505.17 428.341 504.62 428.413 Q 498.832 431.016 490.112 431 L 481.76 431 L 481.76 431 Q 479.072 431 476.912 430.28 L 476.912 430.28 L 476.912 430.28 Q 474.752 429.56 473.408 427.976 L 473.408 427.976 L 473.408 427.976 Q 472.064 426.392 471.728 423.944 L 471.728 423.944 L 471.728 423.944 Q 471.392 421.496 472.448 418.04 L 472.448 418.04 L 489.152 361.208 L 503.648 361.208 Z ",fill:"rgb(171,171,171)"}),o.a.createElement("path",{d:" M 509.216 431 L 529.76 361.208 L 542.144 361.208 L 542.624 388.184 L 550.592 361.208 L 564.608 361.208 L 544.064 431 L 532.448 431 L 531.2 403.16 L 522.848 431 L 509.216 431 Z ",fill:"rgb(171,171,171)"}),o.a.createElement("path",{d:" M 317.72 375.896 L 343.928 375.896 L 343.928 375.896 Q 346.712 375.896 348.872 376.664 L 348.872 376.664 L 348.872 376.664 Q 351.032 377.432 352.328 379.112 L 352.328 379.112 L 352.328 379.112 Q 353.624 380.792 353.864 383.384 L 353.864 383.384 L 353.864 383.384 Q 354.104 385.976 353.048 389.624 L 353.048 389.624 L 343.256 422.936 L 343.256 422.936 Q 342.488 425.528 341.096 427.112 L 341.096 427.112 L 341.096 427.112 Q 339.704 428.696 338.024 429.56 L 338.024 429.56 L 338.024 429.56 Q 336.344 430.424 334.472 430.712 L 334.472 430.712 L 334.472 430.712 Q 332.6 431 330.776 431 L 330.776 431 L 311.864 431 L 311.864 431 Q 307.736 431 305.48 428.024 L 305.48 428.024 L 305.48 428.024 Q 303.224 425.048 304.664 420.248 L 304.664 420.248 L 309.464 403.736 L 324.728 403.736 L 321.08 415.832 L 321.08 415.832 Q 320.696 417.08 321.272 417.416 L 321.272 417.416 L 321.272 417.416 Q 321.848 417.752 322.712 417.752 L 322.712 417.752 L 326.36 417.752 L 326.36 417.752 Q 327.704 417.752 328.376 417.32 L 328.376 417.32 L 328.376 417.32 Q 329.048 416.888 329.432 415.544 L 329.432 415.544 L 337.208 389.24 L 337.208 389.24 Q 337.4 388.664 337.256 388.28 L 337.256 388.28 L 337.256 388.28 Q 337.112 387.896 336.152 387.896 L 336.152 387.896 L 314.168 387.896 L 317.72 375.896 Z ",fill:"rgb(171,171,171)"}),o.a.createElement("path",{d:" M 333.729 375.977 L 317.697 375.977 L 327.489 341.029 L 327.489 341.029 Q 328.257 338.294 329.505 336.572 L 329.505 336.572 L 329.505 336.572 Q 330.753 334.85 332.337 333.888 L 332.337 333.888 L 332.337 333.888 Q 333.921 332.925 335.745 332.621 L 335.745 332.621 L 335.745 332.621 Q 337.569 332.318 339.393 332.318 L 339.393 332.318 L 369.249 332.318 L 361.281 361.086 L 345.057 364.935 L 350.433 345.79 L 344.385 345.79 L 344.385 345.79 Q 343.041 345.79 342.417 346.246 L 342.417 346.246 L 342.417 346.246 Q 341.793 346.702 341.409 348.12 L 341.409 348.12 L 333.729 375.977 Z ",fill:"rgb(171,171,171)"}))),o.a.createElement("div",{id:"pr-logo-subtext"},o.a.createElement("span",{id:"pr-logo-subtext-bold"},o.a.createElement("span",null,"Re"),o.a.createElement("span",{style:{letterSpacing:"-0.125rem"}},"a"),o.a.createElement("span",null,"ct")),o.a.createElement("span",null,"\xa0Synthesizer")))},v=function(){return o.a.createElement("div",{id:"pr-global-controls"},o.a.createElement(w,Object.assign({},e,{name:"master",label:"volume",size:"large",min:Q.master.range.min,max:Q.master.range.max,value:r})),o.a.createElement("div",{id:"pr-envelope-controls"},o.a.createElement(w,Object.assign({},e,{name:"attack",min:Q.attack.range.min,max:Q.attack.range.max,value:a})),o.a.createElement(w,Object.assign({},e,{name:"decay",min:Q.decay.range.min,max:Q.decay.range.max,value:t})),o.a.createElement(w,Object.assign({},e,{name:"sustain",min:Q.sustain.range.min,max:Q.sustain.range.max,value:m})),o.a.createElement(w,Object.assign({},e,{name:"release",min:Q.release.range.min,max:Q.release.range.max,value:c}))))};return o.a.createElement("div",{id:"pr-piano"},o.a.createElement("div",{id:"pr-piano-left"},o.a.createElement("div",{id:"pr-piano-top-left"},o.a.createElement(x,Object.assign({},e,{name:"layout",value:i,type:"single-digit",outline:!0})))),o.a.createElement("div",{id:"pr-piano-right"},o.a.createElement("div",{id:"pr-piano-right-top"},o.a.createElement("div",{id:"pr-global-section"},L(),v()),o.a.createElement("div",{id:"pr-oscillators"},o.a.createElement("div",{id:"pr-regular-oscillators"},o.a.createElement("div",{className:"pr-oscillator-container"},o.a.createElement("div",{className:"pr-oscillator-label"},"OSC 1"),o.a.createElement("div",{className:"pr-oscillator-controls-container"},o.a.createElement(x,Object.assign({},e,{name:"shape",value:u,type:"single-digit"})),o.a.createElement(x,Object.assign({},e,{name:"octave",value:s,type:"single-digit"})),o.a.createElement(x,Object.assign({},e,{name:"transpose",value:d,type:"single-digit-negative"})),o.a.createElement(w,Object.assign({},e,{name:"detune",label:"tune",size:"medium",min:Q.detune.range.min,max:Q.detune.range.max,value:n})),o.a.createElement(w,Object.assign({},e,{name:"gain",label:"vol",size:"medium",min:Q.gain.range.min,max:Q.gain.range.max,value:l})))),o.a.createElement("div",{className:"pr-oscillator-container"},o.a.createElement("div",{className:"pr-oscillator-label"},"OSC 2"),o.a.createElement("div",{className:"pr-oscillator-controls-container"},o.a.createElement(x,Object.assign({},e,{name:"shape",value:u,type:"single-digit"})),o.a.createElement(x,Object.assign({},e,{name:"octave",value:s,type:"single-digit"})),o.a.createElement(x,Object.assign({},e,{name:"transpose",value:d,type:"single-digit-negative"})),o.a.createElement(w,Object.assign({},e,{name:"detune",label:"tune",size:"medium",min:Q.detune.range.min,max:Q.detune.range.max,value:n})),o.a.createElement(w,Object.assign({},e,{name:"gain",label:"vol",size:"medium",min:Q.gain.range.min,max:Q.gain.range.max,value:l}))))),o.a.createElement("div",{id:"pr-mod-oscillator"},o.a.createElement("div",{className:"pr-oscillator-container"},o.a.createElement("div",{className:"pr-oscillator-label"},"MOD OSC"),o.a.createElement("div",{className:"pr-oscillator-controls-container"},o.a.createElement(x,Object.assign({},e,{name:"modOscShape",label:"shape",value:u,type:"single-digit"})),o.a.createElement(w,Object.assign({},e,{name:"modOscGain",label:"vol",size:"small",min:Q.gain.range.min,max:Q.gain.range.max,value:l})),o.a.createElement(w,Object.assign({},e,{name:"modOscFreq",label:"freq",size:"small",min:Q.gain.range.min,max:Q.gain.range.max,value:l})))))),o.a.createElement("div",{id:"pr-filters"},o.a.createElement("div",{className:"pr-filter pr-filter-1"},o.a.createElement("div",{className:"pr-filter-label"},"FILTER 1"),o.a.createElement("div",{className:"pr-filter-controls-container"},o.a.createElement(w,Object.assign({},e,{name:"filter1cutoff",label:"cutoff",size:"large",min:Q.master.range.min,max:Q.master.range.max,value:r})),o.a.createElement(w,Object.assign({},e,{name:"filter1res",label:"res",size:"large",min:Q.master.range.min,max:Q.master.range.max,value:r})),o.a.createElement(w,Object.assign({},e,{name:"filter1mod",label:"mod",size:"large",min:Q.master.range.min,max:Q.master.range.max,value:r})),o.a.createElement(w,Object.assign({},e,{name:"filter1env",label:"env",size:"large",min:Q.master.range.min,max:Q.master.range.max,value:r})))),o.a.createElement("div",{className:"pr-filter pr-filter-2"},o.a.createElement("div",{className:"pr-filter-label"},"FILTER 2"),o.a.createElement("div",{className:"pr-filter-controls-container"},o.a.createElement(w,Object.assign({},e,{name:"filter2cutoff",label:"cutoff",size:"large",min:Q.master.range.min,max:Q.master.range.max,value:r})),o.a.createElement(w,Object.assign({},e,{name:"filter2res",label:"res",size:"large",min:Q.master.range.min,max:Q.master.range.max,value:r})),o.a.createElement(w,Object.assign({},e,{name:"filter2mod",label:"mod",size:"large",min:Q.master.range.min,max:Q.master.range.max,value:r})),o.a.createElement(w,Object.assign({},e,{name:"filter2env",label:"env",size:"large",min:Q.master.range.min,max:Q.master.range.max,value:r})))))),o.a.createElement("div",{id:"pr-piano-right-bottom"},o.a.createElement(M,e))))},D=function e(a,t,n,o,l,i){var r=this,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,m=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1;Object(c.a)(this,e),this.initializeOscillators=function(){r.osc1Gain=r.audioContext.createGain(),r.osc1Gain.gain.value=0,r.osc1Gain.connect(r.audioContext.effectChain),r.osc1=r.audioContext.createOscillator(),r.osc1.frequency.value=r.getFrequency(),r.osc1.type=r.getOscType(),r.osc1.connect(r.osc1Gain),r.osc1.start(),r.oscillators.push(r.osc1)},this.start=function(){r.active=!0;var e=r.audioContext.currentTime+r.release/1e3;r.osc1Gain.gain.setValueAtTime(r.getGain(),e)},this.stop=function(){r.active=!1;var e=r.audioContext.currentTime+r.release/1e3;r.osc1Gain.gain.setValueAtTime(0,e)},this.getFrequency=function(){return r.frequency*Math.pow(2,r.octave)/16*Math.pow(1.0594630943593,r.transpose)},this.getGain=function(){return r.gain/100},this.getOscType=function(){return y[r.shape]},this.active=!1,this.audioContext=a,this.frequency=t,this.gain=n,this.shape=o,this.octave=l,this.transpose=i,this.attack=s,this.decay=u,this.sustain=m,this.release=d,this.oscillators=[],this.initializeOscillators()},k=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(m.a)(this,Object(d.a)(a).call(this,e))).componentDidMount=function(){t.initializeSoundEngine(),t.registerEvents()},t.registerEvents=function(){document.addEventListener("keydown",t.handleKeyDown),document.addEventListener("keyup",t.handleKeyUp),document.addEventListener("mousedown",t.handleMouseDown),document.addEventListener("mouseup",t.handleMouseUp),document.addEventListener("mouseleave",t.handleMouseLeave),document.addEventListener("mouseout",t.handleMouseOut),document.addEventListener("drag",(function(e){return e.preventDefault()})),document.addEventListener("dragend",(function(e){return e.preventDefault()})),document.addEventListener("dragenter",(function(e){return e.preventDefault()})),document.addEventListener("dragexit",(function(e){return e.preventDefault()})),document.addEventListener("dragleave",(function(e){return e.preventDefault()})),document.addEventListener("dragover",(function(e){return e.preventDefault()})),document.addEventListener("dragstart",(function(e){return e.preventDefault()})),document.addEventListener("drop",(function(e){return e.preventDefault()}))},t.initializeSoundEngine=function(){console.log("initializeSoundEngine");var e=window.AudioContext||window.webkitAudioContext;t.audioContext=new e,t.audioContext.effectChain=t.audioContext.createGain(),t.audioContext.effectChain.connect(t.audioContext.destination),console.log("Audio Context Base Latency: ",t.audioContext.baseLatency),console.log("initializeVoices"),Object.keys(p).slice(0,12*t.state.octaves).forEach((function(e){t.voices[e]=new D(t.audioContext,p[e].freq,t.state.gain,t.state.shape,t.state.octave,t.state.transpose)}))},t.startAudioContext=function(){console.log("startAudioContext"),t.state.audioContextStarted||(t.audioContext.resume(),t.setState({audioContextStarted:!0}))},t.handleKeyDown=function(e){e.preventDefault();var a=e.key.toLowerCase(),n=E[t.state.layout][a];n?t.activatePianoKey(n):"control"!==a&&"command"!==a||t.setState({alternateControl:!0}),t.startAudioContext()},t.handleKeyUp=function(e){var a=e.key.toLowerCase();"control"!==a&&"command"!==a||t.setState({alternateControl:!1});var n=E[t.state.layout][a];t.deactivatePianoKey(n)},t.handleMouseDown=function(e){console.log("handleMouseDown",e),t.startAudioContext()},t.handleMouseUp=function(e){console.log("handleMouseUp",e),t.mouseDownOnKeys=!1,t.state.activeControl&&t.setState({activeControl:null,alternateControl:!1})},t.handleMouseLeave=function(e){},t.handleMouseOut=function(e){},t.handleMouseDownPianoKey=function(e){console.log("handleMouseDownPianoKey",e),0===e.button&&(t.activatePianoKey(e.target.title),t.mouseDownOnKeys=!0)},t.handleMouseUpPianoKey=function(e){console.log("handleMouseUpPianoKey",e),0===e.button&&(t.mouseDownOnKeys=!1,t.deactivatePianoKey(e.target.title))},t.handleMouseOverPianoKey=function(e){t.mouseDownOnKeys&&t.activatePianoKey(e.target.title)},t.handleMouseLeavePianoKey=function(e){t.mouseDownOnKeys&&t.deactivatePianoKey(e.target.title)},t.activatePianoKey=function(e){console.log("activatePianoKey",e),t.state.activeKeys.includes(e)||(t.startPlayingKey(e),t.setState((function(a){return{activeKeys:[].concat(Object(s.a)(a.activeKeys),[e])}})))},t.deactivatePianoKey=function(e){console.log("deactivatePianoKey",e),t.stopPlayingKey(e),t.setState((function(a){return{activeKeys:a.activeKeys.filter((function(a){return a!==e}))}}))},t.startPlayingKey=function(e){console.log("startPlayingKey",p[e]),t.voices[e]&&t.voices[e].start()},t.stopPlayingKey=function(e){console.log("stopPlayingKey",p[e]),t.voices[e]&&t.voices[e].stop()},t.handleMouseDownControl=function(e,a,n){console.log("handleMouseDownControl",e,a,n),0===n.button&&(t.state.alternateControl?t.resetControlValue(e):t.activateControl(e,a,n.screenY))},t.handleMouseUpControl=function(e,a){console.log("handleMouseUpControl",e,a),0===a.button&&t.deactivateControl(e)},t.handleMouseMoveControl=function(e){var a=t.state,n=a.alternateControl,o=a.activeControl,l=a.activeControlType,i=a.activeScreenY;if(o){var s=b[l].pixelStep||5;n&&(s*=10);var c=Math.abs(e.screenY-i),u=0;if(e.screenY-s>i?u=Math.round(-c/s):e.screenY+s<i&&(u=Math.round(c/s)),u){var m=Object(r.a)({},t.state);m.activeScreenY=e.screenY,t.setState(m),t.changeControlValue(o,u)}}},t.handleMouseWheelControl=function(e,a,n){console.log("handleMouseWheelControl",e,a,n.deltaY);var o=b[a].pixelStep,l=(n.deltaY>0?-1:1)*Math.round(5/o);return t.changeControlValue(e,l),!1},t.activateControl=function(e,a,n){console.log("activateControl",e,a,n),document.addEventListener("mousemove",t.handleMouseMoveControl),t.setState({activeControl:e,activeControlType:a,activeScreenY:n})},t.deactivateControl=function(e){console.log("deactiveControl",e),document.removeEventListener("mousemove",t.handleMouseMoveControl),t.setState({activeControl:null})},t.changeControlValue=function(e,a){console.log("changeControlValue",e,a);var n=Object(r.a)({},t.state),o=Q[e].range.min,l=Q[e].range.max,i=n[e]+a;i>l?i=l:i<o&&(i=o),n[e]=i,t.setState(n)},t.resetControlValue=function(e){var a=Object(r.a)({},t.state),n=Q[e].defaultValue;a[e]=n,t.setState(a)},t.layout=e.layout||0,t.octaves=e.octaves,t.voices={},(!t.octaves||!Number.isInteger(t.octaves)||t.octaves>10||t.octaves<4)&&(t.octaves=6),t.state={activeKeys:[],activeControl:null,activeControlType:null,activeScreenY:null,alternateControl:!1,audioContextStarted:!1,octaves:t.octaves,layout:t.layout,master:Q.master.defaultValue,attack:Q.attack.defaultValue,decay:Q.decay.defaultValue,sustain:Q.sustain.defaultValue,release:Q.release.defaultValue,shape:Q.shape.defaultValue,octave:Q.octave.defaultValue,transpose:Q.transpose.defaultValue,detune:Q.detune.defaultValue,gain:Q.gain.defaultValue},t}return Object(L.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{id:"pr-container"},o.a.createElement(O,Object.assign({},this.state,{handleMouseDownPianoKey:this.handleMouseDownPianoKey,handleMouseUpPianoKey:this.handleMouseUpPianoKey,handleMouseOverPianoKey:this.handleMouseOverPianoKey,handleMouseLeavePianoKey:this.handleMouseLeavePianoKey,handleMouseDownControl:this.handleMouseDownControl,handleMouseUpControl:this.handleMouseUpControl,handleMouseWheelControl:this.handleMouseWheelControl})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[10,1,2]]]);
//# sourceMappingURL=main.86f1965b.chunk.js.map