{"version":3,"sources":["assets/fonts/ds-digital/DS-DIGIT.ttf","assets/fonts/russo-one/Russo_One.ttf","assets/fonts/segoe-ui/segoe-ui-black.ttf","assets/fonts/segoe-ui/segoe-ui-bold.ttf","assets/fonts/segoe-ui/segoe-ui-light.ttf","assets/fonts/segoe-ui/segoe-ui-normal.ttf","assets/fonts/segoe-ui/segoe-ui-semibold.ttf","assets/fonts/segoe-ui/segoe-ui-semilight.ttf","js/statics.ts","js/globals.ts","js/utils.ts","js/classes/Output.js","styles/global.ts","styles/index.ts","components/PianoKeys.tsx","components/controls/button/ButtonLight.tsx","components/controls/index.ts","components/controls/button/ButtonControl.tsx","components/controls/DigitalControl.tsx","components/controls/KnobControl.tsx","components/controls/button/FileInputButtonControl.tsx","components/controls/button/InputRecorderButtonControl.tsx","components/MidiInputDropdown.tsx","components/Waveform.tsx","js/hooks.ts","components/Meter.tsx","App.jsx","serviceWorker.js","index.js"],"names":["module","exports","LAYOUTS","z","x","c","v","b","n","m","a","s","d","f","g","h","j","k","l","q","w","e","r","t","y","u","i","o","p","delete","1","2","3","4","5","6","7","8","9","0","backspace","insert","MODIFIER_KEYS","NOTES","name","freq","Math","pow","KEYS","KEYS_MAP","forEach","note","key","octave","push","MODES","SAMPLER","SYNTH","SAMPLES","SUPPORTED_SAMPLE_FORMATS","OSC_SHAPES","FILTER_TYPES","FILTER_ROLLOFFS","OVERSAMPLE_TYPES","CONTROL_TYPES","digital","pixelStep","knob","CONTROLS","layout","defaultValue","range","min","max","length","volume","polyphony","portamento","attack","decay","sustain","release","mode","Object","keys","sample","samplePitch","osc1Shape","osc1Octave","osc1Transpose","osc1Detune","osc1Gain","osc2Shape","osc2Octave","osc2Transpose","osc2Detune","osc2Gain","modOscShape","modOscFreq","modOscGain","filter1Type","filter1Rolloff","filter1Freq","filter1Q","filter2Type","filter2Rolloff","filter2Freq","filter2Q","vibratoDepth","vibratoFreq","vibratoWet","chorusSpread","chorusDepth","chorusDelay","chorusFreq","chorusType","chorusWet","crusherBits","crusherWet","distOver","distAmount","distWet","freqShifterAmount","freqShifterWet","pitcherPitch","pitcherWindow","pitcherWet","reverbSize","reverbDampening","reverbWet","CONTROLS_NAMES","CONTROLS_DEFAULT_VALUES","audioContext","Context","getWaveformFromArrayBuffer","arrayBuffer","Promise","resolve","reject","WaveformData","createFromAudio","audio_context","rawContext","array_buffer","scale","err","waveform","getNoteFromValues","transpose","getDecibelsFromValue","value","log10","getFrequencyFromValue","BASE_FREQ","getSecondsFromValue","Output","app","initializeDestination","destination","Destination","initializeMeter","meter","Meter","normalRange","connect","initializeVolume","vol","Volume","initializeReverb","reverb","Freeverb","initializePitcher","pitcher","PitchShift","initializeFreqShifter","freqShifter","FrequencyShifter","initializeDistortion","distortion","Distortion","initializeBitcrusher","bitcrusher","BitCrusher","initializeChorus","chorus","Chorus","initializeVibrato","vibrato","Vibrato","initializeFilters","filter1","Filter","filter2","initializeSampler","sampler","Sampler","C5","console","log","initializeOscillators","osc1","PolySynth","FMSynth","osc2","oscillators","initializeValues","envelope","freqs","playKey","playKeys","activeOsc1Freq","_osc1Octave","_osc1Transpose","activeOsc2Freq","_osc2Octave","_osc2Transpose","triggerAttack","_audioContext","now","loaded","stopKey","splice","indexOf","triggerRelease","stopKeys","releaseAll","retriggerKeys","stoppedFreqs","hasPortamento","set","control","this","_active","_app","_volume","_polyphony","_portamento","attackCurve","decayCurve","releaseCurve","modulationEnvelope","_attack","_decay","_sustain","_release","_mode","_sample","setState","sampleLoaded","sampleLoading","sampleBuffer","ToneAudioBuffer","add","_samplePitch","_osc1Shape","oscillator","type","_osc2Shape","_osc1Detune","detune","_osc2Detune","_osc1Gain","_osc2Gain","_modOscShape","modulation","_modOscFreq","harmonicity","_modOscGain","modulationIndex","_filter1Type","_filter2Type","_filter1Rolloff","rolloff","_filter2Rolloff","_filter1Freq","frequency","_filter2Freq","_filter1Q","Q","_filter2Q","_vibratoDepth","depth","_vibratoFreq","_vibratoWet","wet","_chorusSpread","spread","_chorusDepth","_chorusDelay","delay","_chorusFreq","_chorusType","_chorusWet","_distOver","oversample","_distAmount","_distWet","_freqShifterAmount","_freqShifterWet","_pitcherPitch","pitch","_pitcherWindow","windowSize","_pitcherWet","_reverbSize","roomSize","_reverbDampening","dampening","_reverbWet","createGlobalStyle","DS_Digital","Russo_One","Segoe_UI_Light","Segoe_UI_Semilight","Segoe_UI_Normal","Segoe_UI_Semibold","Segoe_UI_Bold","Segoe_UI_Black","palette","color","instrumentBorder","instrumentPlastic","label","keyBorder","keyWhite","keyWhiteActive","keyBlack","keyBlackActive","buttonBackground","buttonBackgroundActive","buttonBorder","buttonLightInactive","buttonLightActive","digitalVerticalBorder","digitalHorizontalBorder","digitalBackground","digitalText","digitalTextBackground","knobRubber","knobMetal","knobDial","meterLight","tooltipBackground","border","instrument","button","digitalDisplayVertical","digitalDisplayHorizontal","shadow","pianoOutset","keyInsetTop","keyInsetBottom","keyInsetLeft","keyInsetRight","keyWhiteOutset","keyWhiteOutsetActive","keyBlackOutset","keyBlackOutsetActive","buttonOutset","buttonLightInset","buttonLightOutset","rgba","knobInset","knobOutset","knobDialInset","knobDialOutset","font","pseudoElement","css","controlOutline","labelText","blinkingLight","keyframes","KeysContainer","styled","div","BlackKeysContainer","WhiteKeysContainer","Key","WhiteKey","active","BlackKey","Array","fill","map","offset","join","React","memo","activeKeys","octaves","handleMouseDownPianoKey","handleMouseUpPianoKey","handleMouseOverPianoKey","handleMouseLeavePianoKey","blackKeys","whiteKeys","slice","index","keySet","substring","endsWith","keyProps","title","includes","onMouseDown","onMouseUp","onMouseOver","onMouseLeave","prevProps","nextProps","sort","ButtonLight","size","blinking","ControlContainer","ControlLabel","ButtonContainer","Button","ButtonControl","children","handleClickControl","light","onClick","renderButtonLight","Container","DigitalControlInput","digitType","DigitalControlInputText","DigitalControlInputBackgroundText","DigitalControlInputForegroundText","digitTypes","backgroundText","foregroundTextStyle","val","styles","left","letterSpacing","DigitalControl","handleMouseDownControl","handleMouseUpControl","handleMouseWheelControl","useMemo","getDigitType","Number","isInteger","onWheel","style","KnobContainer","Knob","valueForRotate","ValueTooltip","visible","activeControl","Input","input","FileInputControl","inputRef","useRef","current","click","ref","onChange","async","file","files","fileUrl","URL","createObjectURL","accept","InputRecorderControl","useState","recording","setRecording","mediaRecorder","useEffect","navigator","mediaDevices","getUserMedia","audio","then","stream","MediaRecorder","start","stop","addEventListener","data","MidiInputContainer","MidiInputIcon","svg","MidiInputSelect","select","MidiInputSelectOption","option","MidiInputDropdown","handleMidiKeyDown","handleMidiKeyUp","inputs","setInputs","activeInputName","setActiveInputName","activeInput","WebMidi","enable","addListener","getNoteFromEvent","replace","id","viewBox","removeListener","selectedInput","find","target","WaveformContainer","WaveformCanvas","canvas","Waveform","sampleUrl","prevSampleUrl","usePrevious","waveformData","setWaveformData","canvasRef","fetch","fileFromUrl","handleNewSampleUrl","scaleY","amplitude","height","width","ctx","getContext","strokeStyle","fillStyle","shadowColor","shadowBlur","filter","getContextForWaveform","beginPath","lineXPos","lineTo","channel","max_sample","min_sample","closePath","stroke","drawWaveformOnCanvas","Step","STEPS","setValue","useAnimationFrame","getValue","round","Instrument","InstrumentRight","InstrumentLeft","InstrumentBottomLeft","InstrumentRightTop","InstrumentRightTopLeft","InstrumentRightTopRight","InstrumentRightBottom","GlobalSection","LogoSection","Logo","LogoSubtext","LogoSubtextBold","span","GlobalControls","EnvelopeControls","ControlSection","ControlWrapper","ControlWrapperVertical","ControlWrapperHorizontal","ControlsContainer","ControlsContainerHorizontal","ControlsSubContainer","controlOutlineLabel","ControlsContainerLabel","App","props","componentDidMount","initializeSoundEngine","registerEventListeners","componentWillUnmount","window","terminateSoundEngine","handleBlur","document","handleKeyDown","handleKeyUp","handleMouseDown","handleMouseUp","handleMouseLeave","handleMouseOut","preventDefault","output","dispose","resumeAudioContext","state","resume","activeModifierKey","keyPressed","toLowerCase","pianoKey","activatePianoKey","keyReleased","deactivatePianoKey","mouseDownOnKeys","prevState","setControlValue","activeControlType","resetControlValue","activateControl","screenY","deactivateControl","handleMouseMoveControl","event","activeScreenY","movement","abs","change","newState","changeControlValue","removeEventListener","getValueFromRange","sharedControlProps","fillRule","marginLeft","KnobControl","FileInputButtonControl","InputRecorderButtonControl","Component","Boolean","location","hostname","match","ReactDOM","render","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.898bfed8.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/DS-DIGIT.223f2246.ttf\";","module.exports = __webpack_public_path__ + \"static/media/Russo_One.22432e60.ttf\";","module.exports = __webpack_public_path__ + \"static/media/segoe-ui-black.a7e432d8.ttf\";","module.exports = __webpack_public_path__ + \"static/media/segoe-ui-bold.60570a3f.ttf\";","module.exports = __webpack_public_path__ + \"static/media/segoe-ui-light.11fd79bc.ttf\";","module.exports = __webpack_public_path__ + \"static/media/segoe-ui-normal.623c7118.ttf\";","module.exports = __webpack_public_path__ + \"static/media/segoe-ui-semibold.5040e8da.ttf\";","module.exports = __webpack_public_path__ + \"static/media/segoe-ui-semilight.c5e631d3.ttf\";","export const LAYOUTS = [\r\n\t{\r\n\t\t// MAJOR\r\n\t\tz: 'C0',\r\n\t\tx: 'D0',\r\n\t\tc: 'E0',\r\n\t\tv: 'F0',\r\n\t\tb: 'G0',\r\n\t\tn: 'A0',\r\n\t\tm: 'B0',\r\n\t\ta: 'C1',\r\n\t\ts: 'D1',\r\n\t\td: 'E1',\r\n\t\tf: 'F1',\r\n\t\tg: 'G1',\r\n\t\th: 'A1',\r\n\t\tj: 'B1',\r\n\t\tk: 'C2',\r\n\t\tl: 'D2',\r\n\t\t';': 'E2',\r\n\t\t\"'\": 'F2',\r\n\t\t',': 'C1',\r\n\t\t'.': 'D1',\r\n\t\t'/': 'E1',\r\n\t\tq: 'C2',\r\n\t\tw: 'D2',\r\n\t\te: 'E2',\r\n\t\tr: 'F2',\r\n\t\tt: 'G2',\r\n\t\ty: 'A2',\r\n\t\tu: 'B2',\r\n\t\ti: 'C3',\r\n\t\to: 'D3',\r\n\t\tp: 'E3',\r\n\t\t'[': 'F3',\r\n\t\t']': 'G3',\r\n\t\t'\\\\': 'A3',\r\n    delete: 'B3',\r\n    1: 'C3',\r\n    2: 'D3',\r\n    3: 'E3',\r\n    4: 'F3',\r\n    5: 'G3',\r\n    6: 'A3',\r\n    7: 'B3',\r\n    8: 'C4',\r\n    9: 'D4',\r\n    0: 'E4',\r\n    '-': 'F4',\r\n    '=': 'G4',\r\n    backspace: 'A4'\r\n\t},\r\n\t{\r\n\t\t// MINOR\r\n\t\tz: 'C0',\r\n\t\ts: 'C0',\r\n\t\tx: 'D0',\r\n\t\td: 'D0',\r\n\t\tc: 'E0',\r\n\t\tv: 'F0',\r\n\t\tg: 'F0',\r\n\t\tb: 'G0',\r\n\t\th: 'G0',\r\n\t\tn: 'A0',\r\n\t\tj: 'A0',\r\n\t\tm: 'B0',\r\n\t\t',': 'C1',\r\n\t\tl: 'C1',\r\n\t\t'.': 'D1',\r\n\t\t';': 'D1',\r\n\t\t'/': 'E1',\r\n\t\tq: 'C1',\r\n\t\t'2': 'C1',\r\n\t\tw: 'D1',\r\n\t\t'3': 'D1',\r\n\t\te: 'E1',\r\n\t\tr: 'F1',\r\n\t\t'5': 'F1',\r\n\t\tt: 'G1',\r\n\t\t'6': 'G1',\r\n\t\ty: 'A1',\r\n\t\t'7': 'A1',\r\n\t\tu: 'B1',\r\n\t\ti: 'C2',\r\n\t\t'9': 'C2',\r\n\t\to: 'D2',\r\n\t\t'0': 'D2',\r\n\t\tp: 'E2',\r\n\t\t'[': 'F2',\r\n\t\t'=': 'F2',\r\n\t\t']': 'G2',\r\n\t\tbackspace: 'G2',\r\n\t\t'\\\\': 'A2',\r\n\t\tinsert: 'A2',\r\n    delete: 'B2'\r\n\t},\r\n];\r\n\r\nexport const MODIFIER_KEYS = ['control', 'command', 'meta'];\r\nexport const BASE_FREQ = 16.3516;\r\nexport const FREQ_MULTIPLIER = 1.0594630943593;\r\nexport const NOTES = [\r\n\t{\r\n\t\tname: 'C',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 0),\r\n\t},\r\n\t{\r\n\t\tname: 'C',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 1),\r\n\t},\r\n\t{\r\n\t\tname: 'D',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 2),\r\n\t},\r\n\t{\r\n\t\tname: 'D',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 3),\r\n\t},\r\n\t{\r\n\t\tname: 'E',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 4),\r\n\t},\r\n\t{\r\n\t\tname: 'F',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 5),\r\n\t},\r\n\t{\r\n\t\tname: 'F',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 6),\r\n\t},\r\n\t{\r\n\t\tname: 'G',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 7),\r\n\t},\r\n\t{\r\n\t\tname: 'G',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 8),\r\n\t},\r\n\t{\r\n\t\tname: 'A',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 9),\r\n\t},\r\n\t{\r\n\t\tname: 'A',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 10),\r\n\t},\r\n\t{\r\n\t\tname: 'B',\r\n\t\tfreq: BASE_FREQ * Math.pow(FREQ_MULTIPLIER, 11),\r\n\t},\r\n];\r\n\r\ntype Key = {\r\n\tname: string;\r\n\tfreq: number;\r\n\toctave: number;\r\n};\r\nexport const KEYS: Key[] = [];\r\n\r\ntype KeysMap = {\r\n\t[key: string]: Key;\r\n};\r\nexport const KEYS_MAP: KeysMap = {};\r\nfor (let i = 0; i < 10; i++) {\r\n\tNOTES.forEach((note) => {\r\n\t\tconst key = {\r\n\t\t\tname: note.name + i,\r\n\t\t\tfreq: note.freq * Math.pow(2, i),\r\n\t\t\toctave: i,\r\n\t\t};\r\n\t\tKEYS.push(key);\r\n\t\tKEYS_MAP[key.name] = key;\r\n\t});\r\n}\r\n\r\nexport const MODES = {\r\n\tSAMPLER: 0,\r\n\tSYNTH: 1,\r\n};\r\n\r\nexport const SAMPLES = ['/assets/audio/samples/CS_Synth_Hit_9_G.mp3'];\r\n\r\nexport const SUPPORTED_SAMPLE_FORMATS = ['audio/wav', 'audio/mp3', 'audio/ogg'];\r\n\r\nexport const OSC_SHAPES = ['sawtooth', 'square', 'triangle', 'sine'];\r\n\r\nexport const FILTER_TYPES = [\r\n\t'lowpass',\r\n\t'highpass',\r\n\t'bandpass',\r\n\t'lowshelf',\r\n\t'highshelf',\r\n\t'peaking',\r\n\t'notch',\r\n];\r\n\r\nexport const FILTER_ROLLOFFS = [-12, -24, -48, -96];\r\n\r\nexport const OVERSAMPLE_TYPES = ['none', '2x', '4x'];\r\n\r\nexport const CONTROL_TYPES = {\r\n\tdigital: {\r\n\t\tname: 'digital',\r\n\t\tpixelStep: 10,\r\n\t},\r\n\tknob: {\r\n\t\tname: 'knob',\r\n\t\tpixelStep: 3,\r\n\t},\r\n};\r\n\r\ntype Controls = {\r\n\t[key: string]: {\r\n\t\tdefaultValue: number;\r\n\t\trange: {\r\n\t\t\tmin: number;\r\n\t\t\tmax: number;\r\n\t\t};\r\n\t};\r\n};\r\n\r\nexport const CONTROLS: Controls = {\r\n\t/* GLOBAL */\r\n\tlayout: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: LAYOUTS.length - 1,\r\n\t\t},\r\n\t},\r\n\tvolume: {\r\n\t\tdefaultValue: 50,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tpolyphony: {\r\n\t\tdefaultValue: 9,\r\n\t\trange: {\r\n\t\t\tmin: 1,\r\n\t\t\tmax: 9,\r\n\t\t},\r\n\t},\r\n\tportamento: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\t/* ENVELOPE */\r\n\tattack: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tdecay: {\r\n\t\tdefaultValue: 50,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tsustain: {\r\n\t\tdefaultValue: 75,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\trelease: {\r\n\t\tdefaultValue: 25,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tmode: {\r\n\t\tdefaultValue: MODES.SYNTH,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: Object.keys(MODES).length - 1,\r\n\t\t},\r\n\t},\r\n\t/* SAMPLER */\r\n\tsample: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: SAMPLES.length - 1,\r\n\t\t},\r\n\t},\r\n\tsamplePitch: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: -50,\r\n\t\t\tmax: 50,\r\n\t\t},\r\n\t},\r\n\t/* SYNTH */\r\n\tosc1Shape: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: OSC_SHAPES.length - 1,\r\n\t\t},\r\n\t},\r\n\tosc1Octave: {\r\n\t\tdefaultValue: 5,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 9,\r\n\t\t},\r\n\t},\r\n\tosc1Transpose: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: -9,\r\n\t\t\tmax: 9,\r\n\t\t},\r\n\t},\r\n\tosc1Detune: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: -100,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tosc1Gain: {\r\n\t\tdefaultValue: 100,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tosc2Shape: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: OSC_SHAPES.length - 1,\r\n\t\t},\r\n\t},\r\n\tosc2Octave: {\r\n\t\tdefaultValue: 5,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 9,\r\n\t\t},\r\n\t},\r\n\tosc2Transpose: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: -9,\r\n\t\t\tmax: 9,\r\n\t\t},\r\n\t},\r\n\tosc2Detune: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: -100,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tosc2Gain: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tmodOscShape: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: OSC_SHAPES.length - 1,\r\n\t\t},\r\n\t},\r\n\tmodOscFreq: {\r\n\t\tdefaultValue: 50,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tmodOscGain: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\t/* FILTERS */\r\n\tfilter1Type: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: FILTER_TYPES.length - 1,\r\n\t\t},\r\n\t},\r\n\tfilter1Rolloff: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: FILTER_ROLLOFFS.length - 1,\r\n\t\t},\r\n\t},\r\n\tfilter1Freq: {\r\n\t\tdefaultValue: 100,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tfilter1Q: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tfilter2Type: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: FILTER_TYPES.length - 1,\r\n\t\t},\r\n\t},\r\n\tfilter2Rolloff: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: FILTER_ROLLOFFS.length - 1,\r\n\t\t},\r\n\t},\r\n\tfilter2Freq: {\r\n\t\tdefaultValue: 100,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tfilter2Q: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\t/* VIBRATO */\r\n\tvibratoDepth: {\r\n\t\tdefaultValue: 100,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tvibratoFreq: {\r\n\t\tdefaultValue: 50,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tvibratoWet: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\t/* CHORUS */\r\n\tchorusSpread: {\r\n\t\tdefaultValue: 180,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 359,\r\n\t\t},\r\n\t},\r\n\tchorusDepth: {\r\n\t\tdefaultValue: 50,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tchorusDelay: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tchorusFreq: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tchorusType: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: OSC_SHAPES.length - 1,\r\n\t\t},\r\n\t},\r\n\tchorusWet: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\t/* BIT CRUSHER */\r\n\tcrusherBits: {\r\n\t\tdefaultValue: 4,\r\n\t\trange: {\r\n\t\t\tmin: 1,\r\n\t\t\tmax: 8,\r\n\t\t},\r\n\t},\r\n\tcrusherWet: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\t/* DISTORTION */\r\n\tdistOver: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: OVERSAMPLE_TYPES.length - 1,\r\n\t\t},\r\n\t},\r\n\tdistAmount: {\r\n\t\tdefaultValue: 50,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tdistWet: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\t/* FREQUENCY SHIFTER */\r\n\tfreqShifterAmount: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tfreqShifterWet: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\t/* PITCHER */\r\n\tpitcherPitch: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: -60,\r\n\t\t\tmax: 60,\r\n\t\t},\r\n\t},\r\n\tpitcherWindow: {\r\n\t\tdefaultValue: 100,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\tpitcherWet: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\t/* REVERB */\r\n\treverbSize: {\r\n\t\tdefaultValue: 50,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\treverbDampening: {\r\n\t\tdefaultValue: 50,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n\treverbWet: {\r\n\t\tdefaultValue: 0,\r\n\t\trange: {\r\n\t\t\tmin: 0,\r\n\t\t\tmax: 100,\r\n\t\t},\r\n\t},\r\n};\r\n\r\nexport const CONTROLS_NAMES: string[] = [];\r\nexport const CONTROLS_DEFAULT_VALUES: {[key: string]: number} = {};\r\nObject.keys(CONTROLS).forEach((k) => {\r\n\tCONTROLS_NAMES.push(k);\r\n\tCONTROLS_DEFAULT_VALUES[k] = CONTROLS[k].defaultValue;\r\n});\r\n","import {Context} from 'tone';\r\n\r\nexport const audioContext = new Context({});\r\n","import WaveformData from 'waveform-data';\r\nimport {BASE_FREQ, FREQ_MULTIPLIER} from './statics';\r\nimport {audioContext} from './globals';\r\n\r\nexport const getWaveformFromArrayBuffer = (arrayBuffer: ArrayBuffer) =>\r\n\tnew Promise<WaveformData>((resolve, reject) => {\r\n\t\tWaveformData.createFromAudio(\r\n\t\t\t{\r\n\t\t\t\taudio_context: audioContext.rawContext as AudioContext,\r\n\t\t\t\tarray_buffer: arrayBuffer,\r\n\t\t\t\tscale: 32,\r\n\t\t\t},\r\n\t\t\t(err, waveform) => {\r\n\t\t\t\terr && reject(err);\r\n\t\t\t\tresolve(waveform);\r\n\t\t\t}\r\n\t\t);\r\n\t});\r\n\r\nexport const getValueFromRange = (value: number, range: {min: number; max: number}) => {\r\n\tconst {min, max} = range;\r\n\tif (value > max) return max;\r\n\telse if (value < min) return min;\r\n\treturn value;\r\n};\r\n\r\n// (base Hz, octave, transpose) --> (pitched Hz)\r\nexport const getNoteFromValues = (freq: number, octave: number, transpose: number) => {\r\n\tconst octavedFrequency = (freq * Math.pow(2, octave)) / 8;\r\n\treturn octavedFrequency * Math.pow(FREQ_MULTIPLIER, transpose);\r\n};\r\n\r\n// (0 - 100) --> (-Infinity - 0)\r\nexport const getDecibelsFromValue = (value: number) => 20 * Math.log10(value / 100);\r\n\r\n// (0 - 100) --> (0 - 21031)\r\nexport const getFrequencyFromValue = (value: number) =>\r\n\tBASE_FREQ * 4 * Math.pow(FREQ_MULTIPLIER, value) - BASE_FREQ * 4;\r\n\r\n// (0 - 100) --> (0.0001 - 4)\r\nexport const getSecondsFromValue = (value: number) => Math.pow(value, 2) / 2500 || 0.0001;\r\n\r\n// (0 - 100) --> (0.03125 - 32)\r\nexport const getHarmonicityFromValue = (value: number) => Math.pow(2, (value - 50) / 10);\r\n","import {\r\n\tBitCrusher,\r\n\tChorus,\r\n\tDestination,\r\n\tDistortion,\r\n\tFilter,\r\n\tFreeverb,\r\n\tFrequencyShifter,\r\n\tFMSynth,\r\n\tMeter,\r\n\tPitchShift,\r\n\tPolySynth,\r\n\tSampler,\r\n\tToneAudioBuffer,\r\n\tVibrato,\r\n\tVolume,\r\n} from 'tone';\r\nimport {\r\n\tCONTROLS_DEFAULT_VALUES,\r\n\tFILTER_ROLLOFFS,\r\n\tFILTER_TYPES,\r\n\tMODES,\r\n\tOSC_SHAPES,\r\n\tOVERSAMPLE_TYPES,\r\n\tSAMPLES,\r\n} from '../statics';\r\nimport {\r\n\tgetDecibelsFromValue,\r\n\tgetFrequencyFromValue,\r\n\tgetHarmonicityFromValue,\r\n\tgetNoteFromValues,\r\n\tgetSecondsFromValue,\r\n} from '../utils';\r\n\r\nexport default class Output {\r\n\tconstructor(app, audioContext) {\r\n\t\tthis._active = false;\r\n\t\tthis._app = app;\r\n\t\tthis._audioContext = audioContext;\r\n\r\n\t\tObject.keys(CONTROLS_DEFAULT_VALUES).forEach((k) => {\r\n\t\t\tthis[`_${k}`] = CONTROLS_DEFAULT_VALUES[k];\r\n\t\t});\r\n\r\n\t\tthis.initializeDestination();\r\n\t\tthis.initializeMeter();\r\n\t\tthis.initializeVolume();\r\n\t\tthis.initializeReverb();\r\n\t\tthis.initializePitcher();\r\n\t\tthis.initializeFreqShifter();\r\n\t\tthis.initializeDistortion();\r\n\t\t// this.initializeBitcrusher();\r\n\t\tthis.initializeChorus();\r\n\t\tthis.initializeVibrato();\r\n\t\tthis.initializeFilters();\r\n\t\tthis.initializeSampler();\r\n\t\tthis.initializeOscillators();\r\n\t\tthis.initializeValues();\r\n\t}\r\n\r\n\tinitializeDestination = () => {\r\n\t\tthis.destination = Destination;\r\n\t};\r\n\r\n\tinitializeMeter = () => {\r\n\t\tthis.meter = new Meter(0.5);\r\n\t\tthis.meter.normalRange = true;\r\n\t\tthis.meter.connect(this.destination);\r\n\t};\r\n\r\n\tinitializeVolume = () => {\r\n\t\tthis.vol = new Volume();\r\n\t\tthis.vol.connect(this.meter);\r\n\t};\r\n\r\n\tinitializeReverb = () => {\r\n\t\tthis.reverb = new Freeverb();\r\n\t\tthis.reverb.connect(this.vol);\r\n\t};\r\n\r\n\tinitializePitcher = () => {\r\n\t\tthis.pitcher = new PitchShift();\r\n\t\tthis.pitcher.connect(this.reverb);\r\n\t};\r\n\r\n\tinitializeFreqShifter = () => {\r\n\t\tthis.freqShifter = new FrequencyShifter();\r\n\t\tthis.freqShifter.connect(this.pitcher);\r\n\t};\r\n\r\n\tinitializeDistortion = () => {\r\n\t\tthis.distortion = new Distortion();\r\n\t\tthis.distortion.connect(this.freqShifter);\r\n\t};\r\n\r\n\tinitializeBitcrusher = () => {\r\n\t\tthis.bitcrusher = new BitCrusher();\r\n\t\tthis.bitcrusher.connect(this.distortion);\r\n\t};\r\n\r\n\tinitializeChorus = () => {\r\n\t\tthis.chorus = new Chorus();\r\n\t\tthis.chorus.connect(this.distortion);\r\n\t};\r\n\r\n\tinitializeVibrato = () => {\r\n\t\tthis.vibrato = new Vibrato();\r\n\t\tthis.vibrato.connect(this.chorus);\r\n\t};\r\n\r\n\tinitializeFilters = () => {\r\n\t\tthis.filter1 = new Filter(0, 'lowpass', -12);\r\n\t\tthis.filter2 = new Filter(0, 'lowpass', -12);\r\n\t\tthis.filter1.connect(this.filter2);\r\n\t\tthis.filter2.connect(this.vibrato);\r\n\t};\r\n\r\n\tinitializeSampler = () => {\r\n\t\tthis.sampler = new Sampler(\r\n\t\t\t{\r\n\t\t\t\tC5: SAMPLES[0],\r\n\t\t\t},\r\n\t\t\t(e) => console.log('sampler buffers loaded: ', e)\r\n\t\t\t// './src/assets/audio/samples/'\r\n\t\t);\r\n\t\tthis.sampler.connect(this.filter1);\r\n\t};\r\n\r\n\tinitializeOscillators = () => {\r\n\t\tthis.osc1 = new PolySynth(FMSynth);\r\n\t\tthis.osc2 = new PolySynth(FMSynth);\r\n\t\tthis.oscillators = [this.osc1, this.osc2];\r\n\t\tthis.oscillators.forEach((o) => {\r\n\t\t\to.connect(this.filter1);\r\n\t\t});\r\n\t};\r\n\r\n\tinitializeValues = () => {\r\n\t\tObject.keys(CONTROLS_DEFAULT_VALUES).forEach((k) => {\r\n\t\t\tif (k !== 'polyphony') {\r\n\t\t\t\tthis[k] = this[`_${k}`];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.envelope = 'set';\r\n\t\tthis.freqs = [];\r\n\t};\r\n\r\n\tplayKey = (freq) => {\r\n\t\t// console.log('playKey', freq);\r\n\r\n\t\tthis.playKeys([freq]);\r\n\t};\r\n\r\n\tplayKeys = (freqs = []) => {\r\n\t\t// console.log('playKey', freqs);\r\n\r\n\t\tfreqs.forEach((freq) => {\r\n\t\t\tthis.freqs.push(freq);\r\n\r\n\t\t\tif (this.mode === MODES.SYNTH) {\r\n\t\t\t\tconst activeOsc1Freq = getNoteFromValues(freq, this._osc1Octave, this._osc1Transpose);\r\n\t\t\t\tconst activeOsc2Freq = getNoteFromValues(freq, this._osc2Octave, this._osc2Transpose);\r\n\t\t\t\tthis.osc1.triggerAttack(activeOsc1Freq, this._audioContext.now(), 1);\r\n\t\t\t\tthis.osc2.triggerAttack(activeOsc2Freq, this._audioContext.now(), 1);\r\n\t\t\t} else if (this.mode === MODES.SAMPLER && this.sampler.loaded) {\r\n\t\t\t\tthis.sampler.triggerAttack(\r\n\t\t\t\t\tgetNoteFromValues(freq, 6, this.samplePitch),\r\n\t\t\t\t\tthis._audioContext.now(),\r\n\t\t\t\t\t1\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tstopKey = (freq) => {\r\n\t\t// console.log('stopKey', freq);\r\n\r\n\t\tthis.freqs.splice(this.freqs.indexOf(freq), 1);\r\n\r\n\t\tif (this.mode === MODES.SYNTH) {\r\n\t\t\tconst activeOsc1Freq = getNoteFromValues(freq, this._osc1Octave, this._osc1Transpose);\r\n\t\t\tconst activeOsc2Freq = getNoteFromValues(freq, this._osc2Octave, this._osc2Transpose);\r\n\t\t\tthis.osc1.triggerRelease(activeOsc1Freq, this._audioContext.now());\r\n\t\t\tthis.osc2.triggerRelease(activeOsc2Freq, this._audioContext.now());\r\n\t\t} else if (this.mode === MODES.SAMPLER) {\r\n\t\t\tthis.sampler.triggerRelease(\r\n\t\t\t\tgetNoteFromValues(freq, 6, this.samplePitch),\r\n\t\t\t\tthis._audioContext.now()\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\tstopKeys = () => {\r\n\t\t// console.log('stopKeys');\r\n\r\n\t\tthis.osc1.releaseAll();\r\n\t\tthis.osc2.releaseAll();\r\n\t\tthis.sampler.releaseAll();\r\n\t\tthis.freqs = [];\r\n\t};\r\n\r\n\tretriggerKeys = () => {\r\n\t\t// console.log('retriggerKeys');\r\n\r\n\t\tthis.stoppedFreqs = this.freqs;\r\n\t\tthis.stopKeys();\r\n\t\tthis.playKeys(this.stoppedFreqs);\r\n\t};\r\n\r\n\thasPortamento = () => this.portamento !== 0;\r\n\r\n\t// GLOBAL\r\n\r\n\tget volume() {\r\n\t\treturn getDecibelsFromValue(this._volume);\r\n\t}\r\n\tset volume(x) {\r\n\t\tthis._volume = x;\r\n\t\tthis.vol.volume.value = this.volume;\r\n\t}\r\n\r\n\tget polyphony() {\r\n\t\treturn this._polyphony;\r\n\t}\r\n\tset polyphony(x) {\r\n\t\tthis._polyphony = x;\r\n\t\tthis.initializeOscillators();\r\n\t\tthis.initializeValues();\r\n\t}\r\n\r\n\tget portamento() {\r\n\t\treturn this._portamento / 500;\r\n\t}\r\n\tset portamento(x) {\r\n\t\tthis._portamento = x;\r\n\t\tthis.oscillators.forEach((o) => o.set({portamento: this.portamento}));\r\n\t}\r\n\r\n\tget envelope() {\r\n\t\treturn {\r\n\t\t\tattackCurve: 'exponential',\r\n\t\t\tdecayCurve: 'exponential',\r\n\t\t\treleaseCurve: 'exponential',\r\n\t\t\tattack: this.attack,\r\n\t\t\tdecay: this.decay,\r\n\t\t\tsustain: this.sustain,\r\n\t\t\trelease: this.release,\r\n\t\t};\r\n\t}\r\n\tset envelope(x = null) {\r\n\t\tthis.oscillators.forEach((o) =>\r\n\t\t\to.set({\r\n\t\t\t\tenvelope: this.envelope,\r\n\t\t\t\tmodulationEnvelope: this.envelope,\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tget attack() {\r\n\t\treturn getSecondsFromValue(this._attack);\r\n\t}\r\n\tset attack(x) {\r\n\t\tthis._attack = x;\r\n\r\n\t\tthis.oscillators.forEach((o) => o.set({envelope: {attack: this.attack}}));\r\n\t\tthis.sampler.attack = this.attack;\r\n\t}\r\n\r\n\tget decay() {\r\n\t\treturn getSecondsFromValue(this._decay);\r\n\t}\r\n\tset decay(x) {\r\n\t\tthis._decay = x;\r\n\r\n\t\tthis.oscillators.forEach((o) => o.set({envelope: {decay: this.decay}}));\r\n\t\tthis.sampler.decay = this.decay;\r\n\t}\r\n\r\n\tget sustain() {\r\n\t\treturn this._sustain / 100;\r\n\t}\r\n\tset sustain(x) {\r\n\t\tthis._sustain = x;\r\n\r\n\t\tthis.oscillators.forEach((o) => o.set({envelope: {sustain: this.sustain}}));\r\n\t\tthis.sampler.sustain = this.sustain;\r\n\t}\r\n\r\n\tget release() {\r\n\t\treturn getSecondsFromValue(this._release);\r\n\t}\r\n\tset release(x) {\r\n\t\tthis._release = x;\r\n\t\tthis.oscillators.forEach((o) => o.set({envelope: {release: this.release}}));\r\n\t\tthis.sampler.release = this.release;\r\n\t}\r\n\r\n\tget mode() {\r\n\t\treturn this._mode;\r\n\t}\r\n\tset mode(x) {\r\n\t\tthis._mode = x;\r\n\t\tthis.stopKeys();\r\n\t}\r\n\r\n\t// SAMPLER\r\n\r\n\tget sample() {\r\n\t\treturn SAMPLES[this._sample] || this._sample;\r\n\t}\r\n\tset sample(x) {\r\n\t\tthis._sample = x;\r\n\r\n\t\tthis._app.setState({\r\n\t\t\tsampleLoaded: false,\r\n\t\t\tsampleLoading: true,\r\n\t\t});\r\n\r\n\t\tconst sampleBuffer = new ToneAudioBuffer(\r\n\t\t\tthis.sample,\r\n\t\t\t() => {\r\n\t\t\t\tconsole.log('buffer loaded');\r\n\t\t\t\tthis.sampler.add('C5', sampleBuffer, () => {\r\n\t\t\t\t\tconsole.log('sample loaded');\r\n\t\t\t\t\tthis._app.setState({\r\n\t\t\t\t\t\tsampleLoaded: true,\r\n\t\t\t\t\t\tsampleLoading: false,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t(e) => {\r\n\t\t\t\tconsole.log('error loading sample: ', e);\r\n\t\t\t\tthis._app.setState({\r\n\t\t\t\t\tsampleLoaded: false,\r\n\t\t\t\t\tsampleLoading: false,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tget samplePitch() {\r\n\t\treturn this._samplePitch;\r\n\t}\r\n\tset samplePitch(x) {\r\n\t\tthis._samplePitch = x;\r\n\t\tthis.retriggerKeys();\r\n\t}\r\n\r\n\t// OSC\r\n\r\n\tget osc1Shape() {\r\n\t\treturn OSC_SHAPES[this._osc1Shape];\r\n\t}\r\n\tset osc1Shape(x) {\r\n\t\tthis._osc1Shape = x;\r\n\t\tthis.osc1.set({oscillator: {type: this.osc1Shape}});\r\n\t}\r\n\r\n\tget osc2Shape() {\r\n\t\treturn OSC_SHAPES[this._osc2Shape];\r\n\t}\r\n\tset osc2Shape(x) {\r\n\t\tthis._osc2Shape = x;\r\n\t\tthis.osc2.set({oscillator: {type: this.osc2Shape}});\r\n\t}\r\n\r\n\tget osc1Octave() {\r\n\t\treturn this._osc1Octave;\r\n\t}\r\n\tset osc1Octave(x) {\r\n\t\tthis._osc1Octave = x;\r\n\t\tthis.retriggerKeys();\r\n\t}\r\n\r\n\tget osc2Octave() {\r\n\t\treturn this._osc2Octave;\r\n\t}\r\n\tset osc2Octave(x) {\r\n\t\tthis._osc2Octave = x;\r\n\t\tthis.retriggerKeys();\r\n\t}\r\n\r\n\tget osc1Transpose() {\r\n\t\treturn this._osc1Transpose;\r\n\t}\r\n\tset osc1Transpose(x) {\r\n\t\tthis._osc1Transpose = x;\r\n\t\tthis.retriggerKeys();\r\n\t}\r\n\r\n\tget osc2Transpose() {\r\n\t\treturn this._osc2Transpose;\r\n\t}\r\n\tset osc2Transpose(x) {\r\n\t\tthis._osc2Transpose = x;\r\n\t\tthis.retriggerKeys();\r\n\t}\r\n\r\n\tget osc1Detune() {\r\n\t\treturn this._osc1Detune;\r\n\t}\r\n\tset osc1Detune(x) {\r\n\t\tthis._osc1Detune = x;\r\n\t\tthis.osc1.set({detune: this.osc1Detune});\r\n\t}\r\n\r\n\tget osc2Detune() {\r\n\t\treturn this._osc2Detune;\r\n\t}\r\n\tset osc2Detune(x) {\r\n\t\tthis._osc2Detune = x;\r\n\t\tthis.osc2.set({detune: this.osc2Detune});\r\n\t}\r\n\r\n\tget osc1Gain() {\r\n\t\treturn getDecibelsFromValue(this._osc1Gain);\r\n\t}\r\n\tset osc1Gain(x) {\r\n\t\tthis._osc1Gain = x;\r\n\t\tthis.osc1.set({volume: this.osc1Gain});\r\n\t}\r\n\tget osc2Gain() {\r\n\t\treturn getDecibelsFromValue(this._osc2Gain);\r\n\t}\r\n\tset osc2Gain(x) {\r\n\t\tthis._osc2Gain = x;\r\n\t\tthis.osc2.set({volume: this.osc2Gain});\r\n\t}\r\n\r\n\t// MOD OSC\r\n\r\n\tget modOscShape() {\r\n\t\treturn OSC_SHAPES[this._modOscShape];\r\n\t}\r\n\tset modOscShape(x) {\r\n\t\tthis._modOscShape = x;\r\n\t\tthis.oscillators.forEach((o) => o.set({modulation: {type: this.modOscShape}}));\r\n\t}\r\n\r\n\tget modOscFreq() {\r\n\t\treturn getHarmonicityFromValue(this._modOscFreq);\r\n\t}\r\n\tset modOscFreq(x) {\r\n\t\tthis._modOscFreq = x;\r\n\t\tthis.oscillators.forEach((o) => o.set({harmonicity: this.modOscFreq}));\r\n\t}\r\n\r\n\tget modOscGain() {\r\n\t\treturn this._modOscGain;\r\n\t}\r\n\tset modOscGain(x) {\r\n\t\tthis._modOscGain = x;\r\n\t\tthis.oscillators.forEach((o) => o.set({modulationIndex: this.modOscGain}));\r\n\t}\r\n\r\n\t// FILTER\r\n\r\n\tget filter1Type() {\r\n\t\treturn FILTER_TYPES[this._filter1Type];\r\n\t}\r\n\tset filter1Type(x) {\r\n\t\tthis._filter1Type = x;\r\n\t\tthis.filter1.type = this.filter1Type;\r\n\t}\r\n\r\n\tget filter2Type() {\r\n\t\treturn FILTER_TYPES[this._filter2Type];\r\n\t}\r\n\tset filter2Type(x) {\r\n\t\tthis._filter2Type = x;\r\n\t\tthis.filter2.type = this.filter2Type;\r\n\t}\r\n\r\n\tget filter1Rolloff() {\r\n\t\treturn FILTER_ROLLOFFS[this._filter1Rolloff];\r\n\t}\r\n\tset filter1Rolloff(x) {\r\n\t\tthis._filter1Rolloff = x;\r\n\t\tthis.filter1.rolloff = this.filter1Rolloff;\r\n\t}\r\n\r\n\tget filter2Rolloff() {\r\n\t\treturn FILTER_ROLLOFFS[this._filter2Rolloff];\r\n\t}\r\n\tset filter2Rolloff(x) {\r\n\t\tthis._filter2Rolloff = x;\r\n\t\tthis.filter2.rolloff = this.filter2Rolloff;\r\n\t}\r\n\r\n\tget filter1Freq() {\r\n\t\treturn getFrequencyFromValue(this._filter1Freq);\r\n\t}\r\n\tset filter1Freq(x) {\r\n\t\tthis._filter1Freq = x;\r\n\t\tthis.filter1.frequency.value = this.filter1Freq;\r\n\t}\r\n\r\n\tget filter2Freq() {\r\n\t\treturn getFrequencyFromValue(this._filter2Freq);\r\n\t}\r\n\tset filter2Freq(x) {\r\n\t\tthis._filter2Freq = x;\r\n\t\tthis.filter2.frequency.value = this.filter2Freq;\r\n\t}\r\n\r\n\tget filter1Q() {\r\n\t\treturn Math.pow(this._filter1Q, 2) / 250;\r\n\t}\r\n\tset filter1Q(x) {\r\n\t\tthis._filter1Q = x;\r\n\t\tthis.filter1.Q.value = this.filter1Q;\r\n\t}\r\n\r\n\tget filter2Q() {\r\n\t\treturn Math.pow(this._filter2Q, 2) / 250;\r\n\t}\r\n\tset filter2Q(x) {\r\n\t\tthis._filter2Q = x;\r\n\t\tthis.filter2.Q.value = this.filter2Q;\r\n\t}\r\n\r\n\t// VIBRATO\r\n\r\n\tget vibratoDepth() {\r\n\t\treturn this._vibratoDepth / 100;\r\n\t}\r\n\tset vibratoDepth(x) {\r\n\t\tthis._vibratoDepth = x;\r\n\t\tthis.vibrato.depth.value = this.vibratoDepth;\r\n\t}\r\n\r\n\tget vibratoFreq() {\r\n\t\treturn this._vibratoFreq / 10;\r\n\t}\r\n\tset vibratoFreq(x) {\r\n\t\tthis._vibratoFreq = x;\r\n\t\tthis.vibrato.frequency.value = this.vibratoFreq;\r\n\t}\r\n\r\n\tget vibratoWet() {\r\n\t\treturn this._vibratoWet / 100;\r\n\t}\r\n\tset vibratoWet(x) {\r\n\t\tthis._vibratoWet = x;\r\n\t\tthis.vibrato.wet.value = this.vibratoWet;\r\n\t}\r\n\r\n\t// CHORUS\r\n\r\n\tget chorusSpread() {\r\n\t\treturn this._chorusSpread;\r\n\t}\r\n\tset chorusSpread(x) {\r\n\t\tthis._chorusSpread = x;\r\n\t\tthis.chorus.spread = this.chorusSpread;\r\n\t}\r\n\r\n\tget chorusDepth() {\r\n\t\treturn this._chorusDepth / 100;\r\n\t}\r\n\tset chorusDepth(x) {\r\n\t\tthis._chorusDepth = x;\r\n\t\tthis.chorus.depth = this.chorusDepth;\r\n\t}\r\n\r\n\tget chorusDelay() {\r\n\t\treturn this._chorusDelay;\r\n\t}\r\n\tset chorusDelay(x) {\r\n\t\tthis._chorusDelay = x;\r\n\t\tthis.chorus.delay = this.chorusDelay;\r\n\t}\r\n\r\n\tget chorusFreq() {\r\n\t\treturn getSecondsFromValue(this._chorusFreq);\r\n\t}\r\n\tset chorusFreq(x) {\r\n\t\tthis._chorusFreq = x;\r\n\t\tthis.chorus.frequency.value = this.chorusFreq;\r\n\t}\r\n\r\n\tget chorusType() {\r\n\t\treturn OSC_SHAPES[this._chorusType];\r\n\t}\r\n\tset chorusType(x) {\r\n\t\tthis._chorusType = x;\r\n\t\tthis.chorus.type = this.chorusType;\r\n\t}\r\n\r\n\tget chorusWet() {\r\n\t\treturn this._chorusWet / 100;\r\n\t}\r\n\tset chorusWet(x) {\r\n\t\tthis._chorusWet = x;\r\n\t\tthis.chorus.wet.value = this.chorusWet;\r\n\t}\r\n\r\n\t// BITCRUSHER\r\n\r\n\t// get crusherBits() {\r\n\t// \treturn this._crusherBits;\r\n\t// }\r\n\t// set crusherBits(x) {\r\n\t// \tthis._crusherBits = x;\r\n\t// \tthis.bitcrusher.bits = this.crusherBits;\r\n\t// }\r\n\r\n\t// get crusherWet() {\r\n\t// \treturn this._crusherWet / 100;\r\n\t// }\r\n\t// set crusherWet(x) {\r\n\t// \tthis._crusherWet = x;\r\n\t// \tthis.bitcrusher.wet.value = this.crusherWet;\r\n\t// }\r\n\r\n\t// DISTORTION\r\n\r\n\tget distOver() {\r\n\t\treturn OVERSAMPLE_TYPES[this._distOver];\r\n\t}\r\n\tset distOver(x) {\r\n\t\tthis._distOver = x;\r\n\t\tthis.distortion.oversample = this.distOver;\r\n\t}\r\n\r\n\tget distAmount() {\r\n\t\treturn this._distAmount / 100;\r\n\t}\r\n\tset distAmount(x) {\r\n\t\tthis._distAmount = x;\r\n\t\tthis.distortion.distortion = this.distAmount;\r\n\t}\r\n\r\n\tget distWet() {\r\n\t\treturn this._distWet / 100;\r\n\t}\r\n\tset distWet(x) {\r\n\t\tthis._distWet = x;\r\n\t\tthis.distortion.wet.value = this.distWet;\r\n\t}\r\n\r\n\t// FREQ SHIFTER\r\n\tget freqShifterAmount() {\r\n\t\treturn this._freqShifterAmount;\r\n\t}\r\n\tset freqShifterAmount(x) {\r\n\t\tthis._freqShifterAmount = x;\r\n\t\tthis.freqShifter.frequency.value = this.freqShifterAmount;\r\n\t}\r\n\r\n\tget freqShifterWet() {\r\n\t\treturn this._freqShifterWet / 100;\r\n\t}\r\n\tset freqShifterWet(x) {\r\n\t\tthis._freqShifterWet = x;\r\n\t\tthis.freqShifter.wet.value = this.freqShifterWet;\r\n\t}\r\n\r\n\t// PITCHER\r\n\r\n\tget pitcherPitch() {\r\n\t\treturn this._pitcherPitch;\r\n\t}\r\n\tset pitcherPitch(x) {\r\n\t\tthis._pitcherPitch = x;\r\n\t\tthis.pitcher.pitch = this.pitcherPitch;\r\n\t}\r\n\r\n\tget pitcherWindow() {\r\n\t\treturn this._pitcherWindow / 1000;\r\n\t}\r\n\tset pitcherWindow(x) {\r\n\t\tthis._pitcherWindow = x;\r\n\t\tthis.pitcher.windowSize = this.pitcherWindow;\r\n\t}\r\n\r\n\tget pitcherWet() {\r\n\t\treturn this._pitcherWet / 100;\r\n\t}\r\n\tset pitcherWet(x) {\r\n\t\tthis._pitcherWet = x;\r\n\t\tthis.pitcher.wet.value = this.pitcherWet;\r\n\t}\r\n\r\n\t// REVERB\r\n\r\n\tget reverbSize() {\r\n\t\treturn this._reverbSize / 100;\r\n\t}\r\n\tset reverbSize(x) {\r\n\t\tthis._reverbSize = x;\r\n\t\tthis.reverb.roomSize.value = this.reverbSize;\r\n\t}\r\n\r\n\tget reverbDampening() {\r\n\t\treturn getFrequencyFromValue(this._reverbDampening);\r\n\t}\r\n\tset reverbDampening(x) {\r\n\t\tthis._reverbDampening = x;\r\n\t\tthis.reverb.dampening = this.reverbDampening;\r\n\t}\r\n\r\n\tget reverbWet() {\r\n\t\treturn this._reverbWet / 100;\r\n\t}\r\n\tset reverbWet(x) {\r\n\t\tthis._reverbWet = x;\r\n\t\tthis.reverb.wet.value = this.reverbWet;\r\n\t}\r\n\r\n\tset = (control, value) => {\r\n\t\tconsole.log(`setting ${control} to ${value}`);\r\n\r\n\t\tthis[control] = value;\r\n\t};\r\n}\r\n","import {createGlobalStyle} from 'styled-components/macro';\r\nimport DS_Digital from '../assets/fonts/ds-digital/DS-DIGIT.ttf';\r\nimport Russo_One from '../assets/fonts/russo-one/Russo_One.ttf';\r\nimport Segoe_UI_Black from '../assets/fonts/segoe-ui/segoe-ui-black.ttf';\r\nimport Segoe_UI_Bold from '../assets/fonts/segoe-ui/segoe-ui-bold.ttf';\r\nimport Segoe_UI_Light from '../assets/fonts/segoe-ui/segoe-ui-light.ttf';\r\nimport Segoe_UI_Normal from '../assets/fonts/segoe-ui/segoe-ui-normal.ttf';\r\nimport Segoe_UI_Semibold from '../assets/fonts/segoe-ui/segoe-ui-semibold.ttf';\r\nimport Segoe_UI_Semilight from '../assets/fonts/segoe-ui/segoe-ui-semilight.ttf';\r\n\r\n// defining font faces in createGlobalStyle is troublesome, see: https://github.com/styled-components/styled-components/issues/1593\r\nexport default createGlobalStyle`\r\n  html {\r\n    font-size: 2em; /* global scale */\r\n    -webkit-font-smoothing: antialiased;\r\n  }\r\n\r\n  body {\r\n    font-family: 'Segoe UI', sans-serif;\r\n  }\r\n\r\n  #root {\r\n    min-height: 98vh;\r\n    display: flex;\r\n    flex: 1;\r\n    align-items: center;\r\n  }\r\n\r\n  /* @font-face {\r\n    font-family: 'DS Digital';\r\n    src: url(${DS_Digital})\r\n  }\r\n\r\n  @font-face {\r\n    font-family: 'Russo One';\r\n    src: url(${Russo_One});\r\n  }\r\n\r\n  @font-face {\r\n    font-family: 'Segoe UI';\r\n    src: url(${Segoe_UI_Light});\r\n    font-weight: 100;\r\n    font-style: normal;\r\n  }\r\n\r\n  @font-face {\r\n    font-family: 'Segoe UI';\r\n    src: url(${Segoe_UI_Semilight});\r\n    font-weight: 300;\r\n    font-style: normal;\r\n  }\r\n\r\n  @font-face {\r\n    font-family: 'Segoe UI';\r\n    src: url(${Segoe_UI_Normal});\r\n    font-weight: 400;\r\n    font-style: normal;\r\n  }\r\n\r\n  @font-face {\r\n    font-family: 'Segoe UI';\r\n    src: url(${Segoe_UI_Semibold});\r\n    font-weight: 600;\r\n    font-style: normal;\r\n  }\r\n\r\n  @font-face {\r\n    font-family: 'Segoe UI';\r\n    src: url(${Segoe_UI_Bold});\r\n    font-weight: 700;\r\n    font-style: normal;\r\n  }\r\n\r\n  @font-face {\r\n    font-family: 'Segoe UI';\r\n    src: url(${Segoe_UI_Black});\r\n    font-weight: 800;\r\n    font-style: normal;\r\n  } */\r\n`;\r\n","import {css, keyframes} from 'styled-components/macro';\r\nimport {rgba} from 'polished';\r\n\r\nconst palette = {\r\n\tgray100: '#0b0b0b',\r\n\tgray150: '#0f0f0f',\r\n\tgray200: '#121212',\r\n\tgray250: '#141414',\r\n\tgray300: '#191718',\r\n\tgray400: '#231f20',\r\n\tgray500: '#303030',\r\n\tgray550: '#3a3a3a',\r\n\tgray600: '#666666',\r\n\tgray650: '#707071',\r\n\tgray700: '#ababab',\r\n\tgray750: '#cacaca',\r\n\tgray800: '#d7d7d7',\r\n\tgray900: '#eeeeee',\r\n\r\n\twhite: '#ffffff',\r\n\tblack: '#000000',\r\n\r\n\tprimary: '#ff2601',\r\n\tsecondary: '#629183',\r\n};\r\n\r\nexport const color = {\r\n\tinstrumentBorder: palette.gray400,\r\n\tinstrumentPlastic: palette.gray500,\r\n\tlabel: palette.gray700,\r\n\tkeyBorder: palette.gray400,\r\n\tkeyWhite: palette.gray800,\r\n\tkeyWhiteActive: palette.white,\r\n\tkeyBlack: palette.gray300,\r\n\tkeyBlackActive: palette.gray600,\r\n\tbuttonBackground: palette.gray250,\r\n\tbuttonBackgroundActive: palette.gray200,\r\n\tbuttonBorder: palette.gray150,\r\n\tbuttonLightInactive: palette.gray500,\r\n\tbuttonLightActive: palette.primary,\r\n\tdigitalVerticalBorder: palette.gray400,\r\n\tdigitalHorizontalBorder: palette.gray550,\r\n\tdigitalBackground: palette.gray100,\r\n\tdigitalText: palette.primary,\r\n\tdigitalTextBackground: palette.secondary,\r\n\tknobRubber: palette.gray400,\r\n\tknobMetal: palette.gray750,\r\n\tknobDial: palette.gray650,\r\n  meterLight: palette.primary,\r\n\ttooltipBackground: palette.gray700,\r\n};\r\n\r\nexport const border = {\r\n\tinstrument: `solid ${color.instrumentBorder} 0.15rem`,\r\n\tkey: `solid ${color.keyBorder} 0.075rem`,\r\n\tbutton: `solid ${color.buttonBorder} 0.15rem`,\r\n\tdigitalDisplayVertical: `solid ${color.digitalVerticalBorder} 0.15rem`,\r\n  digitalDisplayHorizontal: `solid ${color.digitalHorizontalBorder} 0.15rem`,\r\n};\r\n\r\nexport const shadow = {\r\n  pianoOutset: `0 0.25rem 0.25rem -0.0625rem rgba(0, 0, 0, 0.6)`,\r\n\r\n  keyInsetTop: `inset 0rem 0.25rem 0.09375rem 0rem rgba(0, 0, 0, 0.15)`,\r\n  keyInsetBottom: `inset 0 0.0625rem 0.5rem 0 rgba(0, 0, 0, 0.45)`,\r\n  keyInsetLeft: `inset 0.15625rem 0 0.5rem 0rem rgba(0, 0, 0, 0.45)`,\r\n  keyInsetRight: `inset -0.15625rem 0 0.5em 0rem rgba(0, 0, 0, 0.45)`,\r\n  keyWhiteOutset: `0rem 0.1875rem 0.0625rem -0.0625rem rgba(0, 0, 0, 0.15)`,\r\n  keyWhiteOutsetActive: `0rem 0.15rem 0.03125rem -0.0625rem rgba(0, 0, 0, 0.15)`,\r\n  keyBlackOutset: `0 0.1rem 0.03125rem 0rem rgba(0, 0, 0, 0.3)`,\r\n  keyBlackOutsetActive: `0 0.075rem 0.00625rem 0rem rgba(0, 0, 0, 0.3)`,\r\n\r\n  buttonOutset: `0 0.0625rem 0.03125rem 0rem rgba(0, 0, 0, 0.3)`,\r\n  buttonLightInset: `inset 0 0 0 0.125rem rgba(15, 15, 15, 0.3)`,\r\n  buttonLightOutset: `0 0 1rem 0.125rem ${rgba(color.buttonLightActive, 0.6)},\r\n    0 0 0.25rem 0.0625rem ${rgba(color.buttonLightActive, 0.6)}`,\r\n\r\n  knobInset: `inset 0 0 0rem 0.125rem rgba(0, 0, 0, 0.15)`,\r\n  knobOutset: `0 0.0625rem 0.0625rem 0rem rgba(0, 0, 0, 0.3)`,\r\n  knobDialInset: `inset 0 0 0.25rem 0.03125rem rgba(0, 0, 0, 0.3)`,\r\n  knobDialOutset: `0 0 0.0625rem 0.125rem rgba(0, 0, 0, 0.15)`,\r\n};\r\n\r\nexport const font = {\r\n\tdigital: 'DS Digital',\r\n\tlabel: 'Russo One',\r\n\ttitle: 'Heroic Avenger',\r\n\tsubtitle: 'Segoe UI',\r\n};\r\n\r\nexport const pseudoElement = css`\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tcontent: '';\r\n`;\r\n\r\nexport const controlOutline = css`\r\n\tborder: solid ${color.label} 0.1875rem;\r\n\tborder-top: none;\r\n\tborder-top-left-radius: 0;\r\n\tborder-top-right-radius: 0;\r\n\tborder-bottom-left-radius: 0.25rem;\r\n\tborder-bottom-right-radius: 0.25rem;\r\n`;\r\n\r\nexport const labelText = css`\r\n  text-transform: uppercase;\r\n  color: ${color.label};\r\n  font-family: ${font.label};\r\n  font-size: 0.5625rem;\r\n  letter-spacing: 0.015625rem;\r\n  padding: 0.1875rem;\r\n`;\r\n\r\nexport const outlinedControlLabelText = css`\r\n\tcolor: ${color.instrumentPlastic};\r\n\tbackground-color: ${color.label};\r\n\tborder-top-left-radius: 0.25rem;\r\n\tborder-top-right-radius: 0.25rem;\r\n`;\r\n\r\nexport const blinkingLight = keyframes`\r\n  from {\r\n    background-color: ${color.buttonLightInactive};\r\n  }\r\n\r\n  to {\r\n    background-color: ${color.buttonLightActive};\r\n    box-shadow: ${shadow.buttonLightOutset};\r\n  }\r\n`;\r\n","import React, {ReactNode} from 'react';\r\nimport styled from 'styled-components/macro';\r\nimport {KEYS} from '../js/statics';\r\nimport {PianoKeyMouseEvents} from '../types';\r\nimport {border, color, shadow} from '../styles';\r\n\r\nconst KeysContainer = styled.div`\r\n\tdisplay: inline-block;\r\n\tcursor: pointer;\r\n`;\r\n\r\nconst BlackKeysContainer = styled.div`\r\n\tdisplay: flex;\r\n\tflex-flow: row;\r\n\tposition: absolute;\r\n`;\r\n\r\nconst WhiteKeysContainer = styled.div`\r\n\tdisplay: flex;\r\n`;\r\n\r\ntype KeyProps = {\r\n\tactive: boolean;\r\n};\r\n\r\nconst Key = styled.div<KeyProps>`\r\n\tdisplay: inline-block;\r\n\tborder: ${border.key};\r\n\tborder-top: ${border.instrument};\r\n\tborder-bottom: ${border.instrument};\r\n`;\r\n\r\nconst WhiteKey = styled(Key)`\r\n\twidth: 2.3rem;\r\n\theight: 12rem;\r\n\tbackground: ${({active}) => (active ? color.keyWhiteActive : color.keyWhite)};\r\n\tbox-shadow: ${({active}) => (active ? shadow.keyWhiteOutsetActive : shadow.keyInsetTop)},\r\n\t\t${shadow.keyInsetBottom}, ${shadow.keyWhiteOutset};\r\n\r\n\t& :first-child {\r\n\t\tborder-left: ${border.instrument};\r\n\t\tborder-bottom-left-radius: 0.3125rem;\r\n\t\tbox-shadow: ${shadow.keyWhiteOutset}, ${shadow.keyInsetTop}, ${shadow.keyInsetLeft};\r\n\t}\r\n\r\n\t& :last-child {\r\n\t\tborder-right: ${border.instrument};\r\n\t\tborder-bottom-right-radius: 0.3125rem;\r\n\t\tbox-shadow: ${shadow.keyWhiteOutset}, ${shadow.keyInsetTop}, ${shadow.keyInsetRight};\r\n\t}\r\n`;\r\n\r\nconst BlackKey = styled(Key)`\r\n\tmargin-top: 0.1rem;\r\n\twidth: 1.3rem;\r\n\theight: 7.8rem;\r\n\tbackground: ${({active}) => (active ? color.keyBlackActive : color.keyBlack)};\r\n\tborder-color: ${color.keyBorder};\r\n\tborder-top-width: 0.075rem;\r\n\tborder-left-width: 0.15rem;\r\n\tborder-right-width: 0.15rem;\r\n\tborder-bottom-width: 0.15rem;\r\n\tborder-bottom-left-radius: 0.2rem 0.3rem;\r\n\tborder-bottom-right-radius: 0.2rem 0.3rem;\r\n\tbox-shadow: ${({active}) => (active ? shadow.keyBlackOutsetActive : shadow.keyBlackOutset)};\r\n\tposition: absolute;\r\n\r\n\t${Array(10)\r\n\t\t.fill(null)\r\n\t\t.map((x, i) => {\r\n\t\t\tconst offset = 16.1 * i;\r\n\r\n\t\t\treturn `\r\n    &:nth-child(${i * 5 + 1}) {\r\n      left: ${offset + 1.433333}rem;\r\n    }\r\n\r\n    &:nth-child(${i * 5 + 2}) {\r\n      left: ${offset + 4.166666}rem;\r\n    }\r\n\r\n    &:nth-child(${i * 5 + 3}) {\r\n      left: ${offset + 8.225}rem;\r\n    }\r\n\r\n    &:nth-child(${i * 5 + 4}) {\r\n      left: ${offset + 10.8375}rem;\r\n    }\r\n\r\n    &:nth-child(${i * 5 + 5}) {\r\n      left: ${offset + 13.375}rem;\r\n    }\r\n  `;\r\n\t\t})\r\n\t\t.join(' ')}\r\n`;\r\n\r\ntype Props = PianoKeyMouseEvents & {\r\n\tactiveKeys: string[];\r\n\toctaves: number;\r\n};\r\n\r\nconst PianoKeys = ({\r\n\tactiveKeys,\r\n\toctaves,\r\n\thandleMouseDownPianoKey,\r\n\thandleMouseUpPianoKey,\r\n\thandleMouseOverPianoKey,\r\n\thandleMouseLeavePianoKey,\r\n}: Props) => {\r\n\tconst blackKeys: ReactNode[] = [];\r\n\tconst whiteKeys: ReactNode[] = [];\r\n\r\n\tKEYS.slice(0, 12 * octaves).forEach((key, index) => {\r\n\t\tconst {name} = key;\r\n\t\tconst note = name.substring(0, name.length - 1);\r\n\t\tconst keySet = note.endsWith('') ? blackKeys : whiteKeys;\r\n\t\tconst active = activeKeys.includes(name);\r\n\r\n\t\tconst keyProps = {\r\n\t\t\tkey: index,\r\n\t\t\ttitle: name,\r\n\t\t\tactive: active,\r\n\t\t\tonMouseDown: handleMouseDownPianoKey,\r\n\t\t\tonMouseUp: handleMouseUpPianoKey,\r\n\t\t\tonMouseOver: handleMouseOverPianoKey,\r\n\t\t\tonMouseLeave: handleMouseLeavePianoKey,\r\n\t\t};\r\n\r\n\t\tconst Key = keySet === whiteKeys ? WhiteKey : BlackKey;\r\n\t\tkeySet.push(<Key {...keyProps} />);\r\n\t});\r\n\r\n\treturn (\r\n\t\t<KeysContainer>\r\n\t\t\t<BlackKeysContainer>{blackKeys}</BlackKeysContainer>\r\n\t\t\t<WhiteKeysContainer>{whiteKeys}</WhiteKeysContainer>\r\n\t\t</KeysContainer>\r\n\t);\r\n};\r\n\r\nexport default React.memo(PianoKeys, (prevProps, nextProps) => prevProps.octaves === nextProps.octaves && prevProps.activeKeys.sort().join('') === nextProps.activeKeys.sort().join(''));","import React from 'react';\r\nimport styled, {css} from 'styled-components/macro';\r\nimport {Size} from '../../../types';\r\nimport {color, shadow, blinkingLight} from '../../../styles';\r\n\r\nconst ButtonLight = styled.div<Props>`\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tcontent: '';\r\n\twidth: ${({size}) => (size === 'large' ? '1.5rem' : '0.5rem')};\r\n\theight: 0.5rem;\r\n\tborder-radius: 0.25rem;\r\n\tbackground: ${({active}) => (active ? color.buttonLightActive : color.buttonLightInactive)};\r\n\tbox-shadow: ${({active}) =>\r\n\t\tactive\r\n\t\t\t? [shadow.buttonLightInset, shadow.buttonLightOutset].join(', ')\r\n\t\t\t: shadow.buttonLightInset};\r\n\ttransition: 0.1s all ease-out;\r\n\tanimation: ${({blinking}) =>\r\n\t\tblinking &&\r\n\t\tcss`\r\n\t\t\t${blinkingLight} 0.3s ease-in-out infinite alternate\r\n\t\t`};\r\n`;\r\n\r\ntype Props = {\r\n\tactive: boolean;\r\n\tblinking?: boolean;\r\n\tsize: Size;\r\n};\r\n\r\nexport default ({active, blinking, size}: Props) => (\r\n\t<ButtonLight active={active} blinking={blinking} size={size} />\r\n);\r\n","import styled from 'styled-components/macro';\r\nimport {labelText} from '../../styles';\r\n\r\nexport const ControlContainer = styled.div`\r\n\tmargin: 0.375rem;\r\n`;\r\n\r\nexport const ControlLabel = styled.div`\r\n\t${labelText};\r\n\ttext-align: center;\r\n\tmargin: 0 0.125rem 0.375rem;\r\n`;\r\n","import React, {MouseEvent, ReactNode} from 'react';\r\nimport styled from 'styled-components/macro';\r\nimport ButtonLight from './ButtonLight';\r\nimport {ButtonMouseEvents, Size} from '../../../types';\r\nimport {ControlContainer, ControlLabel} from '..';\r\nimport {color, border, shadow} from '../../../styles';\r\n\r\nconst ButtonContainer = styled.div`\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n`;\r\n\r\ntype ButtonProps = {\r\n\tactive?: boolean;\r\n\tsize: Size;\r\n\tonClick?: (e: any) => void;\r\n};\r\n\r\nconst Button = styled.div<ButtonProps>`\r\n\twidth: ${({size}) => (size === 'large' ? '4.5rem' : '3rem')};\r\n\theight: 3rem;\r\n\tposition: relative;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tbackground: ${({active}) => (active ? color.buttonBackgroundActive : color.buttonBackground)};\r\n\tborder: ${border.button};\r\n\tborder-radius: 0.25rem;\r\n\tbox-shadow: ${shadow.buttonOutset};\r\n\ttransition: 0.15s all ease-out;\r\n\tcursor: pointer;\r\n\r\n\t&:active {\r\n\t\tbackground: ${color.buttonBackgroundActive};\r\n\t\ttransform: scale(0.984375);\r\n\t}\r\n`;\r\n\r\ntype Props = ButtonProps &\r\n\tButtonMouseEvents & {\r\n\t\tchildren?: React.ReactNode;\r\n\t\tlabel?: string;\r\n\t\tlight?: boolean;\r\n\t\tname: string;\r\n\t\trenderButtonLight?: () => ReactNode;\r\n\t\tvalue: number | string;\r\n\t};\r\n\r\nconst ButtonControl = ({\r\n\tactive,\r\n\tchildren,\r\n\thandleClickControl,\r\n\tlabel,\r\n\tlight,\r\n\tname,\r\n\tonClick,\r\n\trenderButtonLight,\r\n\tsize,\r\n\tvalue,\r\n}: Props) => {\r\n\tconst handleClick = (e: MouseEvent) => handleClickControl(name, value);\r\n\r\n\tconst renderLight = () => light && <ButtonLight active={active || false} size={size} />;\r\n\r\n\treturn (\r\n\t\t<ControlContainer>\r\n\t\t\t<ControlLabel>{label || value}</ControlLabel>\r\n\t\t\t<ButtonContainer>\r\n\t\t\t\t<Button active={active} size={size} onClick={onClick || handleClick}>\r\n\t\t\t\t\t{renderButtonLight ? renderButtonLight() : renderLight()}\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</Button>\r\n\t\t\t</ButtonContainer>\r\n\t\t</ControlContainer>\r\n\t);\r\n};\r\n\r\nexport default ButtonControl;\r\n","import React, { CSSProperties, MouseEvent, useMemo } from \"react\";\r\nimport styled from \"styled-components/macro\";\r\nimport { CONTROL_TYPES, CONTROLS } from \"../../js/statics\";\r\nimport { ControlMouseEvents, DigitType } from \"../../types\";\r\nimport { ControlContainer, ControlLabel } from \".\";\r\nimport {\r\n  border,\r\n  color,\r\n  font,\r\n  labelText,\r\n} from \"../../styles\";\r\nimport { rgba } from \"polished\";\r\n\r\ntype ContainerProps = {};\r\n\r\nconst Container = styled(ControlContainer)<ContainerProps>`\r\n  position: relative;\r\n  display: flex;\r\n  align-content: center;\r\n  flex-flow: column wrap;\r\n\r\n  text-align: center;\r\n  border-radius: 0.1875rem;\r\n  margin-bottom: 0;\r\n\r\n  user-select: none;\r\n`;\r\n\r\ntype DigitalControlInputProps = {\r\n  digitType: DigitType;\r\n};\r\n\r\nconst DigitalControlInput = styled.div<DigitalControlInputProps>`\r\n  position: relative;\r\n  font-family: ${font.digital};\r\n  font-size: 2rem;\r\n  color: transparent;\r\n  width: ${({ digitType }) =>\r\n    digitType === \"single-digit\" ? \"2.75rem\" : \"3.375rem\"};\r\n  padding: ${({ digitType }) =>\r\n    digitType === \"single-digit\"\r\n      ? \"0.375rem 0rem 0.375rem 0.6875rem\"\r\n      : \"0.375rem 0rem 0.375rem 0.25rem\"};\r\n  background-color: ${color.digitalBackground};\r\n  border-left: ${border.digitalDisplayVertical};\r\n  border-right: ${border.digitalDisplayVertical};\r\n  border-top: ${border.digitalDisplayHorizontal};\r\n  border-bottom: ${border.digitalDisplayHorizontal};\r\n  margin: 0 auto;\r\n`;\r\n\r\ntype DigitalControlInputTextProps = {\r\n  value: number;\r\n  digitType: DigitType;\r\n};\r\n\r\nconst DigitalControlInputText = styled.div<DigitalControlInputTextProps>`\r\n  position: absolute;\r\n  top: -0.1rem;\r\n  left: -0.53125rem;\r\n  background: none;\r\n  border-color: transparent;\r\n  width: ${({ digitType }) =>\r\n    digitType === \"single-digit\" ? \"2.75rem\" : \"3.375rem\"};\r\n  padding: ${({ digitType }) =>\r\n    digitType === \"single-digit\"\r\n      ? \"0.5rem 0rem 0.375rem 0.6875rem\"\r\n      : \"0.5rem 0rem 0.375rem 0.25rem\"};\r\n`;\r\n\r\nconst DigitalControlInputBackgroundText = styled(DigitalControlInputText)`\r\n  color: ${rgba(color.digitalText, 0.625)};\r\n  opacity: 0.1875;\r\n  text-shadow: 0.03125rem 0.03125rem 0rem\r\n    ${rgba(color.digitalTextBackground, 0.5)};\r\n`;\r\n\r\nconst DigitalControlInputForegroundText = styled(DigitalControlInputText)`\r\n  color: ${rgba(color.digitalText, 0.9375)};\r\n  text-shadow: 0 0 0.625rem ${rgba(color.digitalText, 0.625)},\r\n    0 0 0.375rem ${rgba(color.digitalText, 0.375)},\r\n    0 0 0.125rem ${rgba(color.digitalText, 0.25)};\r\n\r\n  &:hover {\r\n    cursor: grab;\r\n  }\r\n`;\r\n\r\nconst digitTypes = {\r\n  \"single-digit\": {\r\n    backgroundText: 8,\r\n    foregroundTextStyle: (val: number) => {\r\n      const styles: CSSProperties = {};\r\n      if (val === 1) styles.left = \"-0.25rem\";\r\n      return styles;\r\n    },\r\n  },\r\n  \"single-digit-negative\": {\r\n    backgroundText: -8,\r\n    foregroundTextStyle: (val: number) => {\r\n      const styles: CSSProperties = {};\r\n      if (val > 1 || val === 0) styles.left = \"-0.0625rem\";\r\n      if (val === 1) styles.left = \"0.245rem\";\r\n      if (val === -1) {\r\n        styles.left = \"-0.225rem\";\r\n        styles.letterSpacing = \"0.5375rem\";\r\n      }\r\n      return styles;\r\n    },\r\n  },\r\n  \"double-digit\": {\r\n    backgroundText: 88,\r\n    foregroundTextStyle: (val: number) => {\r\n      const styles: CSSProperties = {};\r\n      return styles;\r\n    },\r\n  },\r\n  \"double-digit-negative\": {\r\n    backgroundText: -88,\r\n    foregroundTextStyle: (val: number) => {\r\n      const styles: CSSProperties = {};\r\n      return styles;\r\n    },\r\n  },\r\n};\r\n\r\ntype Props = ControlMouseEvents & {\r\n  name: string;\r\n  label?: string;\r\n  value: number;\r\n};\r\n\r\nconst DigitalControl = ({\r\n  handleMouseDownControl,\r\n  handleMouseUpControl,\r\n  handleMouseWheelControl,\r\n  name,\r\n  label,\r\n  value,\r\n}: Props) => {\r\n  const {\r\n    range: { min, max },\r\n  } = CONTROLS[name];\r\n\r\n  const getDigitType = (min: number, max: number): DigitType => {\r\n    if (min > -1 && max < 10) return \"single-digit\";\r\n    if (min <= -1 && max < 10) return \"single-digit-negative\";\r\n    if (min > -1 && max >= 10) return \"double-digit\";\r\n    return \"double-digit-negative\";\r\n  };\r\n\r\n  const digitType = useMemo(() => getDigitType(min, max), [min, max]);\r\n\r\n  const handleMouseDown = (e: MouseEvent<HTMLDivElement>) =>\r\n    handleMouseDownControl(name, CONTROL_TYPES.digital.name, e);\r\n\r\n  const handleMouseUp = (e: MouseEvent<HTMLDivElement>) =>\r\n    handleMouseUpControl(name, CONTROL_TYPES.digital.name, e);\r\n\r\n  const handleMouseWheel = (e: MouseEvent<HTMLDivElement>) =>\r\n    handleMouseWheelControl(name, CONTROL_TYPES.digital.name, e);\r\n\r\n  return (\r\n    <Container>\r\n      <ControlLabel>{label || name}</ControlLabel>\r\n        <DigitalControlInput digitType={digitType}>\r\n          8\r\n          <DigitalControlInputBackgroundText\r\n            digitType={digitType}\r\n            value={value}\r\n          >\r\n            {digitTypes[digitType].backgroundText}\r\n          </DigitalControlInputBackgroundText>\r\n          <DigitalControlInputForegroundText\r\n            value={value}\r\n            digitType={digitType}\r\n            children={Number.isInteger(value) ? value : \"-\"}\r\n            onMouseDown={handleMouseDown}\r\n            onMouseUp={handleMouseUp}\r\n            onWheel={handleMouseWheel}\r\n            style={digitTypes[digitType].foregroundTextStyle(value)}\r\n          />\r\n        </DigitalControlInput>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default DigitalControl;\r\n","import React, {MouseEvent} from 'react';\r\nimport styled, {css} from 'styled-components/macro';\r\nimport {CONTROL_TYPES, CONTROLS} from '../../js/statics';\r\nimport {Size, ControlMouseEvents} from '../../types';\r\nimport {ControlLabel, ControlContainer} from '.';\r\nimport {shadow, color, pseudoElement} from '../../styles';\r\n\r\ntype ContainerProps = {\r\n\tsize: Size;\r\n};\r\n\r\nconst Container = styled(ControlContainer)<ContainerProps>`\r\n\tposition: relative;\r\n\tdisplay: flex;\r\n\tflex-flow: column nowrap;\r\n\tjustify-content: flex-start;\r\n\talign-items: center;\r\n\twidth: ${({size}) => {\r\n\t\tswitch (size) {\r\n\t\t\tcase 'small':\r\n\t\t\t\treturn '3rem';\r\n\t\t\tdefault:\r\n\t\t\t\treturn undefined;\r\n\t\t}\r\n\t}};\r\n`;\r\n\r\ntype KnobContainerProps = {\r\n\tsize: Size;\r\n};\r\n\r\nconst KnobContainer = styled.div<KnobContainerProps>`\r\n\tborder-radius: 50%;\r\n\tbox-shadow: ${shadow.knobOutset};\r\n\r\n\twidth: ${({size}) => {\r\n\t\tswitch (size) {\r\n\t\t\tcase 'small':\r\n\t\t\t\treturn '2rem';\r\n\t\t\tcase 'medium':\r\n\t\t\t\treturn '3rem';\r\n\t\t\tcase 'large':\r\n\t\t\t\treturn '4rem';\r\n\t\t}\r\n\t}};\r\n\theight: ${({size}) => {\r\n\t\tswitch (size) {\r\n\t\t\tcase 'small':\r\n\t\t\t\treturn '2rem';\r\n\t\t\tcase 'medium':\r\n\t\t\t\treturn '3rem';\r\n\t\t\tcase 'large':\r\n\t\t\t\treturn '4rem';\r\n\t\t}\r\n\t}};\r\n`;\r\n\r\ntype KnobProps = {\r\n\tsize: Size;\r\n\tvalue: number;\r\n\tmin: number;\r\n\tmax: number;\r\n};\r\n\r\nconst Knob = styled.div<KnobProps>`\r\n  cursor: grab;\r\n  position: relative;\r\n  background-color: ${color.knobRubber};\r\n  border-radius: 50%;\r\n  box-shadow: ${shadow.knobInset};\r\n  width: ${({ size }) => {\r\n    switch (size) {\r\n      case \"small\":\r\n        return \"2rem\";\r\n      case \"medium\":\r\n        return \"3rem\";\r\n      case \"large\":\r\n        return \"4rem\";\r\n    }\r\n  }};\r\n  height: ${({ size }) => {\r\n    switch (size) {\r\n      case \"small\":\r\n        return \"2rem\";\r\n      case \"medium\":\r\n        return \"3rem\";\r\n      case \"large\":\r\n        return \"4rem\";\r\n    }\r\n  }};\r\n  transform: ${({ value, min, max }) => {\r\n    const valueAsPercent = ((value - min) * 100) / (max - min);\r\n    const valueAsDeg = valueAsPercent * 3.6;\r\n    const valueForRotate = (valueAsDeg + 180) * 0.875 + 45;\r\n    return css`rotate(${valueForRotate}deg)`;\r\n  }};\r\n\r\n  &:before {\r\n    ${pseudoElement};\r\n    box-sizing: border-box;\r\n    background-color: ${color.knobMetal};\r\n    box-shadow: ${shadow.knobDialOutset}, ${shadow.knobDialInset};\r\n    transform: translateY(-50%);\r\n    border-radius: 50%;\r\n    position: relative;\r\n    top: 50%;\r\n    margin: auto;\r\n    border-style: solid;\r\n    border-color: ${color.knobDial};\r\n    width: ${({ size }) => {\r\n      switch (size) {\r\n        case \"small\":\r\n          return \"1.25rem\";\r\n        case \"medium\":\r\n          return \"2rem\";\r\n        case \"large\":\r\n          return \"3rem\";\r\n      }\r\n    }};\r\n    height: ${({ size }) => {\r\n      switch (size) {\r\n        case \"small\":\r\n          return \"1.25rem\";\r\n        case \"medium\":\r\n          return \"2rem\";\r\n        case \"large\":\r\n          return \"3rem\";\r\n      }\r\n    }};\r\n    border-width: ${({ size }) => {\r\n      switch (size) {\r\n        case \"small\":\r\n          return \"0.1667rem\";\r\n        case \"medium\":\r\n          return \"0.1875rem\";\r\n        case \"large\":\r\n          return \"0.1875rem\";\r\n      }\r\n    }};\r\n  }\r\n\r\n  &:after {\r\n    ${pseudoElement};\r\n    background-color: ${color.knobDial};\r\n    border-top-left-radius: 0.075rem;\r\n    border-top-right-radius: 0.075rem;\r\n    border-bottom-left-radius: 0.125rem;\r\n    border-bottom-right-radius: 0.125rem;\r\n    margin: auto;\r\n    transform: translateX(-50%);\r\n    left: 50%;\r\n    width: ${({ size }) => {\r\n      switch (size) {\r\n        case \"small\":\r\n          return \"0.1875rem\";\r\n        case \"medium\":\r\n          return \"0.25rem\";\r\n        case \"large\":\r\n          return \"0.375rem\";\r\n      }\r\n    }};\r\n    height: ${({ size }) => {\r\n      switch (size) {\r\n        case \"small\":\r\n          return \"0.625rem\";\r\n        case \"medium\":\r\n          return \"0.5rem\";\r\n        case \"large\":\r\n          return \"0.15625rem\";\r\n      }\r\n    }};\r\n    top: ${({ size }) => {\r\n      switch (size) {\r\n        case \"small\":\r\n          return \"0.4375rem\";\r\n        case \"medium\":\r\n          return \"0.5rem\";\r\n        case \"large\":\r\n          return \"0.65625rem\";\r\n      }\r\n    }};\r\n\r\n    border-bottom-left-radius: ${({ size }) => {\r\n      switch (size) {\r\n        case \"small\":\r\n          return undefined;\r\n        case \"medium\":\r\n          return \"37.5% 100%\";\r\n        case \"large\":\r\n          return \"0.0625rem\";\r\n      }\r\n    }};\r\n    border-bottom-right-radius: ${({ size }) => {\r\n      switch (size) {\r\n        case \"small\":\r\n          return undefined;\r\n        case \"medium\":\r\n          return \"37.5% 100%\";\r\n        case \"large\":\r\n          return \"0.0625rem\";\r\n      }\r\n    }};\r\n    border-top-left-radius: ${({ size }) => {\r\n      switch (size) {\r\n        case \"small\":\r\n          return undefined;\r\n        case \"medium\":\r\n          return undefined;\r\n        case \"large\":\r\n          return \"0.05rem\";\r\n      }\r\n    }};\r\n    border-top-right-radius: ${({ size }) => {\r\n      switch (size) {\r\n        case \"small\":\r\n          return undefined;\r\n        case \"medium\":\r\n          return undefined;\r\n        case \"large\":\r\n          return \"0.05rem\";\r\n      }\r\n    }};\r\n  }\r\n`;\r\n\r\ntype ValueTooltipProps = {\r\n\tvisible: boolean;\r\n};\r\n\r\nconst ValueTooltip = styled.div<ValueTooltipProps>`\r\n\twidth: 100%;\r\n\tmargin: 0.3125rem auto 0;\r\n\tpadding: 0 0 0.0625rem;\r\n\tbackground-color: ${color.tooltipBackground};\r\n\tborder-radius: 1rem;\r\n\r\n\ttext-align: center;\r\n\tfont-size: 0.5625rem;\r\n\tfont-weight: 800;\r\n\r\n\ttransition: 0.1s all ease-out;\r\n\topacity: ${({visible}) => (visible ? 1 : 0)};\r\n`;\r\n\r\nexport type Props = ControlMouseEvents & {\r\n\tactiveControl: string;\r\n\tname: string;\r\n\tlabel?: string;\r\n\tsize: Size;\r\n\tvalue: number;\r\n};\r\n\r\nexport default ({\r\n\tactiveControl,\r\n\thandleMouseDownControl,\r\n\thandleMouseUpControl,\r\n\thandleMouseWheelControl,\r\n\tname,\r\n\tlabel,\r\n\tsize,\r\n\tvalue,\r\n}: Props) => {\r\n\tconst {\r\n\t\trange: {min, max},\r\n\t} = CONTROLS[name];\r\n\r\n\tconst handleMouseDown = (e: MouseEvent<HTMLDivElement>) =>\r\n\t\thandleMouseDownControl(name, CONTROL_TYPES.knob.name, e);\r\n\r\n\tconst handleMouseUp = (e: MouseEvent<HTMLDivElement>) =>\r\n\t\thandleMouseUpControl(name, CONTROL_TYPES.knob.name, e);\r\n\r\n\tconst handleMouseWheel = (e: MouseEvent<HTMLDivElement>) =>\r\n\t\thandleMouseWheelControl(name, CONTROL_TYPES.knob.name, e);\r\n\r\n\treturn (\r\n\t\t<Container size={size}>\r\n\t\t\t<ControlLabel>{label || name}</ControlLabel>\r\n\t\t\t<KnobContainer size={size}>\r\n\t\t\t\t<Knob\r\n\t\t\t\t\tsize={size}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tmin={min}\r\n\t\t\t\t\tmax={max}\r\n\t\t\t\t\tonMouseDown={handleMouseDown}\r\n\t\t\t\t\tonMouseUp={handleMouseUp}\r\n\t\t\t\t\tonWheel={handleMouseWheel}\r\n\t\t\t\t/>\r\n\t\t\t\t<ValueTooltip visible={activeControl === name}>{value}</ValueTooltip>\r\n\t\t\t</KnobContainer>\r\n\t\t</Container>\r\n\t);\r\n};\r\n","import React, {FormEvent, useRef} from 'react';\r\nimport styled from 'styled-components/macro';\r\nimport ButtonControl from './ButtonControl';\r\nimport {ButtonMouseEvents, Size} from '../../../types';\r\nimport {SUPPORTED_SAMPLE_FORMATS} from '../../../js/statics';\r\n\r\nconst Input = styled.input`\r\n\tdisplay: none;\r\n`;\r\n\r\ntype Props = ButtonMouseEvents & {\r\n\tname: string;\r\n\tlabel?: string;\r\n\tsize: Size;\r\n\tvalue: number | string;\r\n};\r\n\r\nconst FileInputControl = ({handleClickControl, name, label, size, value}: Props) => {\r\n\tconst inputRef = useRef<HTMLInputElement>(null);\r\n\r\n\tconst handleClick = (e: FormEvent<HTMLInputElement>) => inputRef.current?.click();\r\n\r\n\tconst handleChange = async (e: FormEvent<HTMLInputElement>) => {\r\n\t\tif (inputRef?.current) {\r\n\t\t\tconst file = inputRef?.current?.files?.[0];\r\n\r\n\t\t\tif (file) {\r\n\t\t\t\tconst fileUrl = URL.createObjectURL(file);\r\n\t\t\t\thandleClickControl(name, fileUrl);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<ButtonControl\r\n\t\t\tlabel={label}\r\n\t\t\tname={name}\r\n\t\t\thandleClickControl={handleClickControl}\r\n\t\t\tonClick={handleClick}\r\n\t\t\tsize={size}\r\n\t\t\tvalue={value}\r\n\t\t>\r\n\t\t\t<Input\r\n\t\t\t\tref={inputRef}\r\n\t\t\t\tonChange={handleChange}\r\n\t\t\t\ttype={'file'}\r\n\t\t\t\taccept={SUPPORTED_SAMPLE_FORMATS.join(', ')}\r\n\t\t\t/>\r\n\t\t</ButtonControl>\r\n\t);\r\n};\r\n\r\nexport default FileInputControl;\r\n","import React, {useEffect, useRef, useState} from 'react';\r\nimport ButtonControl from './ButtonControl';\r\nimport {ButtonMouseEvents, Size} from '../../../types';\r\nimport ButtonLight from './ButtonLight';\r\n\r\ntype Props = ButtonMouseEvents & {\r\n\tname: string;\r\n\tlabel?: string;\r\n\tlight?: boolean;\r\n\tsize: Size;\r\n};\r\n\r\nconst InputRecorderControl = ({handleClickControl, label, light, name, size}: Props) => {\r\n\tconst [recording, setRecording] = useState(false);\r\n\tconst mediaRecorder = useRef<MediaRecorder | null>(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tnavigator.mediaDevices.getUserMedia({audio: true}).then((stream) => {\r\n\t\t\tmediaRecorder.current = new MediaRecorder(stream);\r\n\t\t});\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (recording) {\r\n\t\t\tmediaRecorder.current?.start();\r\n\t\t} else if (!recording) {\r\n\t\t\tmediaRecorder.current?.stop();\r\n\t\t\tmediaRecorder.current?.addEventListener('dataavailable', (e: BlobEvent) => {\r\n\t\t\t\thandleClickControl(name, URL.createObjectURL(e.data));\r\n\t\t\t});\r\n\t\t}\r\n\t}, [name, handleClickControl, recording]);\r\n\r\n\tconst toggleRecording = () => setRecording(!recording);\r\n\r\n\treturn (\r\n\t\t<ButtonControl\r\n\t\t\tname={'inputRecorder'}\r\n\t\t\tactive={recording}\r\n\t\t\tlabel={label}\r\n\t\t\tlight={light}\r\n\t\t\thandleClickControl={handleClickControl}\r\n\t\t\tonClick={toggleRecording}\r\n\t\t\trenderButtonLight={() => <ButtonLight active={recording} blinking={false} size={size} />}\r\n\t\t\tsize={size}\r\n\t\t\tvalue={Number(recording)}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default InputRecorderControl;\r\n","import React, {ChangeEvent, useEffect, useRef, useState} from 'react';\r\nimport styled from 'styled-components/macro';\r\nimport {rgba} from 'polished';\r\nimport WebMidi, {Input, InputEventNoteon, InputEventNoteoff} from 'webmidi';\r\nimport {MidiKeyEvents} from '../types';\r\nimport {border, color, font} from '../styles';\r\n\r\nconst MidiInputContainer = styled.div`\r\n\twidth: 100%;\r\n\tdisplay: flex;\r\n\tmargin-left: 0.75rem;\r\n\talign-items: center;\r\n`;\r\n\r\nconst MidiInputIcon = styled.svg`\r\n\twidth: 1.5rem;\r\n\theight: 1.5rem;\r\n\tmargin-right: 0.375rem;\r\n`;\r\n\r\nconst MidiInputSelect = styled.select`\r\n\tdisplay: block;\r\n\tpadding: 0.5rem 1.5rem 0.5rem 0.5rem;\r\n\twidth: 11.5rem;\r\n\tappearance: none;\r\n\tbackground-color: ${color.digitalBackground};\r\n\tborder-left: ${border.digitalDisplayVertical};\r\n\tborder-right: ${border.digitalDisplayVertical};\r\n\tborder-top: ${border.digitalDisplayHorizontal};\r\n\tborder-bottom: ${border.digitalDisplayHorizontal};\r\n\r\n\tfont-size: 0.75rem;\r\n\tfont-family: '${font.digital}';\r\n\tfont-weight: 700;\r\n\tcolor: ${color.digitalText};\r\n\ttext-shadow: 0 0 0.5rem ${rgba(color.digitalText, 0.625)},\r\n\t\t0 0 0.25rem ${rgba(color.digitalText, 0.375)}, 0 0 0.125rem ${rgba(color.digitalText, 0.25)};\r\n\r\n\t&::-ms-expand {\r\n\t\tdisplay: none;\r\n\t}\r\n\r\n\t&:focus {\r\n\t\toutline: none;\r\n\t}\r\n`;\r\n\r\nconst MidiInputSelectOption = styled.option`\r\n\t&:not(:checked) {\r\n\t\tcolor: ${color.keyWhite};\r\n\t}\r\n`;\r\n\r\ntype Props = MidiKeyEvents & {};\r\n\r\nconst MidiInputDropdown = ({handleMidiKeyDown, handleMidiKeyUp}: Props) => {\r\n\tconst [inputs, setInputs] = useState<Input[]>([]);\r\n\tconst [activeInputName, setActiveInputName] = useState<string>();\r\n\tconst activeInput = useRef<Input>();\r\n\r\n\tuseEffect(() => {\r\n\t\tWebMidi.enable((err) => {\r\n\t\t\tif (!err) {\r\n\t\t\t\tWebMidi.addListener('connected', (e) => setInputs(WebMidi.inputs));\r\n\t\t\t\tWebMidi.addListener('disconnected', (e) => setInputs(WebMidi.inputs));\r\n\r\n\t\t\t\tsetInputs(WebMidi.inputs);\r\n\t\t\t\tif (WebMidi.inputs.length > 0) activeInput.current = WebMidi.inputs[0];\r\n\t\t\t}\r\n\t\t});\r\n\t}, []);\r\n\r\n\tconst getNoteFromEvent = (e: InputEventNoteon | InputEventNoteoff) =>\r\n\t\t`${e.note.name}${e.note.octave}`.replace('#', '');\r\n\r\n\tconst handleChange = (e: ChangeEvent<HTMLSelectElement>) => {\r\n\t\tactiveInput?.current?.removeListener();\r\n\t\tconst selectedInput = inputs.find((x) => x.name === e.target.value);\r\n\t\tselectedInput?.addListener('noteon', 1, (e) => handleMidiKeyDown(getNoteFromEvent(e)));\r\n\t\tselectedInput?.addListener('noteoff', 1, (e) => handleMidiKeyUp(getNoteFromEvent(e)));\r\n\t\tactiveInput.current = selectedInput;\r\n\t\tsetActiveInputName(selectedInput?.name);\r\n\t};\r\n\r\n\tconst renderIcon = () => (\r\n\t\t<MidiInputIcon id='midi-input-icon' viewBox='-50 -30 200 200'>\r\n\t\t\t<path\r\n\t\t\t\tfill={color.label}\r\n\t\t\t\td='M122.88,35.289L87.945,70.578v-17.58c-22.091-4.577-39.542,0.468-52.796,17.271 c2.301-34.558,25.907-51.235,52.795-52.339L87.945,0L122.88,35.289L122.88,35.289z'\r\n\t\t\t/>\r\n\t\t\t<path\r\n\t\t\t\tfill={color.label}\r\n\t\t\t\td='M6.908,23.746h35.626c-4.587,3.96-8.71,8.563-12.264,13.815H13.815v62.943h80.603V85.831l13.814-13.579v35.159 c0,3.814-3.093,6.907-6.907,6.907H6.908c-3.815,0-6.908-3.093-6.908-6.907V30.653C0,26.838,3.093,23.746,6.908,23.746L6.908,23.746 z'\r\n\t\t\t/>\r\n\t\t</MidiInputIcon>\r\n\t);\r\n\r\n\tconst renderOptions = () =>\r\n\t\tinputs.length > 0 ? (\r\n\t\t\tinputs.map((x, i) => <MidiInputSelectOption key={i}>{x.name}</MidiInputSelectOption>)\r\n\t\t) : (\r\n\t\t\t<MidiInputSelectOption>No MIDI Devices Found</MidiInputSelectOption>\r\n\t\t);\r\n\r\n\treturn (\r\n\t\t<MidiInputContainer>\r\n\t\t\t{renderIcon()}\r\n\t\t\t<MidiInputSelect value={activeInputName} onChange={handleChange}>\r\n\t\t\t\t{renderOptions()}\r\n\t\t\t</MidiInputSelect>\r\n\t\t</MidiInputContainer>\r\n\t);\r\n};\r\n\r\nexport default MidiInputDropdown;\r\n","import React, {useEffect, useRef, useState} from 'react';\r\nimport styled from 'styled-components/macro';\r\nimport WaveformData from 'waveform-data';\r\nimport {getWaveformFromArrayBuffer} from '../js/utils';\r\nimport {usePrevious} from '../js/hooks';\r\nimport {border, color} from '../styles';\r\n\r\nconst WaveformContainer = styled.div`\r\n\tmargin: 0 0.5rem;\r\n\tpadding: 0.125rem 0;\r\n\tdisplay: flex;\r\n\tbackground-color: ${color.digitalBackground};\r\n\tborder-left: ${border.digitalDisplayVertical};\r\n\tborder-right: ${border.digitalDisplayVertical};\r\n\tborder-top: ${border.digitalDisplayHorizontal};\r\n\tborder-bottom: ${border.digitalDisplayHorizontal};\r\n`;\r\n\r\nconst WaveformCanvas = styled.canvas`\r\n\tobject-fit: cover;\r\n\twidth: 100%;\r\n\theight: 4rem;\r\n`;\r\n\r\ntype Props = {\r\n\tsampleUrl?: string;\r\n};\r\n\r\nconst Waveform = ({sampleUrl}: Props) => {\r\n\tconst prevSampleUrl = usePrevious(sampleUrl);\r\n\tconst [waveformData, setWaveformData] = useState<WaveformData>();\r\n\tconst canvasRef = useRef<HTMLCanvasElement>(null);\r\n\r\n\t// RESPOND TO URL PROP CHANGE BY PROCESSING WAVEFORM DATA INTO STATE\r\n\tuseEffect(() => {\r\n\t\tconst handleNewSampleUrl = async () => {\r\n\t\t\tif (sampleUrl) {\r\n\t\t\t\tconst fileFromUrl = await fetch(sampleUrl);\r\n\t\t\t\tconst waveformData = await getWaveformFromArrayBuffer(await fileFromUrl.arrayBuffer());\r\n\t\t\t\tsetWaveformData(waveformData);\r\n\t\t\t}\r\n\t\t};\r\n\t\tsampleUrl !== prevSampleUrl && handleNewSampleUrl();\r\n\t}, [prevSampleUrl, sampleUrl]);\r\n\r\n\t// RESPOND TO WAVEFORM STATE CHANGE BY RE-DRAWING THE CANVAS\r\n\tuseEffect(() => {\r\n\t\tconst clearCanvas = () => (canvasRef.current ? (canvasRef.current.width += 0) : null);\r\n\r\n\t\tconst scaleY = (amplitude: number, height: number) => {\r\n\t\t\tconst range = 256;\r\n\t\t\tconst offset = 128;\r\n\r\n\t\t\treturn height - ((amplitude + offset) * height) / range + 0.5;\r\n\t\t};\r\n\r\n\t\tconst getContextForWaveform = (canvas: HTMLCanvasElement): CanvasRenderingContext2D | null => {\r\n\t\t\tconst ctx = canvas.getContext('2d');\r\n\r\n\t\t\tif (ctx) {\r\n\t\t\t\tctx.strokeStyle = '#ff2601';\r\n\t\t\t\tctx.fillStyle = 'rgba(255, 38, 1, 1)';\r\n\t\t\t\tctx.shadowColor = 'rgba(255, 38, 1, 0.5)';\r\n\t\t\t\tctx.shadowBlur = 6;\r\n\t\t\t\tctx.filter = 'drop-shadow(0 0 0.25rem rgba(255, 38, 1, 0.5))';\r\n\t\t\t}\r\n\r\n\t\t\treturn ctx;\r\n\t\t};\r\n\r\n\t\tconst drawWaveformOnCanvas = () => {\r\n\t\t\tconst canvas = canvasRef.current;\r\n\r\n\t\t\tif (canvas && waveformData) {\r\n\t\t\t\tconst ctx = getContextForWaveform(canvas);\r\n\r\n\t\t\t\tif (ctx) {\r\n\t\t\t\t\tctx.beginPath();\r\n\r\n\t\t\t\t\tlet lineXPos = 0;\r\n\r\n\t\t\t\t\t// Loop forwards, drawing the upper half of the waveform\r\n\t\t\t\t\tfor (let x = 0; x < waveformData.length; x++) {\r\n\t\t\t\t\t\tctx.lineTo(lineXPos, scaleY(waveformData.channel(0).max_sample(x), canvas.height));\r\n\t\t\t\t\t\tlineXPos += canvas.width / waveformData.length;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Loop backwards, drawing the lower half of the waveform\r\n\t\t\t\t\tfor (let x = waveformData.length - 1; x >= 0; x--) {\r\n\t\t\t\t\t\tctx.lineTo(lineXPos, scaleY(waveformData.channel(0).min_sample(x), canvas.height));\r\n\t\t\t\t\t\tlineXPos -= canvas.width / waveformData.length;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\tctx.fill();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tclearCanvas();\r\n\t\tdrawWaveformOnCanvas();\r\n\t}, [waveformData]);\r\n\r\n\t// console.log('WAVEFORM DATA', waveformData);\r\n\r\n\treturn (\r\n\t\t<WaveformContainer>\r\n\t\t\t<WaveformCanvas id='waveform-canvas' ref={canvasRef} width='250' />\r\n\t\t</WaveformContainer>\r\n\t);\r\n};\r\n\r\nexport default Waveform;\r\n","import {useEffect, useRef} from 'react';\r\n\r\nexport const usePrevious = (x: any) => {\r\n\tconst ref = useRef();\r\n\tuseEffect(() => {\r\n\t\tref.current = x;\r\n\t});\r\n\treturn ref.current;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { Meter } from \"tone\";\r\nimport styled from \"styled-components\";\r\nimport useAnimationFrame from \"use-animation-frame\";\r\nimport { border, color } from \"../styles\";\r\nimport { rgba } from \"polished\";\r\nimport { ControlContainer } from \"./controls\";\r\n\r\nconst C_LENGTH = 7.75;\r\nconst C_THICKNESS = 1.25;\r\nconst C_PADDING = 0.125;\r\nconst STEPS = 60;\r\nconst STEP_GAP = 0.0625;\r\n\r\nconst Container = styled.div`\r\n  width: ${`${C_THICKNESS}rem`};\r\n  height: ${`${C_LENGTH}rem`};\r\n  display: flex;\r\n  flex-flow: column-reverse nowrap;\r\n  gap: ${`${STEP_GAP}rem`};\r\n  background-color: ${color.digitalBackground};\r\n  padding: ${`${C_PADDING}rem`};\r\n  border-top: ${border.digitalDisplayHorizontal};\r\n  border-bottom: ${border.digitalDisplayHorizontal};\r\n  border-left: ${border.digitalDisplayVertical};\r\n  border-right: ${border.digitalDisplayVertical};\r\n  overflow-x: hidden;\r\n  /* border-radius: 0.25rem; */\r\n`;\r\n\r\nconst Step = styled.div<{ index: number }>`\r\n  height: ${`${((C_LENGTH - C_PADDING * 2) / STEPS) - STEP_GAP / 2}rem`};\r\n  background-color: ${color.meterLight};\r\n  box-shadow: ${({ index }) =>\r\n    `0 0 0.25rem 0.015625rem ${rgba(\r\n      color.meterLight,\r\n      0.75\r\n    )}`};\r\n  border-top-left-radius: ${({ index }) =>\r\n    index === 0 ? \"0.0625rem\" : \"0\"};\r\n  border-bottom-left-radius: ${({ index }) =>\r\n    index === 0 ? \"0.0625rem\" : \"0\"};\r\n  border-top-right-radius: ${({ index }) =>\r\n    index === STEPS - 1 ? \"0.0625rem\" : \"0\"};\r\n  border-bottom-right-radius: ${({ index }) =>\r\n    index === STEPS - 1 ? \"0.0625rem\" : \"0\"};\r\n`;\r\n\r\ntype Props = {\r\n  meter: Meter;\r\n};\r\n\r\nconst MeterComponent = ({ meter, ...props }: Props) => {\r\n  const [value, setValue] = useState<number>();\r\n\r\n  useAnimationFrame(() => {\r\n    if (meter) {\r\n      const value = meter.getValue();\r\n      setValue(\r\n        Math.min(\r\n          STEPS,\r\n          Math.round(((value > 1 ? 1 : value) as number) * STEPS * 4)\r\n        )\r\n      );\r\n    }\r\n  }, [meter]);\r\n\r\n  return (\r\n    <ControlContainer>\r\n      <Container>\r\n        {new Array(value).fill(null).map((x, i) => (\r\n          <Step index={i} />\r\n        ))}\r\n      </Container>\r\n    </ControlContainer>\r\n  );\r\n};\r\n\r\nexport default React.memo(MeterComponent);\r\n","import React, { Component } from \"react\";\r\nimport styled, { css } from \"styled-components/macro\";\r\nimport {\r\n  CONTROL_TYPES,\r\n  CONTROLS,\r\n  CONTROLS_DEFAULT_VALUES,\r\n  KEYS_MAP,\r\n  LAYOUTS,\r\n  MODIFIER_KEYS,\r\n} from \"./js/statics\";\r\nimport { getValueFromRange } from \"./js/utils\";\r\nimport { audioContext } from \"./js/globals\";\r\nimport Output from \"./js/classes/Output\";\r\nimport GlobalStyle from \"./styles/global\";\r\nimport { border, color, labelText, controlOutline } from \"./styles\";\r\nimport PianoKeys from \"./components/PianoKeys\";\r\nimport ButtonControl from \"./components/controls/button/ButtonControl\";\r\nimport DigitalControl from \"./components/controls/DigitalControl\";\r\nimport KnobControl from \"./components/controls/KnobControl\";\r\nimport FileInputButtonControl from \"./components/controls/button/FileInputButtonControl\";\r\nimport InputRecorderButtonControl from \"./components/controls/button/InputRecorderButtonControl\";\r\nimport { MODES } from \"./js/statics\";\r\nimport MidiInputDropdown from \"./components/MidiInputDropdown\";\r\nimport Waveform from \"./components/Waveform\";\r\nimport Meter from \"./components/Meter\";\r\n\r\n/* STYLING */\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex: 1;\r\n  justify-content: center;\r\n  padding: 1rem;\r\n`;\r\n\r\nconst Instrument = styled.div`\r\n  user-select: none;\r\n  display: flex;\r\n  background-color: ${color.instrumentPlastic};\r\n  padding: 0rem 3rem 0.25rem 0rem;\r\n\r\n  border: ${border.instrument};\r\n  border-top-left-radius: 2.4rem 1.8rem;\r\n  border-top-right-radius: 2.4rem 1.8rem;\r\n  border-bottom-left-radius: 0.8rem 0.8rem;\r\n  border-bottom-right-radius: 0.8rem 0.8rem;\r\n`;\r\n\r\nconst InstrumentRight = styled.div``;\r\n\r\nconst InstrumentLeft = styled.div`\r\n  display: flex;\r\n  flex-flow: column nowrap;\r\n  justify-content: flex-end;\r\n  align-items: center;\r\n  margin: 2rem;\r\n`;\r\n\r\nconst InstrumentBottomLeft = styled.div`\r\n  display: flex;\r\n  flex-flow: column nowrap;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n`;\r\n\r\nconst InstrumentRightTop = styled.div`\r\n  display: flex;\r\n  gap: 1rem;\r\n  height: 19rem;\r\n  padding: 1rem 0;\r\n`;\r\n\r\nconst InstrumentRightTopLeft = styled.div`\r\n`;\r\n\r\nconst InstrumentRightTopRight = styled.div`\r\n  display: flex;\r\n  flex: 1;\r\n  align-items: center;\r\n  gap: 1rem;\r\n`;\r\n\r\nconst InstrumentRightBottom = styled.div``;\r\n\r\nconst GlobalSection = styled.div`\r\n  display: flex;\r\n  height: 100%;\r\n  flex-flow: column nowrap;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n`;\r\n\r\nconst LogoSection = styled.div`\r\n  cursor: default;\r\n  position: relative;\r\n  color: ${color.label};\r\n  width: 13rem;\r\n  height: 4.375rem;\r\n`;\r\n\r\nconst Logo = styled.svg`\r\n  width: 12rem;\r\n`;\r\n\r\nconst LogoSubtext = styled.div`\r\n  position: absolute;\r\n  left: -0.0625rem;\r\n  line-height: 1.25;\r\n  text-transform: uppercase;\r\n  font-style: italic;\r\n  font-weight: 400;\r\n  letter-spacing: 0.125rem;\r\n`;\r\n\r\nconst LogoSubtextBold = styled.span`\r\n  display: inline-block;\r\n  font-weight: 800;\r\n  font-size: 1.0625rem;\r\n  letter-spacing: -0.053125rem;\r\n  padding-right: 0.0625rem;\r\n`;\r\n\r\nconst GlobalControls = styled.div`\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  align-items: center;\r\n  gap: 0.375rem;\r\n`;\r\n\r\nconst EnvelopeControls = styled.div`\r\n  display: grid;\r\n  grid-template-columns: auto auto;\r\n  grid-template-rows: auto auto;\r\n  height: 9rem;\r\n`;\r\n\r\nconst ControlSection = styled.div`\r\n  height: 100%;\r\n  display: flex;\r\n  flex-flow: column nowrap;\r\n  justify-content: space-between;\r\n  gap: 1rem;\r\n`;\r\n\r\nconst ControlWrapper = styled.div`\r\n  display: flex;\r\n  flex-flow: column nowrap;\r\n`;\r\n\r\nconst ControlWrapperVertical = styled(ControlWrapper)`\r\n  height: 100%;\r\n`;\r\n\r\nconst ControlWrapperHorizontal = styled(ControlWrapper)`\r\n  height: 50%;\r\n`;\r\n\r\nconst ControlsContainer = styled.div`\r\n  ${controlOutline};\r\n  height: 100%;\r\n  display: flex;\r\n  padding: 0.5rem 1rem 1rem;\r\n  flex-flow: column nowrap;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst ControlsContainerHorizontal = styled(ControlsContainer)`\r\n  flex-flow: row nowrap;\r\n`;\r\n\r\nconst ControlsSubContainer = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\nconst controlOutlineLabel = css`\r\n  ${labelText};\r\n  color: ${color.instrumentPlastic};\r\n  background-color: ${color.label};\r\n  border-top-left-radius: 0.25rem;\r\n  border-top-right-radius: 0.25rem;\r\n`;\r\n\r\nconst ControlsContainerLabel = styled.div`\r\n  ${controlOutlineLabel};\r\n  text-align: center;\r\n`;\r\n\r\nclass App extends Component {\r\n  /** LIFECYCLE */\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      octaves: 7,\r\n      activeKeys: [],\r\n      activeControl: null,\r\n      activeControlType: null,\r\n      activeScreenY: null,\r\n      activeModifierKey: false,\r\n      ...CONTROLS_DEFAULT_VALUES,\r\n    };\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.initializeSoundEngine();\r\n    this.registerEventListeners();\r\n  };\r\n\r\n  componentWillUnmount = () => {};\r\n\r\n  /** INIT */\r\n\r\n  registerEventListeners = () => {\r\n    // console.log(\"registerEvents\");\r\n\r\n    window.addEventListener(\"beforeunload\", this.terminateSoundEngine);\r\n    window.addEventListener(\"blur\", this.handleBlur);\r\n\r\n    document.addEventListener(\"keydown\", this.handleKeyDown);\r\n    document.addEventListener(\"keyup\", this.handleKeyUp);\r\n\r\n    document.addEventListener(\"mousedown\", this.handleMouseDown);\r\n    document.addEventListener(\"mouseup\", this.handleMouseUp);\r\n    document.addEventListener(\"mouseleave\", this.handleMouseLeave);\r\n    document.addEventListener(\"mouseout\", this.handleMouseOut);\r\n\r\n    document.addEventListener(\"drag\", (e) => e.preventDefault());\r\n    document.addEventListener(\"dragend\", (e) => e.preventDefault());\r\n    document.addEventListener(\"dragenter\", (e) => e.preventDefault());\r\n    document.addEventListener(\"dragexit\", (e) => e.preventDefault());\r\n    document.addEventListener(\"dragleave\", (e) => e.preventDefault());\r\n    document.addEventListener(\"dragover\", (e) => e.preventDefault());\r\n    document.addEventListener(\"dragstart\", (e) => e.preventDefault());\r\n    document.addEventListener(\"drop\", (e) => e.preventDefault());\r\n  };\r\n\r\n  initializeSoundEngine = () => {\r\n    this.output = new Output(this, audioContext);\r\n  };\r\n\r\n  terminateSoundEngine = () => {\r\n    audioContext && audioContext.dispose();\r\n  };\r\n\r\n  resumeAudioContext = () => {\r\n    if (audioContext.state !== \"running\") {\r\n      audioContext.resume();\r\n    }\r\n  };\r\n\r\n  /** GLOBAL EVENT HANDLERS */\r\n\r\n  handleBlur = (e) => {\r\n    // console.log('handleBlur', e);\r\n\r\n    this.setState({ activeModifierKey: false });\r\n  };\r\n\r\n  handleKeyDown = (e) => {\r\n    // console.log('handleKeyDown', e);\r\n\r\n    e.preventDefault();\r\n    const keyPressed = e.key.toLowerCase();\r\n    const pianoKey = LAYOUTS[this.state.layout][keyPressed];\r\n\r\n    if (pianoKey) {\r\n      this.activatePianoKey(pianoKey);\r\n    } else if (MODIFIER_KEYS.includes(keyPressed)) {\r\n      this.setState({ activeModifierKey: true });\r\n    }\r\n\r\n    this.resumeAudioContext();\r\n  };\r\n\r\n  handleKeyUp = (e) => {\r\n    // console.log(\"handleKeyUp\", e);\r\n\r\n    const keyReleased = e.key.toLowerCase();\r\n\r\n    if (MODIFIER_KEYS.includes(keyReleased)) {\r\n      this.setState({ activeModifierKey: false });\r\n    }\r\n\r\n    const pianoKey = LAYOUTS[this.state.layout][keyReleased];\r\n    if (pianoKey) {\r\n      this.deactivatePianoKey(pianoKey);\r\n    }\r\n  };\r\n\r\n  handleMouseDown = (e) => {\r\n    // console.log('handleMouseDown', e);\r\n\r\n    this.resumeAudioContext();\r\n  };\r\n\r\n  handleMouseUp = (e) => {\r\n    // console.log('handleMouseUp', e);\r\n\r\n    this.mouseDownOnKeys = false;\r\n    this.state.activeControl &&\r\n      this.setState({\r\n        activeControl: null,\r\n        activeModifierKey: false,\r\n      });\r\n  };\r\n\r\n  handleMouseLeave = (e) => {\r\n    // console.log(\"handleMouseLeave\", e);\r\n  };\r\n\r\n  handleMouseOut = (e) => {\r\n    // console.log(\"handleMouseOut\", e);\r\n  };\r\n\r\n  /** PIANO KEYS */\r\n\r\n  handleMouseDownPianoKey = (e) => {\r\n    // console.log('handleMouseDownPianoKey', e);\r\n\r\n    if (e.button === 0) {\r\n      this.activatePianoKey(e.target.title);\r\n      this.mouseDownOnKeys = true;\r\n    }\r\n  };\r\n\r\n  handleMouseUpPianoKey = (e) => {\r\n    // console.log('handleMouseUpPianoKey', e);\r\n\r\n    if (e.button === 0) {\r\n      this.mouseDownOnKeys = false;\r\n      this.deactivatePianoKey(e.target.title);\r\n    }\r\n  };\r\n\r\n  handleMouseOverPianoKey = (e) => {\r\n    // console.log(\"handleMouseOverPianoKey\", e);\r\n    // this.mouseDownOnKeys && this.activatePianoKey(e.target.title);\r\n  };\r\n\r\n  handleMouseLeavePianoKey = (e) => {\r\n    // console.log(\"handleMouseLeavePianoKey\", e);\r\n\r\n    this.mouseDownOnKeys && this.deactivatePianoKey(e.target.title);\r\n  };\r\n\r\n  activatePianoKey = (key) => {\r\n    // console.log('activatePianoKey', key);\r\n\r\n    if (!this.state.activeKeys.includes(key)) {\r\n      this.output.playKey(KEYS_MAP[key].freq);\r\n      this.setState((prevState) => ({\r\n        activeKeys: [...prevState.activeKeys, key],\r\n      }));\r\n    }\r\n  };\r\n\r\n  deactivatePianoKey = (key) => {\r\n    // console.log('deactivatePianoKey', key);\r\n\r\n    if (this.state.activeKeys.includes(key)) {\r\n      this.output.stopKey(KEYS_MAP[key].freq);\r\n      this.setState((prevState) => ({\r\n        activeKeys: prevState.activeKeys.filter((k) => k !== key),\r\n      }));\r\n    }\r\n  };\r\n\r\n  /** SYNTH CONTROLS */\r\n\r\n  handleClickControl = (control, value) => {\r\n    // console.log(`handleClickControl(${control}, ${value})`);\r\n\r\n    this.setControlValue(control, value);\r\n  };\r\n\r\n  handleMouseDownControl = (activeControl, activeControlType, e) => {\r\n    console.log(\"handleMouseDownControl\", activeControl, activeControlType, e);\r\n\r\n    if (e.button === 0) {\r\n      // left click\r\n      if (this.state.activeModifierKey) {\r\n        // holding ctrl\r\n        this.resetControlValue(activeControl);\r\n      } else {\r\n        this.activateControl(activeControl, activeControlType, e.screenY);\r\n      }\r\n    }\r\n  };\r\n\r\n  handleMouseUpControl = (activeControl, e) => {\r\n    // console.log('handleMouseUpControl', activeControl, e);\r\n\r\n    if (e.button === 0) {\r\n      this.deactivateControl(activeControl);\r\n    }\r\n  };\r\n\r\n  handleMouseMoveControl = (event) => {\r\n    // console.log(\"handleMouseMoveControl\", event, this.state);\r\n\r\n    const {\r\n      activeModifierKey,\r\n      activeControl,\r\n      activeControlType,\r\n      activeScreenY,\r\n    } = this.state;\r\n\r\n    if (activeControl) {\r\n      let pixelStep = CONTROL_TYPES[activeControlType].pixelStep || 5;\r\n\r\n      if (activeModifierKey) {\r\n        pixelStep *= 10;\r\n      }\r\n\r\n      const movement = Math.abs(event.screenY - activeScreenY);\r\n\r\n      let change = 0;\r\n      if (event.screenY - pixelStep > activeScreenY) {\r\n        change = Math.round(-movement / pixelStep);\r\n      } else if (event.screenY + pixelStep < activeScreenY) {\r\n        change = Math.round(movement / pixelStep);\r\n      }\r\n\r\n      if (change) {\r\n        const newState = { ...this.state };\r\n        newState[\"activeScreenY\"] = event.screenY;\r\n        this.setState(newState);\r\n        this.changeControlValue(activeControl, change);\r\n      }\r\n    }\r\n  };\r\n\r\n  handleMouseWheelControl = (activeControl, activeControlType, e) => {\r\n    // console.log('handleMouseWheelControl', activeControl, activeControlType, e.deltaY);\r\n\r\n    // const {pixelStep} = CONTROL_TYPES[activeControlType];\r\n\r\n    // const change = e.deltaY > 0 ? -1 : 1;\r\n    // const value = change * Math.round(5 / pixelStep);\r\n    // this.changeControlValue(activeControl, value);\r\n    return false;\r\n  };\r\n\r\n  activateControl = (activeControl, activeControlType, screenY) => {\r\n    // console.log('activateControl', activeControl, activeControlType, screenY);\r\n\r\n    document.addEventListener(\"mousemove\", this.handleMouseMoveControl);\r\n\r\n    this.setState({\r\n      activeControl,\r\n      activeControlType,\r\n      activeScreenY: screenY,\r\n    });\r\n  };\r\n\r\n  deactivateControl = (activeControl) => {\r\n    // console.log('deactiveControl', activeControl);\r\n\r\n    document.removeEventListener(\"mousemove\", this.handleMouseMoveControl);\r\n\r\n    this.setState({ activeControl: null });\r\n  };\r\n\r\n  changeControlValue = (control, change) => {\r\n    // console.log('changeControlValue', control, change);\r\n\r\n    const { range } = CONTROLS[control];\r\n\r\n    let value = Number.isInteger(this.state[control])\r\n      ? this.state[control] + change\r\n      : 0;\r\n\r\n    if (range) {\r\n      value = getValueFromRange(value, range);\r\n    }\r\n\r\n    this.setControlValue(control, value);\r\n  };\r\n\r\n  setControlValue = (control, value) => {\r\n    console.log(\"setControlValue\", control, value);\r\n\r\n    this.output.set(control, value);\r\n    this.setState({ [control]: value });\r\n  };\r\n\r\n  resetControlValue = (control) => {\r\n    console.log(\"resetControlValue\", control);\r\n    this.setState({ [control]: CONTROLS[control].defaultValue });\r\n  };\r\n\r\n  /* RENDER FUNCTIONS */\r\n\r\n  render() {\r\n    // console.log(\"app state:\", this.state);\r\n\r\n    this.sharedControlProps = {\r\n      activeControl: this.state.activeControl,\r\n      handleClickControl: this.handleClickControl,\r\n      handleMouseDownControl: this.handleMouseDownControl,\r\n      handleMouseUpControl: this.handleMouseUpControl,\r\n      handleMouseWheelControl: this.handleMouseWheelControl,\r\n    };\r\n\r\n    return (\r\n      <>\r\n        <GlobalStyle />\r\n        <Container\r\n        // onContextMenu={(e) => {\r\n        // \te.preventDefault();\r\n        // }}\r\n        >\r\n          <Instrument>\r\n            <InstrumentLeft>\r\n              <InstrumentBottomLeft>\r\n                <Meter meter={this.output?.meter} />\r\n                <DigitalControl\r\n                  {...this.sharedControlProps}\r\n                  name=\"polyphony\"\r\n                  label=\"poly\"\r\n                  value={this.state.polyphony}\r\n                />\r\n                {/* <KnobControl\r\n        {...this.sharedControlProps}\r\n        name=\"portamento\"\r\n        label=\"porta\"\r\n        value={portamento}\r\n        size=\"medium\"\r\n      /> */}\r\n                <DigitalControl\r\n                  {...this.sharedControlProps}\r\n                  name=\"layout\"\r\n                  value={this.state.layout}\r\n                />\r\n              </InstrumentBottomLeft>\r\n            </InstrumentLeft>\r\n            <InstrumentRight>\r\n              <InstrumentRightTop>\r\n                <InstrumentRightTopLeft>\r\n                  <GlobalSection>\r\n                    <LogoSection>\r\n                      <Logo viewBox=\"304.103 332.216 470.661 104.256\">\r\n                        <g>\r\n                          <path\r\n                            d=\"M 654.248 361.208 L 652.04 368.792 L 623.528 431 L 608.264 431 L 635.24 373.784 L 617.768 373.784 L 621.512 361.208 L 654.248 361.208 Z \"\r\n                            fill=\"rgb(171,171,171)\"\r\n                          />\r\n                          <path\r\n                            d=\" M 688.821 378.476 L 677.685 416.396 L 677.685 416.396 Q 676.725 419.564 675.093 422.54 L 675.093 422.54 L 675.093 422.54 Q 673.461 425.516 670.869 427.724 L 670.869 427.724 L 670.869 427.724 Q 668.277 429.932 664.533 431.228 L 664.533 431.228 L 664.533 431.228 Q 660.789 432.524 655.797 432.332 L 655.797 432.332 L 655.797 432.332 Q 652.917 432.236 649.845 431.324 L 649.845 431.324 L 649.845 431.324 Q 646.773 430.412 644.613 428.3 L 644.613 428.3 L 644.613 428.3 Q 642.453 426.188 641.685 422.732 L 641.685 422.732 L 641.685 422.732 Q 640.917 419.276 642.453 414.092 L 642.453 414.092 L 654.261 373.868 L 654.261 373.868 Q 656.565 366.188 661.845 363.02 L 661.845 363.02 L 661.845 363.02 Q 667.125 359.852 674.709 359.852 L 674.709 359.852 L 674.709 359.852 Q 684.021 359.852 687.813 364.364 L 687.813 364.364 L 687.813 364.364 Q 691.605 368.876 688.821 378.476 L 688.821 378.476 Z  M 662.901 417.548 L 675.189 375.596 L 675.189 375.596 Q 675.765 373.58 675.333 372.428 L 675.333 372.428 L 675.333 372.428 Q 674.901 371.276 672.693 371.276 L 672.693 371.276 L 672.693 371.276 Q 670.677 371.276 669.717 372.38 L 669.717 372.38 L 669.717 372.38 Q 668.757 373.484 668.277 375.308 L 668.277 375.308 L 655.893 417.164 L 655.893 417.164 Q 654.741 421.1 658.293 421.196 L 658.293 421.196 L 658.293 421.196 Q 660.213 421.292 661.269 420.428 L 661.269 420.428 L 661.269 420.428 Q 662.325 419.564 662.901 417.548 L 662.901 417.548 Z \"\r\n                            fillRule=\"evenodd\"\r\n                            fill=\"rgb(171,171,171)\"\r\n                          />\r\n                          <path\r\n                            d=\" M 735.656 361.208 L 726.92 390.872 L 726.92 390.872 Q 725.288 396.248 717.992 396.152 L 717.992 396.152 L 717.992 396.152 Q 721.448 396.344 722.696 398.792 L 722.696 398.792 L 722.696 398.792 Q 723.944 401.24 722.984 404.312 L 722.984 404.312 L 715.112 431 L 700.52 431 L 708.584 403.736 L 708.584 403.736 Q 708.872 402.68 708.632 401.96 L 708.632 401.96 L 708.632 401.96 Q 708.392 401.24 706.76 401.24 L 706.76 401.24 L 704.552 401.24 L 704.552 401.24 Q 702.92 401.24 702.344 401.624 L 702.344 401.624 L 702.344 401.624 Q 701.768 402.008 701.384 403.256 L 701.384 403.256 L 693.128 431 L 678.536 431 L 686.6 403.64 L 686.6 403.64 Q 686.984 402.296 687.608 401 L 687.608 401 L 687.608 401 Q 688.232 399.704 689.192 398.648 L 689.192 398.648 L 689.192 398.648 Q 690.152 397.592 691.688 396.872 L 691.688 396.872 L 691.688 396.872 Q 693.224 396.152 695.528 396.056 L 695.528 396.056 L 695.528 396.056 Q 692.168 396.056 691.112 393.944 L 691.112 393.944 L 691.112 393.944 Q 690.056 391.832 690.92 388.952 L 690.92 388.952 L 699.08 361.208 L 713.672 361.208 L 705.608 388.76 L 705.608 388.76 Q 705.224 390.104 705.8 390.536 L 705.8 390.536 L 705.8 390.536 Q 706.376 390.968 707.528 390.968 L 707.528 390.968 L 710.12 390.968 L 710.12 390.968 Q 711.176 390.968 711.848 390.536 L 711.848 390.536 L 711.848 390.536 Q 712.52 390.104 713 388.472 L 713 388.472 L 721.064 361.208 L 735.656 361.208 Z \"\r\n                            fill=\"rgb(171,171,171)\"\r\n                          />\r\n                          <path\r\n                            d=\" M 720.296 431 L 740.84 361.208 L 768.488 361.208 L 768.488 361.208 Q 772.424 361.208 773.864 363.656 L 773.864 363.656 L 773.864 363.656 Q 775.304 366.104 774.44 369.08 L 774.44 369.08 L 758.984 421.592 L 758.984 421.592 Q 758.12 424.664 756.824 426.536 L 756.824 426.536 L 756.824 426.536 Q 755.528 428.408 753.56 429.416 L 753.56 429.416 L 753.56 429.416 Q 751.592 430.424 748.904 430.712 L 748.904 430.712 L 748.904 430.712 Q 746.216 431 742.472 431 L 742.472 431 L 720.296 431 Z  M 756.584 372.44 L 751.976 372.44 L 738.152 419.384 L 742.76 419.384 L 742.76 419.384 Q 744.488 419.384 745.16 418.808 L 745.16 418.808 L 745.16 418.808 Q 745.832 418.232 746.216 416.984 L 746.216 416.984 L 758.408 375.512 L 758.408 375.512 Q 758.888 373.976 758.552 373.208 L 758.552 373.208 L 758.552 373.208 Q 758.216 372.44 756.584 372.44 L 756.584 372.44 Z \"\r\n                            fillRule=\"evenodd\"\r\n                            fill=\"rgb(171,171,171)\"\r\n                          />\r\n                          <path\r\n                            d=\" M 608.48 405.752 L 605.408 416.216 L 599.456 416.216 L 595.04 431 L 580.64 431 L 585.056 416.216 L 564.224 416.216 L 568.448 401.528 L 595.52 361.208 L 615.68 361.208 L 602.528 405.752 L 608.48 405.752 Z  M 580.544 405.752 L 588.032 405.752 L 595.424 380.408 L 580.928 404.504 L 580.544 405.752 Z \"\r\n                            fillRule=\"evenodd\"\r\n                            fill=\"rgb(171,171,171)\"\r\n                          />\r\n                          <path\r\n                            d=\" M 403.136 361.208 L 382.592 431 L 368.192 431 L 376.832 401.528 L 369.536 401.528 L 360.8 431 L 346.4 431 L 366.944 361.208 L 381.344 361.208 L 373.184 389.144 L 380.48 389.144 L 388.736 361.208 L 403.136 361.208 Z \"\r\n                            fill=\"rgb(171,171,171)\"\r\n                          />\r\n                          <path\r\n                            d=\" M 414.944 362.208 L 435.872 362.208 L 435.872 362.208 Q 439.232 362.208 440.816 364.656 L 440.816 364.656 L 440.816 364.656 Q 442.4 367.104 441.536 370.176 L 441.536 370.176 L 425.504 424.608 L 425.504 424.608 Q 424.16 428.928 421.04 430.464 L 421.04 430.464 L 421.04 430.464 Q 417.92 432 414.272 432 L 414.272 432 L 397.088 432 L 397.088 432 Q 395.264 432 393.728 431.376 L 393.728 431.376 L 393.728 431.376 Q 392.192 430.752 391.184 429.504 L 391.184 429.504 L 391.184 429.504 Q 390.176 428.256 389.84 426.48 L 389.84 426.48 L 389.84 426.48 Q 389.504 424.704 390.176 422.496 L 390.176 422.496 L 405.92 369.024 L 405.92 369.024 Q 406.688 365.952 409.04 364.08 L 409.04 364.08 L 409.04 364.08 Q 411.392 362.208 414.944 362.208 L 414.944 362.208 Z  M 424.448 372.44 L 420.8 372.44 L 420.8 372.44 Q 419.744 372.44 419.264 372.92 L 419.264 372.92 L 419.264 372.92 Q 418.784 373.4 418.592 374.168 L 418.592 374.168 L 405.728 417.656 L 405.728 417.656 Q 405.248 419.384 407.072 419.384 L 407.072 419.384 L 410.816 419.384 L 410.816 419.384 Q 412.64 419.384 413.12 417.656 L 413.12 417.656 L 425.888 374.264 L 425.888 374.264 Q 426.368 372.44 424.448 372.44 L 424.448 372.44 Z \"\r\n                            fillRule=\"evenodd\"\r\n                            fill=\"rgb(171,171,171)\"\r\n                          />\r\n                          <path\r\n                            d=\" M 456.032 361.208 L 480.032 361.208 L 476.288 373.784 L 461.312 373.784 L 461.312 373.784 Q 460.16 373.784 459.536 374.168 L 459.536 374.168 L 459.536 374.168 Q 458.912 374.552 458.528 375.896 L 458.528 375.896 L 446.528 416.6 L 446.528 416.6 Q 445.76 419.384 448.736 419.384 L 448.736 419.384 L 453.632 419.384 L 458.912 401.528 L 455.936 401.528 L 459.584 389.144 L 476.288 389.144 L 464.768 428.312 L 448.64 436.472 L 450.176 431 L 441.248 431 L 441.248 431 Q 438.752 431 436.64 430.28 L 436.64 430.28 L 436.64 430.28 Q 434.528 429.56 433.136 427.976 L 433.136 427.976 L 433.136 427.976 Q 431.744 426.392 431.312 423.944 L 431.312 423.944 L 431.312 423.944 Q 430.88 421.496 431.936 418.04 L 431.936 418.04 L 446.72 367.736 L 446.72 367.736 Q 447.872 363.8 450.224 362.504 L 450.224 362.504 L 450.224 362.504 Q 452.576 361.208 456.032 361.208 L 456.032 361.208 Z \"\r\n                            fill=\"rgb(171,171,171)\"\r\n                          />\r\n                          <path\r\n                            d=\" M 503.648 361.208 L 503.552 361.208 L 487.328 416.408 L 487.328 416.408 Q 486.848 418.04 487.472 418.664 L 487.472 418.664 L 487.472 418.664 Q 488.096 419.288 489.728 419.288 L 489.728 419.288 L 493.472 419.288 L 510.56 361.208 L 524.96 361.208 L 505.184 428.312 Q 505.17 428.341 504.62 428.413 Q 498.832 431.016 490.112 431 L 481.76 431 L 481.76 431 Q 479.072 431 476.912 430.28 L 476.912 430.28 L 476.912 430.28 Q 474.752 429.56 473.408 427.976 L 473.408 427.976 L 473.408 427.976 Q 472.064 426.392 471.728 423.944 L 471.728 423.944 L 471.728 423.944 Q 471.392 421.496 472.448 418.04 L 472.448 418.04 L 489.152 361.208 L 503.648 361.208 Z \"\r\n                            fill=\"rgb(171,171,171)\"\r\n                          />\r\n                          <path\r\n                            d=\" M 509.216 431 L 529.76 361.208 L 542.144 361.208 L 542.624 388.184 L 550.592 361.208 L 564.608 361.208 L 544.064 431 L 532.448 431 L 531.2 403.16 L 522.848 431 L 509.216 431 Z \"\r\n                            fill=\"rgb(171,171,171)\"\r\n                          />\r\n                          <path\r\n                            d=\" M 317.72 375.896 L 343.928 375.896 L 343.928 375.896 Q 346.712 375.896 348.872 376.664 L 348.872 376.664 L 348.872 376.664 Q 351.032 377.432 352.328 379.112 L 352.328 379.112 L 352.328 379.112 Q 353.624 380.792 353.864 383.384 L 353.864 383.384 L 353.864 383.384 Q 354.104 385.976 353.048 389.624 L 353.048 389.624 L 343.256 422.936 L 343.256 422.936 Q 342.488 425.528 341.096 427.112 L 341.096 427.112 L 341.096 427.112 Q 339.704 428.696 338.024 429.56 L 338.024 429.56 L 338.024 429.56 Q 336.344 430.424 334.472 430.712 L 334.472 430.712 L 334.472 430.712 Q 332.6 431 330.776 431 L 330.776 431 L 311.864 431 L 311.864 431 Q 307.736 431 305.48 428.024 L 305.48 428.024 L 305.48 428.024 Q 303.224 425.048 304.664 420.248 L 304.664 420.248 L 309.464 403.736 L 324.728 403.736 L 321.08 415.832 L 321.08 415.832 Q 320.696 417.08 321.272 417.416 L 321.272 417.416 L 321.272 417.416 Q 321.848 417.752 322.712 417.752 L 322.712 417.752 L 326.36 417.752 L 326.36 417.752 Q 327.704 417.752 328.376 417.32 L 328.376 417.32 L 328.376 417.32 Q 329.048 416.888 329.432 415.544 L 329.432 415.544 L 337.208 389.24 L 337.208 389.24 Q 337.4 388.664 337.256 388.28 L 337.256 388.28 L 337.256 388.28 Q 337.112 387.896 336.152 387.896 L 336.152 387.896 L 314.168 387.896 L 317.72 375.896 Z \"\r\n                            fill=\"rgb(171,171,171)\"\r\n                          />\r\n                          <path\r\n                            d=\" M 333.729 375.977 L 317.697 375.977 L 327.489 341.029 L 327.489 341.029 Q 328.257 338.294 329.505 336.572 L 329.505 336.572 L 329.505 336.572 Q 330.753 334.85 332.337 333.888 L 332.337 333.888 L 332.337 333.888 Q 333.921 332.925 335.745 332.621 L 335.745 332.621 L 335.745 332.621 Q 337.569 332.318 339.393 332.318 L 339.393 332.318 L 369.249 332.318 L 361.281 361.086 L 345.057 364.935 L 350.433 345.79 L 344.385 345.79 L 344.385 345.79 Q 343.041 345.79 342.417 346.246 L 342.417 346.246 L 342.417 346.246 Q 341.793 346.702 341.409 348.12 L 341.409 348.12 L 333.729 375.977 Z \"\r\n                            fill=\"rgb(171,171,171)\"\r\n                          />\r\n                        </g>\r\n                      </Logo>\r\n                      <LogoSubtext>\r\n                        <LogoSubtextBold>\r\n                          <span>Re</span>\r\n                          <span style={{ letterSpacing: \"-0.15625rem\" }}>\r\n                            a\r\n                          </span>\r\n                          <span>ct</span>\r\n                        </LogoSubtextBold>\r\n                        <span style={{ marginLeft: \"0.5rem\" }}>Instrument</span>\r\n                      </LogoSubtext>\r\n                    </LogoSection>\r\n                    <MidiInputDropdown\r\n                      handleMidiKeyDown={this.activatePianoKey}\r\n                      handleMidiKeyUp={this.deactivatePianoKey}\r\n                    />\r\n                    <GlobalControls>\r\n                      <KnobControl\r\n                        {...this.sharedControlProps}\r\n                        name=\"volume\"\r\n                        value={this.state.volume}\r\n                        size=\"large\"\r\n                      />\r\n                      <EnvelopeControls>\r\n                        <div>\r\n                          <KnobControl\r\n                            {...this.sharedControlProps}\r\n                            name=\"attack\"\r\n                            value={this.state.attack}\r\n                            size=\"small\"\r\n                          />\r\n                        </div>\r\n                        <div>\r\n                          <KnobControl\r\n                            {...this.sharedControlProps}\r\n                            name=\"decay\"\r\n                            value={this.state.decay}\r\n                            size=\"small\"\r\n                          />\r\n                        </div>\r\n                        <div>\r\n                          <KnobControl\r\n                            {...this.sharedControlProps}\r\n                            name=\"sustain\"\r\n                            value={this.state.sustain}\r\n                            size=\"small\"\r\n                          />\r\n                        </div>\r\n                        <div>\r\n                          <KnobControl\r\n                            {...this.sharedControlProps}\r\n                            name=\"release\"\r\n                            value={this.state.release}\r\n                            size=\"small\"\r\n                          />\r\n                        </div>\r\n                      </EnvelopeControls>\r\n                    </GlobalControls>\r\n                  </GlobalSection>\r\n                </InstrumentRightTopLeft>\r\n                <InstrumentRightTopRight>\r\n                  <ControlSection>\r\n                    <ControlWrapperVertical>\r\n                      <ControlsContainerLabel>MODE</ControlsContainerLabel>\r\n                      <ControlsContainer>\r\n                        <ButtonControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"mode\"\r\n                          label={\"SYNTH\"}\r\n                          value={MODES.SYNTH}\r\n                          active={this.state.mode === MODES.SYNTH}\r\n                          size=\"large\"\r\n                          light={true}\r\n                        />\r\n                        <ButtonControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"mode\"\r\n                          label={\"SAMPLER\"}\r\n                          value={MODES.SAMPLER}\r\n                          active={this.state.mode === MODES.SAMPLER}\r\n                          size=\"large\"\r\n                          light={true}\r\n                        />\r\n                      </ControlsContainer>\r\n                    </ControlWrapperVertical>\r\n                  </ControlSection>\r\n                  {this.state.mode === MODES.SAMPLER ? (\r\n                    <ControlSection>\r\n                      <ControlWrapperVertical>\r\n                        <ControlsContainerLabel>SAMPLE</ControlsContainerLabel>\r\n                        <ControlsContainer>\r\n                          <ControlsSubContainer>\r\n                            {/* <DigitalControl {...props} name='sample' label='select' value={sample} /> */}\r\n                            <FileInputButtonControl\r\n                              handleClickControl={this.handleClickControl}\r\n                              name=\"sample\"\r\n                              label=\"load\"\r\n                              value={\"load\"}\r\n                              size=\"small\"\r\n                            />\r\n                            <InputRecorderButtonControl\r\n                              handleClickControl={this.handleClickControl}\r\n                              name={\"sample\"}\r\n                              label=\"record\"\r\n                              size=\"small\"\r\n                              light={true}\r\n                            />\r\n                          </ControlsSubContainer>\r\n                          <Waveform sampleUrl={this.state.sample} />\r\n                          <ControlsSubContainer>\r\n                            <KnobControl\r\n                              {...this.sharedControlProps}\r\n                              name=\"samplePitch\"\r\n                              label=\"pitch\"\r\n                              value={this.state.samplePitch}\r\n                              size=\"small\"\r\n                            />\r\n                          </ControlsSubContainer>\r\n                        </ControlsContainer>\r\n                      </ControlWrapperVertical>\r\n                    </ControlSection>\r\n                  ) : (\r\n                    <>\r\n                      <ControlSection>\r\n                        <ControlWrapperHorizontal>\r\n                          <ControlsContainerLabel>OSC 1</ControlsContainerLabel>\r\n                          <ControlsContainerHorizontal>\r\n                            <DigitalControl\r\n                              {...this.sharedControlProps}\r\n                              name=\"osc1Shape\"\r\n                              label=\"shape\"\r\n                              value={this.state.osc1Shape}\r\n                            />\r\n                            <DigitalControl\r\n                              {...this.sharedControlProps}\r\n                              name=\"osc1Octave\"\r\n                              label=\"octave\"\r\n                              value={this.state.osc1Octave}\r\n                            />\r\n                            <DigitalControl\r\n                              {...this.sharedControlProps}\r\n                              name=\"osc1Transpose\"\r\n                              label=\"trans\"\r\n                              value={this.state.osc1Transpose}\r\n                            />\r\n                            <KnobControl\r\n                              {...this.sharedControlProps}\r\n                              name=\"osc1Detune\"\r\n                              label=\"tune\"\r\n                              value={this.state.osc1Detune}\r\n                              size=\"medium\"\r\n                            />\r\n                            <KnobControl\r\n                              {...this.sharedControlProps}\r\n                              name=\"osc1Gain\"\r\n                              label=\"vol\"\r\n                              value={this.state.osc1Gain}\r\n                              size=\"medium\"\r\n                            />\r\n                          </ControlsContainerHorizontal>\r\n                        </ControlWrapperHorizontal>\r\n                        <ControlWrapperHorizontal>\r\n                          <ControlsContainerLabel>OSC 2</ControlsContainerLabel>\r\n                          <ControlsContainerHorizontal>\r\n                            <DigitalControl\r\n                              {...this.sharedControlProps}\r\n                              name=\"osc2Shape\"\r\n                              label=\"shape\"\r\n                              value={this.state.osc2Shape}\r\n                            />\r\n                            <DigitalControl\r\n                              {...this.sharedControlProps}\r\n                              name=\"osc2Octave\"\r\n                              label=\"octave\"\r\n                              value={this.state.osc2Octave}\r\n                            />\r\n                            <DigitalControl\r\n                              {...this.sharedControlProps}\r\n                              name=\"osc2Transpose\"\r\n                              label=\"trans\"\r\n                              value={this.state.osc2Transpose}\r\n                            />\r\n                            <KnobControl\r\n                              {...this.sharedControlProps}\r\n                              name=\"osc2Detune\"\r\n                              label=\"tune\"\r\n                              value={this.state.osc2Detune}\r\n                              size=\"medium\"\r\n                            />\r\n                            <KnobControl\r\n                              {...this.sharedControlProps}\r\n                              name=\"osc2Gain\"\r\n                              label=\"vol\"\r\n                              value={this.state.osc2Gain}\r\n                              size=\"medium\"\r\n                            />\r\n                          </ControlsContainerHorizontal>\r\n                        </ControlWrapperHorizontal>\r\n                      </ControlSection>\r\n                      <ControlSection>\r\n                        <ControlWrapperVertical>\r\n                          <ControlsContainerLabel>\r\n                            MOD OSC\r\n                          </ControlsContainerLabel>\r\n                          <ControlsContainer>\r\n                            <DigitalControl\r\n                              {...this.sharedControlProps}\r\n                              name=\"modOscShape\"\r\n                              label=\"shape\"\r\n                              value={this.state.modOscShape}\r\n                            />\r\n                            <KnobControl\r\n                              {...this.sharedControlProps}\r\n                              name=\"modOscFreq\"\r\n                              label=\"freq\"\r\n                              value={this.state.modOscFreq}\r\n                              size=\"small\"\r\n                            />\r\n                            <KnobControl\r\n                              {...this.sharedControlProps}\r\n                              name=\"modOscGain\"\r\n                              label=\"vol\"\r\n                              value={this.state.modOscGain}\r\n                              size=\"small\"\r\n                            />\r\n                          </ControlsContainer>\r\n                        </ControlWrapperVertical>\r\n                      </ControlSection>\r\n                    </>\r\n                  )}\r\n                  <ControlSection>\r\n                    <ControlWrapperHorizontal>\r\n                      <ControlsContainerLabel>FILTER 1</ControlsContainerLabel>\r\n                      <ControlsContainerHorizontal>\r\n                        <DigitalControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"filter1Type\"\r\n                          label=\"type\"\r\n                          value={this.state.filter1Type}\r\n                        />\r\n                        <DigitalControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"filter1Rolloff\"\r\n                          label=\"steep\"\r\n                          value={this.state.filter1Rolloff}\r\n                        />\r\n                        <KnobControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"filter1Freq\"\r\n                          label=\"cutoff\"\r\n                          value={this.state.filter1Freq}\r\n                          size=\"medium\"\r\n                        />\r\n                        <KnobControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"filter1Q\"\r\n                          label=\"res\"\r\n                          value={this.state.filter1Q}\r\n                          size=\"medium\"\r\n                        />\r\n                      </ControlsContainerHorizontal>\r\n                    </ControlWrapperHorizontal>\r\n                    <ControlWrapperHorizontal>\r\n                      <ControlsContainerLabel>FILTER 2</ControlsContainerLabel>\r\n                      <ControlsContainerHorizontal>\r\n                        <DigitalControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"filter2Type\"\r\n                          label=\"type\"\r\n                          value={this.state.filter2Type}\r\n                        />\r\n                        <DigitalControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"filter2Rolloff\"\r\n                          label=\"steep\"\r\n                          value={this.state.filter2Rolloff}\r\n                        />\r\n                        <KnobControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"filter2Freq\"\r\n                          label=\"cutoff\"\r\n                          value={this.state.filter2Freq}\r\n                          size=\"medium\"\r\n                        />\r\n                        <KnobControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"filter2Q\"\r\n                          label=\"res\"\r\n                          value={this.state.filter2Q}\r\n                          size=\"medium\"\r\n                        />\r\n                      </ControlsContainerHorizontal>\r\n                    </ControlWrapperHorizontal>\r\n                  </ControlSection>\r\n                  <ControlSection>\r\n                    <ControlWrapperVertical>\r\n                      <ControlsContainerLabel>VIBRATO</ControlsContainerLabel>\r\n                      <ControlsContainer>\r\n                        <KnobControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"vibratoDepth\"\r\n                          label=\"depth\"\r\n                          value={this.state.vibratoDepth}\r\n                          size=\"small\"\r\n                        />\r\n                        <KnobControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"vibratoFreq\"\r\n                          label=\"freq\"\r\n                          value={this.state.vibratoFreq}\r\n                          size=\"small\"\r\n                        />\r\n                        <KnobControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"vibratoWet\"\r\n                          label=\"wet\"\r\n                          value={this.state.vibratoWet}\r\n                          size=\"small\"\r\n                        />\r\n                      </ControlsContainer>\r\n                    </ControlWrapperVertical>\r\n                  </ControlSection>\r\n                  <ControlSection>\r\n                    <ControlWrapperVertical>\r\n                      <ControlsContainerLabel>CHORUS</ControlsContainerLabel>\r\n                      <ControlsContainer>\r\n                        <ControlsSubContainer>\r\n                          <KnobControl\r\n                            {...this.sharedControlProps}\r\n                            name=\"chorusSpread\"\r\n                            label=\"spread\"\r\n                            value={this.state.chorusSpread}\r\n                            size=\"small\"\r\n                          />\r\n                          <KnobControl\r\n                            {...this.sharedControlProps}\r\n                            name=\"chorusDepth\"\r\n                            label=\"depth\"\r\n                            value={this.state.chorusDepth}\r\n                            size=\"small\"\r\n                          />\r\n                        </ControlsSubContainer>\r\n                        <ControlsSubContainer>\r\n                          <KnobControl\r\n                            {...this.sharedControlProps}\r\n                            name=\"chorusDelay\"\r\n                            label=\"delay\"\r\n                            value={this.state.chorusDelay}\r\n                            size=\"small\"\r\n                          />\r\n                          <KnobControl\r\n                            {...this.sharedControlProps}\r\n                            name=\"chorusFreq\"\r\n                            label=\"freq\"\r\n                            value={this.state.chorusFreq}\r\n                            size=\"small\"\r\n                          />\r\n                        </ControlsSubContainer>\r\n                        <ControlsSubContainer>\r\n                          {/* <KnobControl\r\n                                {...this.sharedControlProps}\r\n                                name='chorusType'\r\n                                label='type'\r\n                                value={chorusType}\r\n                                size='small'\r\n                              /> */}\r\n                          <KnobControl\r\n                            {...this.sharedControlProps}\r\n                            name=\"chorusWet\"\r\n                            label=\"wet\"\r\n                            value={this.state.chorusWet}\r\n                            size=\"small\"\r\n                          />\r\n                        </ControlsSubContainer>\r\n                      </ControlsContainer>\r\n                    </ControlWrapperVertical>\r\n                  </ControlSection>\r\n                  {/* <ControlSection>\r\n                    <ControlWrapperVertical>\r\n                      <ControlsContainerLabel>\r\n                        BITCRUSHER\r\n                      </ControlsContainerLabel>\r\n                      <ControlsContainer>\r\n                        <DigitalControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"crusherBits\"\r\n                          label=\"bits\"\r\n                          value={this.state.crusherBits}\r\n                        />\r\n                        <KnobControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"crusherWet\"\r\n                          label=\"wet\"\r\n                          value={this.state.crusherWet}\r\n                          size=\"small\"\r\n                        />\r\n                      </ControlsContainer>\r\n                    </ControlWrapperVertical>\r\n                  </ControlSection> */}\r\n                  <ControlSection>\r\n                    <ControlWrapperVertical>\r\n                      <ControlsContainerLabel>\r\n                        DISTORTION\r\n                      </ControlsContainerLabel>\r\n                      <ControlsContainer>\r\n                        {/* <DigitalControl {...this.sharedControlProps} name='distOver' label='over' value={distOver} /> */}\r\n                        <KnobControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"distAmount\"\r\n                          label=\"amount\"\r\n                          value={this.state.distAmount}\r\n                          size=\"small\"\r\n                        />\r\n                        <KnobControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"distWet\"\r\n                          label=\"wet\"\r\n                          value={this.state.distWet}\r\n                          size=\"small\"\r\n                        />\r\n                      </ControlsContainer>\r\n                    </ControlWrapperVertical>\r\n                  </ControlSection>\r\n                  <ControlSection>\r\n                    <ControlWrapperVertical>\r\n                      <ControlsContainerLabel>\r\n                        FREQ SHIFTER\r\n                      </ControlsContainerLabel>\r\n                      <ControlsContainer>\r\n                        <KnobControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"freqShifterAmount\"\r\n                          label=\"amount\"\r\n                          value={this.state.freqShifterAmount}\r\n                          size=\"small\"\r\n                        />\r\n                        <KnobControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"freqShifterWet\"\r\n                          label=\"wet\"\r\n                          value={this.state.freqShifterWet}\r\n                          size=\"small\"\r\n                        />\r\n                      </ControlsContainer>\r\n                    </ControlWrapperVertical>\r\n                  </ControlSection>\r\n                  <ControlSection>\r\n                    <ControlWrapperVertical>\r\n                      <ControlsContainerLabel>PITCHER</ControlsContainerLabel>\r\n                      <ControlsContainer>\r\n                        <KnobControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"pitcherPitch\"\r\n                          label=\"pitch\"\r\n                          value={this.state.pitcherPitch}\r\n                          size=\"small\"\r\n                        />\r\n                        <KnobControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"pitcherWindow\"\r\n                          label=\"slice\"\r\n                          value={this.state.pitcherWindow}\r\n                          size=\"small\"\r\n                        />\r\n                        <KnobControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"pitcherWet\"\r\n                          label=\"wet\"\r\n                          value={this.state.pitcherWet}\r\n                          size=\"small\"\r\n                        />\r\n                      </ControlsContainer>\r\n                    </ControlWrapperVertical>\r\n                  </ControlSection>\r\n                  <ControlSection>\r\n                    <ControlWrapperVertical>\r\n                      <ControlsContainerLabel>REVERB</ControlsContainerLabel>\r\n                      <ControlsContainer>\r\n                        <KnobControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"reverbSize\"\r\n                          label=\"size\"\r\n                          value={this.state.reverbSize}\r\n                          size=\"small\"\r\n                        />\r\n                        <KnobControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"reverbDampening\"\r\n                          label=\"damp\"\r\n                          value={this.state.reverbDampening}\r\n                          size=\"small\"\r\n                        />\r\n                        <KnobControl\r\n                          {...this.sharedControlProps}\r\n                          name=\"reverbWet\"\r\n                          label=\"wet\"\r\n                          value={this.state.reverbWet}\r\n                          size=\"small\"\r\n                        />\r\n                      </ControlsContainer>\r\n                    </ControlWrapperVertical>\r\n                  </ControlSection>\r\n                </InstrumentRightTopRight>\r\n              </InstrumentRightTop>\r\n              <InstrumentRightBottom>\r\n                <PianoKeys\r\n                  activeKeys={this.state.activeKeys}\r\n                  octaves={this.state.octaves}\r\n                  handleMouseDownPianoKey={this.handleMouseDownPianoKey}\r\n                  handleMouseUpPianoKey={this.handleMouseUpPianoKey}\r\n                  handleMouseOverPianoKey={this.handleMouseOverPianoKey}\r\n                  handleMouseLeavePianoKey={this.handleMouseLeavePianoKey}\r\n                />\r\n              </InstrumentRightBottom>\r\n            </InstrumentRight>\r\n          </Instrument>\r\n        </Container>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}